(self.webpackChunkreadkit_web=self.webpackChunkreadkit_web||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},5366:(t,e,n)=>{"use strict";n.d(e,{deG:()=>en,tb:()=>ou,AFp:()=>eu,ip1:()=>Xa,CZH:()=>tu,hGG:()=>Xu,z2F:()=>Gu,sBO:()=>oa,Sil:()=>yu,_Vd:()=>No,EJc:()=>cu,SBq:()=>Po,qLn:()=>vr,vpe:()=>Pa,gxx:()=>ns,tBr:()=>En,XFs:()=>k,OlP:()=>tn,zs3:()=>ys,ZZ4:()=>Xo,aQg:()=>ea,soG:()=>uu,YKP:()=>ga,v3s:()=>Hu,h0i:()=>ma,PXZ:()=>Uu,R0b:()=>_u,FiY:()=>Tn,Lbi:()=>su,g9A:()=>iu,Qsj:()=>Mo,FYo:()=>Fo,JOm:()=>wr,Tiy:()=>jo,q3G:()=>hr,tp0:()=>In,EAV:()=>Ku,Rgc:()=>ha,dDg:()=>xu,DyG:()=>nn,q4F:()=>Vo,GfV:()=>qo,s_b:()=>va,ifc:()=>L,eFA:()=>ju,G48:()=>Fu,Gpc:()=>d,f3M:()=>_n,X6Q:()=>Lu,_c5:()=>Ju,VLi:()=>Nu,c2e:()=>au,zSh:()=>is,wAp:()=>go,vHH:()=>g,EiD:()=>cr,mCW:()=>Zn,qzn:()=>Ln,JVY:()=>Mn,pB0:()=>Vn,eBb:()=>jn,L6k:()=>Un,LAX:()=>qn,cg1:()=>fo,Tjo:()=>Wu,kL8:()=>po,yhl:()=>Fn,dqk:()=>q,sIi:()=>Cs,CqO:()=>Bs,QGY:()=>qs,F4k:()=>Vs,RDi:()=>It,AaK:()=>l,z3N:()=>Pn,qOj:()=>bs,TTD:()=>vt,_Bn:()=>xo,xp6:()=>ui,uIk:()=>ks,ekj:()=>to,Suo:()=>Ka,Xpm:()=>J,lG2:()=>it,Yz7:()=>_,cJS:()=>w,oAB:()=>et,Yjl:()=>st,Y36:()=>Ds,_UZ:()=>Us,qZA:()=>Ms,TgZ:()=>Fs,EpF:()=>js,n5z:()=>Qe,Ikx:()=>uo,LFG:()=>bn,$8M:()=>Je,NdJ:()=>Gs,CRH:()=>Qa,kcU:()=>de,O4$:()=>fe,oxw:()=>Zs,Hsn:()=>Qs,F$t:()=>Ks,Q6J:()=>Ps,s9C:()=>Ws,iGM:()=>Za,MAs:()=>Os,CHM:()=>Bt,LSH:()=>fr,kYT:()=>nt,YNc:()=>Rs,_uU:()=>so,Oqu:()=>oo,hij:()=>ao,Gf:()=>$a});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(1055);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return E(t,I)||E(t,x)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(A))?t[C]:null}const I=u({"\u0275prov":u}),C=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function R(t){const e=N;return N=t,e}function O(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function D(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,q=F||j||M||U,V={},B=[],G=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),Z=u({"\u0275mod":u}),$=u({"\u0275loc":u}),K=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let W=0;function J(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=W++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Y):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function Y(t){return ot(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){return D(()=>{const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return D(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const it=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ot(t){return t[G]||null}function at(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function gt(t,e){return t.hasOwnProperty(K)?t[K]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),_t}function _t(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new yt(u&&u.currentValue,e,o===V),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}vt.ngInherit=!0;const Et="http://www.w3.org/2000/svg";let Tt;function It(t){Tt=t}function Ct(t){return!!t.listen}const xt={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function At(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return At(e[t])}function Nt(t,e){return At(e[t.index])}function Rt(t,e){return t.data[e]}function Ot(t,e){const n=e[t];return lt(n)?n:n[0]}function Dt(t){return 4==(4&t[2])}function Pt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Mt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jt(){return Ut.bindingsEnabled}function qt(){return Ut.lFrame.lView}function Vt(){return Ut.lFrame.tView}function Bt(t){return Ut.lFrame.contextLView=t,t[8]}function Gt(){let t=zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function zt(){return Ut.lFrame.currentTNode}function Ht(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Zt(){return Ut.lFrame.isParent}function $t(){Ut.lFrame.isParent=!1}function Kt(){return Ut.isInCheckNoChangesMode}function Qt(t){Ut.isInCheckNoChangesMode=t}function Wt(){return Ut.lFrame.bindingIndex++}function Jt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Ut.lFrame.currentDirectiveIndex=t}function Xt(){return Ut.lFrame.currentQueryIndex}function te(t){Ut.lFrame.currentQueryIndex=t}function ee(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ee(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=ie();return r.currentTNode=e,r.lView=t,!0}function re(t){const e=ie(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ae=oe;function ue(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(){return Ut.lFrame.selectedIndex}function le(t){Ut.lFrame.selectedIndex=t}function he(){const t=Ut.lFrame;return Rt(t.tView,t.selectedIndex)}function fe(){Ut.lFrame.currentNamespace=Et}function de(){Ut.lFrame.currentNamespace=null}function pe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){ve(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&ve(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ve(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(be(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function be(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const _e=-1;class we{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Se(t,e,n){const r=Ct(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Te(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function Ie(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ce(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ce(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function xe(t){return t!==_e}function Ae(t){return 32767&t}function ke(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function Re(t){const e=Ne;return Ne=t,e}let Oe=0;function De(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Fe(t,e),s=t.injectorIndex;if(xe(i)){const t=Ae(i),n=ke(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Oe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function je(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],s=R(void 0);try{return i?i.get(e,r,n&k.Optional):O(e,r,n&k.Optional)}finally{R(s)}}return Ue(r,e,n)}function qe(t,e,n,r=k.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:Be:e}(n);if("function"==typeof s){if(!ne(e,t,r))return r&k.Host?Ue(i,n,r):je(e,n,r,i);try{const t=s(r);if(null!=t||r&k.Optional)return t;b(n)}finally{ae()}}else if("number"==typeof s){let i=null,o=Le(t,e),a=_e,u=r&k.Host?e[16][6]:null;for((-1===o||r&k.SkipSelf)&&(a=-1===o?Fe(t,e):e[o+8],a!==_e&&$e(r,!1)?(i=e[1],o=Ae(a),e=ke(a,e)):o=-1);-1!==o;){const t=e[1];if(Ze(s,o,t.data)){const t=Ge(o,e,n,i,r,u);if(t!==Ve)return t}a=e[o+8],a!==_e&&$e(r,e[1].data[o+8]===u)&&Ze(s,o,e)?(i=t,o=Ae(a),e=ke(a,e)):o=-1}}}return je(e,n,r,i)}const Ve={};function Be(){return new Ke(Gt(),qt())}function Ge(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=ze(a,o,n,null==r?dt(a)&&Ne:r!=o&&0!=(3&a.type),i&k.Host&&s===a);return null!==u?He(e,o,u,a):Ve}function ze(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&mt(t)&&t.type===n)return u}return null}function He(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof we){const o=i;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(v(s[n]));const a=Re(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?R(o.injectImpl):null;ne(t,r,k.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&R(u),Re(a),o.resolving=!1,ae()}}return i}function Ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&k.Self||t&k.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qe(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return D(()=>{const e=t.prototype.constructor,n=e[K]||We(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||We(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function We(t){return m(t)?()=>{const e=We(p(t));return e&&e()}:gt(t)}function Je(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const Ye="__parameters__";function Xe(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ye)?t[Ye]:Object.defineProperty(t,Ye,{value:[]})[Ye];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class tn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const en=new tn("AnalyzeForEntryComponents"),nn=Function;function rn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),rn(r,e)):e!==t&&e.push(r)}return e}function sn(t,e){t.forEach(t=>Array.isArray(t)?sn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function an(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function un(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function cn(t,e,n){let r=hn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ln(t,e){const n=hn(t,e);if(n>=0)return t[1|n]}function hn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn={},dn=/\n/gm,pn="__source",mn=u({provide:String,useValue:u});let gn;function yn(t){const e=gn;return gn=t,e}function vn(t,e=k.Default){if(void 0===gn)throw new Error("inject() must be called from an injection context");return null===gn?O(t,void 0,e):gn.get(t,e&k.Optional?null:void 0,e)}function bn(t,e=k.Default){return(N||vn)(p(t),e)}const _n=bn;function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(bn(t,n))}else e.push(bn(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const En=Sn(Xe("Inject",t=>({token:t})),-1),Tn=Sn(Xe("Optional"),8),In=Sn(Xe("SkipSelf"),4);let Cn;function xn(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,q.trustedTypes))try{Cn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class An{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends An{getTypeName(){return"HTML"}}class Nn extends An{getTypeName(){return"Style"}}class Rn extends An{getTypeName(){return"Script"}}class On extends An{getTypeName(){return"URL"}}class Dn extends An{getTypeName(){return"ResourceURL"}}function Pn(t){return t instanceof An?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Fn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Fn(t){return t instanceof An&&t.getTypeName()||null}function Mn(t){return new kn(t)}function Un(t){return new Nn(t)}function jn(t){return new Rn(t)}function qn(t){return new On(t)}function Vn(t){return new Dn(t)}class Bn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(xn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=xn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(zn)||t.match(Hn)?t:"unsafe:"+t}function $n(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=$n("area,br,col,hr,img,wbr"),Wn=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jn=$n("rp,rt"),Yn=Kn(Jn,Wn),Xn=Kn(Qn,Kn(Wn,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Jn,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),tr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),er=$n("srcset"),nr=Kn(tr,er,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rr=$n("script,style,template");class ir{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!rr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!nr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;tr[s]&&(o=Zn(o)),er[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ar(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ar(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function ar(t){return t.replace(/&/g,"&amp;").replace(sr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ur;function cr(t,e){let n=null;try{ur=ur||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(t){return!1}}()?new Bn(e):e}(t);let r=e?String(e):"";n=ur.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ur.getInertBodyElement(r)}while(r!==s);return xn((new ir).sanitizeChildren(lr(n)||n))}finally{if(n){const t=lr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function lr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function fr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(hr.URL,t)||"":Ln(t,"URL")?Pn(t):Zn(y(t))}function dr(t,e){t.__ngContext__=e}function pr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function mr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class vr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?mr(t)?mr(t):this._findContext(gr(t)):null}_findOriginalError(t){let e=gr(t);for(;e&&gr(e);)e=gr(e);return e}}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function _r(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Sr(t,e){return(void 0)(t,e)}function Er(t){const e=t[3];return ht(e)?e[3]:e}function Tr(t){return Cr(t[13])}function Ir(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function xr(t,e,n,r,i){if(null!=r){let s,o=!1;ht(r)?s=r:lt(r)&&(o=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?Lr(e,n,a):Pr(e,n,a,i||null,!0):1===t&&null!==n?Pr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Mr(t,e);r&&function(t,e,n,r){Ct(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==At(n)&&xr(e,t,r,s,i);for(let o=ct;o<n.length;o++){const i=n[o];Hr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Ar(t,e,n){return Ct(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function kr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Mt(i,-1)),n.splice(r,1)}function Nr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&kr(s,r),e>0&&(t[n-1][4]=r[4]);const o=an(t,ct+e);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Rr(t,e){if(!(256&e[2])){const n=e[11];Ct(n)&&n.destroyNode&&Hr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Or(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Or(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Or(e[1],e),n=e&&e[4]}e=n}}(e)}}function Or(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof we)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):At(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ct(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&kr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}function Pr(t,e,n,r,i){Ct(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Lr(t,e,n){Ct(t)?t.appendChild(e,n):e.appendChild(n)}function Fr(t,e,n,r,i){null!==r?Pr(t,e,n,r,i):Lr(t,e,n)}function Mr(t,e){return Ct(t)?t.parentNode(e):e.parentNode}function Ur(t,e,n){return jr(t,e,n)}let jr=function(t,e,n){return 40&t.type?Nt(t,n):null};function qr(t,e,n,r){const i=Dr(t,r,e),s=e[11],o=Ur(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Fr(s,i,n[a],o,!1);else Fr(s,i,n,o,!1)}function Vr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Gr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Vr(t,n);{const n=t[e.index];return ht(n)?Gr(-1,n):At(n)}}if(32&n)return Sr(e,t)()||At(t[e.index]);{const n=Br(t,e);return null!==n?Array.isArray(n)?n[0]:Vr(Er(t[16]),n):Vr(t,e.next)}}return null}function Br(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Gr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Vr(t,r)}return e[7]}function zr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&dr(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)zr(t,e,n.child,r,i,s,!1),xr(e,t,i,a,s);else if(32&u){const o=Sr(n,r);let u;for(;u=o();)xr(e,t,i,u,s);xr(e,t,i,a,s)}else 16&u?Zr(t,e,r,n,i,s):xr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Hr(t,e,n,r,i,s){zr(n,r,t.firstChild,e,i,s,!1)}function Zr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)xr(e,t,i,a[u],s);else zr(t,e,a,o[3],i,s,!0)}function $r(t,e,n){Ct(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Kr(t,e,n){Ct(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Qr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Wr="ng-template";function Jr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Qr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Wr}function Xr(t,e,n){return e===(4!==t.type||n?t.value:Wr)}function ti(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Xr(t,u,n)||""===u&&1===e.length){if(ei(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Jr(t.attrs,c,n)){if(ei(r))return!1;o=!0}continue}const l=ni(8&r?"class":u,i,Yr(t),n);if(-1===l){if(ei(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Qr(e,c,0)||2&r&&c!==t){if(ei(r))return!1;o=!0}}}}else{if(!o&&!ei(r)&&!ei(u))return!1;if(o&&ei(u))continue;o=!1,r=u|1&r}}return ei(r)||o}function ei(t){return 0==(1&t)}function ni(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ri(t,e,n=!1){for(let r=0;r<e.length;r++)if(ti(t,e[r],n))return!0;return!1}function ii(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function si(t,e){return t?":not("+e.trim()+")":e}function oi(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ei(o)||(e+=si(s,i),i=""),r=o,s=s||!ei(r);n++}return""!==i&&(e+=si(s,i)),e}const ai={};function ui(t){ci(Vt(),qt(),ce()+t,Kt())}function ci(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&me(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}le(n)}function li(t,e){return t<<17|e<<2}function hi(t){return t>>17&32767}function fi(t){return 2|t}function di(t){return(131068&t)>>2}function pi(t,e){return-131069&t|e<<2}function mi(t){return 1|t}function gi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];te(i),n.contentQueries(2,e[s],s)}}}function yi(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function vi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=zt(),o=Zt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Ht(s,!0),s}function bi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _i(t,e,n){re(e);try{const r=t.viewQuery;null!==r&&Qi(1,r,n);const i=t.template;null!==i&&Ei(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gi(t,e),t.staticViewQueries&&Qi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ue()}}function wi(t,e,n,r){const i=e[2];if(256==(256&i))return;re(e);const s=Kt();try{Ft(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ei(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),ye(e,0)}if(function(t){for(let e=Tr(t);null!==e;e=Ir(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Mt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Tr(t);null!==e;e=Ir(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Pt(n)&&wi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&gi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)le(~r);else{const i=r,s=n[++t],o=n[++t];Jt(s,i),o(2,e[i])}}}finally{le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Bi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Qi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Mt(e[3],-1))}finally{ue()}}function Si(t,e,n,r){const i=e[10],s=!Kt(),o=Dt(e);try{s&&!o&&i.begin&&i.begin(),o&&_i(t,e,r),wi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ei(t,e,n,r,i){const s=ce(),o=2&r;try{le(-1),o&&e.length>ut&&ci(t,e,ut,Kt()),n(r,i)}finally{le(s)}}function Ti(t,e,n){jt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||De(n,e),dr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=mt(r);s&&Ui(e,n,r);const u=He(e,t,a,n);dr(u,e),null!==o&&ji(0,a-i,u,r,0,o),s&&(Ot(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ut.lFrame.currentDirectiveIndex;try{le(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Di(r,i)}}finally{le(-1),Yt(o)}}(t,e,n))}function Ii(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Ci(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=xi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function xi(t,e,n,r,i,s,o,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ai);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ai(t,e,n,r){const i=Ji(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Yi(t).push(r,i.length-1))}function ki(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ni(t,e,n,r,i,s,o,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ts(t,n,c,r,i),dt(e)&&function(t,e){const n=Ot(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,Ct(s)?s.setProperty(u,r,i):Te(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ri(t,e,n,r){let i=!1;if(jt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ri(n,o.selectors,!1)&&(i||(i=[]),Me(De(n,e),t,o.type),mt(o)?(Pi(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Fi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=bi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ie(n.mergedAttrs,c.hostAttrs),Mi(t,n,e,u,c),Li(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Yr(e)?null:qi(n,i);s.push(c),o=ki(n,u,o),a=ki(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ie(n.mergedAttrs,n.attrs),i}function Oi(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Di(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Pi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Li(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Fi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mi(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=gt(i.type)),o=new we(s,mt(i),null);t.blueprint[r]=o,n[r]=o,Oi(t,e,0,r,bi(t,n,i.hostVars,ai),i)}function Ui(t,e,n){const r=Nt(e,t),i=Ci(n),s=t[10],o=Hi(t,yi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function ji(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function qi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Bi(t,e){const n=Ot(e,t);if(Pt(n)){const t=n[1];80&n[2]?wi(t,n,t.template,n[8]):n[5]>0&&Gi(n)}}function Gi(t){for(let n=Tr(t);null!==n;n=Ir(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];wi(t,e,t.template,e[8])}else e[5]>0&&Gi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ot(e[n],t);Pt(r)&&r[5]>0&&Gi(r)}}function zi(t,e){const n=Ot(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),_i(r,n,n[8])}function Hi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Zi(t){for(;t;){t[2]|=64;const e=Er(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function $i(t,e,n){const r=e[10];r.begin&&r.begin();try{wi(t,e,t.template,n)}catch(i){throw Xi(e,i),i}finally{r.end&&r.end()}}function Ki(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=pr(n),i=r[1];Si(i,r,i.template,n)}}(t[8])}function Qi(t,e,n){te(0),e(t,n)}const Wi=(()=>Promise.resolve(null))();function Ji(t){return t[7]||(t[7]=[])}function Yi(t){return t.cleanup||(t.cleanup=[])}function Xi(t,e){const n=t[9],r=n?n.get(vr,null):null;r&&r.handleError(e)}function ts(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function es(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=h(i,t):2==s&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ns=new tn("INJECTOR",-1);class rs{get(t,e=fn){if(e===fn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const is=new tn("Set Injector scope."),ss={},os={};let as;function us(){return void 0===as&&(as=new rs),as}function cs(t,e=null,n=null,r){return new ls(t,n,e||us(),r)}class ls{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&sn(e,n=>this.processProvider(n,t,e)),sn([t],t=>this.processInjectorType(t,[],i)),this.records.set(ns,ds(void 0,this));const s=this.records.get(is);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fn,n=k.Default){this.assertNotDestroyed();const r=yn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof tn)&&S(t);e=n&&this.injectableDefInScope(n)?ds(hs(t),ss):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?us():this.parent).get(t,e=n&k.Optional&&e===fn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[pn]&&i.unshift(e[pn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{yn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{sn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];sn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(s);const a=gt(s)||(()=>new s);this.records.set(s,ds(a,ss));const u=r.providers;if(null!=u&&!o){const e=t;sn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ms(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ps(t)?ds(void 0,t.useValue):ds(fs(t),ss)}(t);if(ms(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ds(void 0,ss,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ss&&(e.value=os,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function hs(t){const e=S(t),n=null!==e?e.factory:gt(t);if(null!==n)return n;if(t instanceof tn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=un(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function fs(t,e,n){let r;if(ms(t)){const e=p(t);return gt(e)||hs(e)}if(ps(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>bn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return gt(e)||hs(e);r=()=>new e(...wn(t.deps))}var i;return r}function ds(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ps(t){return null!==t&&"object"==typeof t&&mn in t}function ms(t){return"function"==typeof t}const gs=function(t,e,n){return function(t,e=null,n=null,r){const i=cs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ys=(()=>{class t{static create(t,e){return Array.isArray(t)?gs(t,e,""):gs(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fn,t.NULL=new rs,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>bn(ns)}),t.__NG_ELEMENT_ID__=-1,t})();function vs(t,e){pe(pr(t)[1],Gt())}function bs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=_s(t.inputs),e.declaredInputs=_s(t.declaredInputs),e.outputs=_s(t.outputs);const n=i.hostBindings;n&&Es(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ws(t,s),o&&Ss(t,o),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===bs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ie(i.hostAttrs,n=Ie(n,i.hostAttrs))}}(r)}function _s(t){return t===V?{}:t===B?[]:t}function ws(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ss(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Es(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ts=null;function Is(){if(!Ts){const t=q.Symbol;if(t&&t.iterator)Ts=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ts=n)}}}return Ts}function Cs(t){return!!xs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Is()in t)}function xs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function As(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ks(t,e,n,r){const i=qt();return As(i,Wt(),e)&&(Vt(),function(t,e,n,r,i,s){const o=Nt(t,e);!function(t,e,n,r,i,s,o){if(null==s)Ct(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);Ct(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(he(),i,t,e,n,r)),ks}function Ns(t,e,n,r){return As(t,Wt(),n)?e+y(n)+r:ai}function Rs(t,e,n,r,i,s,o,a){const u=qt(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=vi(e,t,4,o||null,Lt(c,a));Ri(e,n,l,Lt(c,u)),pe(e,l);const h=l.tViews=xi(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Ht(h,!1);const f=u[11].createComment("");qr(c,u,f,h),dr(f,u),Hi(u,u[l]=Vi(f,u,f,h)),pt(h)&&Ti(c,u,h),null!=o&&Ii(u,h,a)}function Os(t){return function(t,e){return t[e]}(Ut.lFrame.contextLView,ut+t)}function Ds(t,e=k.Default){const n=qt();return null===n?bn(t,e):qe(Gt(),n,p(t),e)}function Ps(t,e,n){const r=qt();return As(r,Wt(),e)&&Ni(Vt(),he(),r,t,e,r[11],n,!1),Ps}function Ls(t,e,n,r,i){const s=i?"class":"style";ts(t,n,e.inputs[s],s,r)}function Fs(t,e,n,r){const i=qt(),s=Vt(),o=ut+t,a=i[11],u=i[o]=Ar(a,e,Ut.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=vi(e,t,2,i,Lt(a,s));return Ri(e,n,u,Lt(a,o)),null!==u.attrs&&es(u,u.attrs,!1),null!==u.mergedAttrs&&es(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Ht(c,!0);const l=c.mergedAttrs;null!==l&&Se(a,u,l);const h=c.classes;null!==h&&Kr(a,u,h);const f=c.styles;null!==f&&$r(a,u,f),64!=(64&c.flags)&&qr(s,i,u,c),0===Ut.lFrame.elementDepthCount&&dr(u,i),Ut.lFrame.elementDepthCount++,pt(c)&&(Ti(s,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&Ii(i,c)}function Ms(){let t=Gt();Zt()?$t():(t=t.parent,Ht(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(pe(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ls(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ls(n,e,qt(),e.stylesWithoutHost,!1)}function Us(t,e,n,r){Fs(t,e,n,r),Ms()}function js(){return qt()}function qs(t){return!!t&&"function"==typeof t.then}function Vs(t){return!!t&&"function"==typeof t.subscribe}const Bs=Vs;function Gs(t,e,n,r){const i=qt(),s=Vt(),o=Gt();return function(t,e,n,r,i,s,o,a){const u=pt(r),c=t.firstCreatePass&&Yi(t),l=Ji(e);let h=!0;if(3&r.type||a){const f=Nt(r,e),d=a?a(f):f,p=l.length,m=a?t=>a(At(t[r.index])):r.index;if(Ct(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Hs(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,m,p,p+1)}}else s=Hs(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=Hs(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Gs}function zs(t,e,n,r){try{return!1!==n(r)}catch(i){return Xi(t,i),!1}}function Hs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Ot(t.index,e):e;0==(32&e[2])&&Zi(o);let a=zs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=zs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Zs(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function $s(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ri(t,s,!0):ii(r,s))return i}else n=i}return n}function Ks(t){const e=qt()[16][6];if(!e.projection){const n=e.projection=un(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?$s(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Qs(t,e=0,n){const r=qt(),i=Vt(),s=vi(i,ut+t,16,null,n||null);null===s.projection&&(s.projection=e),$t(),64!=(64&s.flags)&&function(t,e,n){Zr(e[11],0,e,n,Dr(t,n,e),Ur(n.parent||e[6],n,e))}(i,r,s)}function Ws(t,e,n){return Js(t,"",e,"",n),Ws}function Js(t,e,n,r,i){const s=qt(),o=Ns(s,e,n,r);return o!==ai&&Ni(Vt(),he(),s,t,o,s[11],i,!1),Js}function Ys(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?hi(s):di(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Xs(t[a],e)&&(u=!0,t[a+1]=r?mi(n):fi(n)),a=r?hi(n):di(n)}u&&(t[n+1]=r?fi(s):mi(s))}function Xs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&hn(t,e)>=0}function to(t,e){return function(t,e,n,r){const i=qt(),s=Vt(),o=function(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ce()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=no(n=eo(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=eo(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==di(r))return t[hi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=eo(null,t,e,n[1],r),n=no(n,e.attrs,r),function(t,e,n,r){t[hi(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=no(r,t[s].hostAttrs,true);return no(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=hi(o),u=di(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||hn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=hi(t[a+1]);t[r+1]=li(e,a),0!==e&&(t[e+1]=pi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=li(a,0),0!==a&&(t[a+1]=pi(t[a+1],r)),a=r;else t[r+1]=li(u,0),0===a?a=r:t[u+1]=pi(t[u+1],r),u=r;l&&(t[r+1]=fi(t[r+1])),Ys(t,c,r,!0),Ys(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&hn(s,e)>=0&&(n[r+1]=mi(n[r+1]))}(e,c,t,r),o=li(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==ai&&As(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];io(1==(1&c)?ro(u,e,n,i,di(c),o):void 0)||(io(s)||function(t){return 2==(2&t)}(c)&&(s=ro(u,null,n,i,a,o)),function(t,e,n,r,i){const s=Ct(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(ce(),n),i,s))}(s,s.data[ce()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Pn(t))),t}(e),true,o)}(t,e),to}function eo(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=no(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function no(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),cn(t,o,!!n||e[++s]))}return void 0===t?null:t}function ro(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ai&&(l=c?B:void 0);let h=c?ln(l,r):u===r?l:void 0;if(s&&!io(h)&&(h=ln(e,r)),io(h)&&(a=h,o))return a;const f=t[i+1];i=o?hi(f):di(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=ln(t,r))}return a}function io(t){return void 0!==t}function so(t,e=""){const n=qt(),r=Vt(),i=t+ut,s=r.firstCreatePass?vi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return Ct(t)?t.createText(e):t.createTextNode(e)}(n[11],e);qr(r,n,o,s),Ht(s,!1)}function oo(t){return ao("",t,""),oo}function ao(t,e,n){const r=qt(),i=Ns(r,t,e,n);return i!==ai&&function(t,e,n){const r=kt(e,t);!function(t,e,n){Ct(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ce(),i),ao}function uo(t,e,n){const r=qt();return As(r,Wt(),e)&&Ni(Vt(),he(),r,t,e,r[11],n,!0),uo}const co=void 0;var lo=["en",[["a","p"],["AM","PM"],co],[["AM","PM"],co,co],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],co,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],co,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",co,"{1} 'at' {0}",co],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ho={};function fo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=mo(e);if(n)return n;const r=e.split("-")[0];if(n=mo(r),n)return n;if("en"===r)return lo;throw new Error(`Missing locale data for the locale "${t}".`)}function po(t){return fo(t)[go.PluralCase]}function mo(t){return t in ho||(ho[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),ho[t]}var go=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const yo="en-US";let vo=yo;function bo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(vo=t.toLowerCase().replace(/_/g,"-"))}function _o(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)_o(t[s],e,n,r,i);else{const s=Vt(),o=qt();let a=ms(t)?t:p(t.provide),u=fs(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ms(t)||!t.multi){const r=new we(u,i,Ds),d=Eo(a,e,i?l:l+f,h);-1===d?(Me(De(c,o),s,a),wo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=Eo(a,e,l+f,h),p=Eo(a,e,l,l+f),m=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!m){Me(De(c,o),s,a);const l=function(t,e,n,r,i){const s=new we(t,n,Ds);return s.multi=[],s.index=e,s.componentProviders=0,So(s,i,r&&!n),s}(i?Io:To,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),wo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else wo(s,t,d>-1?d:p,So(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function wo(t,e,n,r){const i=ms(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function So(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Eo(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function To(t,e,n,r){return Co(this.multi,[])}function Io(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=He(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Co(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Co(i,s);return s}function Co(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function xo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=mt(t);_o(n,r.data,r.blueprint,i,!0),_o(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ao{}class ko{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let No=(()=>{class t{}return t.NULL=new ko,t})();function Ro(...t){}function Oo(t,e){return new Po(Nt(t,e))}const Do=function(){return Oo(Gt(),qt())};let Po=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Do,t})();function Lo(t){return t instanceof Po?t.nativeElement:t}class Fo{}let Mo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Uo(),t})();const Uo=function(){const t=qt(),e=Ot(Gt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let jo=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class qo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Vo=new qo("12.0.5");class Bo{constructor(){}supports(t){return Cs(t)}create(t){return new zo(t)}}const Go=(t,e)=>e;class zo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Go}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Ko(n,r,i)?e:n,o=Ko(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Cs(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Is()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ho(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $o),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $o),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ho{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class $o{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Zo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ko(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Qo{constructor(){}supports(t){return t instanceof Map||xs(t)}create(){return new Wo}}class Wo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||xs(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Jo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Jo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yo(){return new Xo([new Bo])}let Xo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Yo()),deps:[[t,new In,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Yo}),t})();function ta(){return new ea([new Qo])}let ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ta()),deps:[[t,new In,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:ta}),t})();function na(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(At(s)),ht(s))for(let t=ct;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&na(e[1],e,n,r)}const o=n.type;if(8&o)na(t,e,n.child,r);else if(32&o){const t=Sr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Br(e,n);if(Array.isArray(t))r.push(...t);else{const n=Er(e[16]);na(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ra{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return na(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Nr(t,n),an(e,n))}this._attachedToViewContainer=!1}Rr(this._lView[1],this._lView)}onDestroy(t){Ai(this._lView[1],this._lView,null,t)}markForCheck(){Zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$i(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Qt(!0);try{$i(t,e,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Hr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ia extends ra{constructor(t){super(t),this._view=t}detectChanges(){Ki(this._view)}checkNoChanges(){!function(t){Qt(!0);try{Ki(t)}finally{Qt(!1)}}(this._view)}get context(){return null}}const sa=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Ot(t.index,e);return new ra(n,n)}return 47&t.type?new ra(e[16],e):null}(Gt(),qt(),16==(16&t))};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t})();const aa=[new Qo],ua=new Xo([new Bo]),ca=new ea(aa),la=function(){return pa(Gt(),qt())};let ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=la,t})();const fa=ha,da=class extends fa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=yi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),_i(e,n,t),new ra(n)}};function pa(t,e){return 4&t.type?new da(e,t,Oo(t,e)):null}class ma{}class ga{}const ya=function(){return Ea(Gt(),qt())};let va=(()=>{class t{}return t.__NG_ELEMENT_ID__=ya,t})();const ba=va,_a=class extends ba{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Oo(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fe(this._hostTNode,this._hostLView);if(xe(t)){const e=ke(t,this._hostLView),n=Ae(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=wa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(ma,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new _a(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ct+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ct?(e[4]=n[i],on(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Gr(i,s),a=n[11],u=Mr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Hr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),on(Sa(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=wa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);n&&(an(Sa(this._lContainer),e),Rr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);return n&&null!=an(Sa(this._lContainer),e)?new ra(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function wa(t){return t[8]}function Sa(t){return t[8]||(t[8]=[])}function Ea(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Pr(n,Mr(n,r),i,function(t,e){return Ct(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Vi(r,e,i,t),Hi(e,n)}return new _a(n,t,e)}const Ta={};class Ia extends No{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ot(t);return new Aa(e,this.ngModule)}}function Ca(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const xa=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class Aa extends Ao{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(oi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ca(this.componentDef.inputs)}get outputs(){return Ca(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ta,i);return s!==Ta||r===Ta?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Fo,xt),o=i.get(jo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ct(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ar(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Et:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Wi,playerHandler:null,flags:0},f=xi(0,null,null,1,0,null,null,null,null,null),d=yi(null,f,h,l,null,null,s,a,o,i);let p,m;re(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=vi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(es(a,u,!0),null!==t&&(Se(i,t,u),null!==a.classes&&Kr(i,t,a.classes),null!==a.styles&&$r(i,t,a.styles)));const c=r.createRenderer(t,e),l=yi(n,Ci(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Me(De(a,n),o,e.type),Pi(o,a),Fi(a,n.length,1)),Hi(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)Se(a,c,["ng-version",Vo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ei(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Se(a,c,t),e&&e.length>0&&Kr(a,c,e.join(" "))}if(m=Rt(f,ut),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Mi(t,r,e,bi(t,e,1,null),n));const i=He(e,t,r.directiveStart,r);dr(i,e);const s=Nt(r,e);return s&&dr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Gt();e.contentQueries(1,o,t.directiveStart)}const a=Gt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(le(a.index),Oi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Di(e,o)),o}(t,this.componentDef,d,h,[vs]),_i(f,d,null)}finally{ue()}return new ka(this.componentType,p,Oo(m,d),d,m)}}class ka extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ia(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Na=new Map;class Ra extends ma{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ia(this);const n=at(t),r=t[$]||null;r&&bo(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=cs(t,e,[{provide:ma,useValue:this},{provide:No,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ys.THROW_IF_NOT_FOUND,n=k.Default){return t===ys||t===ma||t===ns?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oa extends ga{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Na.get(i),n),Na.set(i,n));const s=_r(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ra(this.moduleType,t)}}function Da(t){return e=>{setTimeout(t,void 0,e)}}const Pa=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Da(u),a&&(a=Da(a)),c&&(c=Da(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function La(){return this._results[Is()]()}class Fa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Is(),n=Fa.prototype;n[e]||(n[e]=La)}get changes(){return this._changes||(this._changes=new Pa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=rn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ma{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ma(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ua{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ua(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ya(t,e).matches&&this.queries[e].setDirty()}}class ja{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class qa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new qa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Va{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Va(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ba(e,i)),this.matchTNodeWithReadOption(t,e,ze(e,t,i,!1,!1))}else n===ha?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Po||r===va||r===ha&&4&e.type)this.addMatch(e.index,-2);else{const n=ze(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ba(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ga(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Oo(t,e):4&t.type?pa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Po?Oo(e,t):n===ha?pa(e,t):n===va?Ea(e,t):void 0}(t,e,r):He(t,t[1],n,e)}function za(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Ga(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ha(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=za(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ct;t<o.length;t++){const e=o[t];e[17]===e[3]&&Ha(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Ha(n[1],n,i,r)}}}}}return r}function Za(t){const e=qt(),n=Vt(),r=Xt();te(r+1);const i=Ya(n,r);if(t.dirty&&Dt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Ha(n,e,r,[]):za(n,e,i,r);t.reset(s,Lo),t.notifyOnChanges()}return!0}return!1}function $a(t,e,n){const r=Vt();r.firstCreatePass&&(Ja(r,new ja(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Wa(r,qt(),e)}function Ka(t,e,n,r){const i=Vt();if(i.firstCreatePass){const s=Gt();Ja(i,new ja(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Wa(i,qt(),n)}function Qa(){return t=qt(),e=Xt(),t[19].queries[e].queryList;var t,e}function Wa(t,e,n){const r=new Fa(4==(4&n));Ai(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ua),e[19].queries.push(new Ma(r))}function Ja(t,e,n){null===t.queries&&(t.queries=new qa),t.queries.track(new Va(e,n))}function Ya(t,e){return t.queries.getByIndex(e)}const Xa=new tn("Application Initializer");let tu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ro,this.reject=Ro,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(qs(e))t.push(e);else if(Bs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(bn(Xa,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const eu=new tn("AppId"),nu={provide:eu,useFactory:function(){return`${ru()}${ru()}${ru()}`},deps:[]};function ru(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iu=new tn("Platform Initializer"),su=new tn("Platform ID"),ou=new tn("appBootstrapListener");let au=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const uu=new tn("LocaleId"),cu=new tn("DefaultCurrencyCode");class lu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const hu=function(t){return new Oa(t)},fu=hu,du=function(t){return Promise.resolve(hu(t))},pu=function(t){const e=hu(t),n=_r(at(t).declarations).reduce((t,e)=>{const n=ot(e);return n&&t.push(new Aa(n)),t},[]);return new lu(e,n)},mu=pu,gu=function(t){return Promise.resolve(pu(t))};let yu=(()=>{class t{constructor(){this.compileModuleSync=fu,this.compileModuleAsync=du,this.compileModuleAndAllComponentsSync=mu,this.compileModuleAndAllComponentsAsync=gu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const vu=(()=>Promise.resolve(0))();function bu(t){"undefined"==typeof Zone?vu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class _u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pa(!1),this.onMicrotaskEmpty=new Pa(!1),this.onStable=new Pa(!1),this.onError=new Pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Eu(t),t.isCheckStableRunning=!0,Su(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Eu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Tu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Iu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Tu(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Iu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Eu(t),Su(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,wu,Ro,Ro);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const wu={};function Su(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Eu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Tu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Iu(t){t._nesting--,Su(t)}class Cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa,this.onMicrotaskEmpty=new Pa,this.onStable=new Pa,this.onError=new Pa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let xu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_u.assertNotInAngularZone(),bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(bn(_u))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Au=(()=>{class t{constructor(){this._applications=new Map,Ou.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ou.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class ku{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Nu(t){Ou=t}let Ru,Ou=new ku,Du=!0,Pu=!1;function Lu(){return Pu=!0,Du}function Fu(){if(Pu)throw new Error("Cannot enable prod mode after platform setup.");Du=!1}const Mu=new tn("AllowMultipleToken");class Uu{constructor(t,e){this.name=t,this.token=e}}function ju(t,e,n=[]){const r=`Platform: ${e}`,i=new tn(r);return(e=[])=>{let s=qu();if(!s||s.injector.get(Mu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:is,useValue:"platform"});!function(t){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Mu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ru=t.get(Vu);const e=t.get(iu,null);e&&e.forEach(t=>t())}(ys.create({providers:t,name:r}))}return function(t){const e=qu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function qu(){return Ru&&!Ru.destroyed?Ru:null}let Vu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Cu:("zone.js"===t?void 0:t)||new _u({enableLongStackTrace:Lu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:_u,useValue:n}];return n.run(()=>{const e=ys.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(vr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{zu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return qs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(tu);return t.runInitializers(),t.donePromise.then(()=>(bo(i.injector.get(uu,yo)||yo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Bu({},e);return function(t,e,n){const r=new Oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(bn(ys))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Bu(t,e){return Array.isArray(e)?e.reduce(Bu,t):Object.assign(Object.assign({},t),e)}let Gu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{_u.assertNotInAngularZone(),bu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{_u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ao?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ma),i=n.create(ys.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(xu,null),a=o&&i.injector.get(Au);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),zu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;zu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ou,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(bn(_u),bn(ys),bn(vr),bn(No),bn(tu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function zu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Hu{}class Zu{}const $u={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ku=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||$u}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Qu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Qu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(bn(yu),bn(Zu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Qu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Wu=function(t){return null},Ju=ju(null,"core",[{provide:su,useValue:"unknown"},{provide:Vu,deps:[ys]},{provide:Au,deps:[]},{provide:au,deps:[]}]),Yu=[{provide:Gu,useClass:Gu,deps:[_u,ys,vr,No,tu]},{provide:xa,deps:[_u],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:tu,useClass:tu,deps:[[new Tn,Xa]]},{provide:yu,useClass:yu,deps:[]},nu,{provide:Xo,useFactory:function(){return ua},deps:[]},{provide:ea,useFactory:function(){return ca},deps:[]},{provide:uu,useFactory:function(t){return bo(t=t||"undefined"!=typeof $localize&&$localize.locale||yo),t},deps:[[new En(uu),new Tn,new In]]},{provide:cu,useValue:"USD"}];let Xu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(bn(Gu))},t.\u0275mod=et({type:t}),t.\u0275inj=w({providers:Yu}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>C,xv:()=>b,Dh:()=>v,HU:()=>d,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>g,yq:()=>S});var r=n(8489),i=n(8569),s=n(6599),o=n(4187),a=n(9971),u=n(5366),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(m.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),_=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&E("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const S=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,b]]};let C=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[I]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,s=n(4762),o=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.27",void 0),t.registerVersion("fire-js","")}(_);const w=_},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(250),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,o),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,r3:()=>S,Sg:()=>u,ne:()=>E,p$:()=>s,ZB:()=>o,m9:()=>C,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>m,w1:()=>g,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,b.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?_(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new v(i,a,r);return u},t}();function _(t,e){return t.replace(w,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var w=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}function C(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.6.8";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},1225:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8318);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(3982),i=n(3392);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9971:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),s=n(878),o=n(1225);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2875),i=n(1564),s=n(5959);function o(){return new s.xQ}function a(){return t=>{return(0,i.x)()((e=o,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>g});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class f extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n(8470);class m extends r.y{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new m(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(6673);function i(){}var s=n(5024);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(8318),i=n(7570);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(8277);const i=new(n(1098).v)(r.o),s=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},4816:(t,e,n)=>{"use strict";var r=n(5366);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(g),r.LFG(a))},t.normalizeQueryParams=m,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new w((0,r.LFG)(g),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.kL8;class C{}let x=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function A(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let O=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:C,useClass:x}]}),t})();function P(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new F((0,r.LFG)(o),window)}),t})();class F{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Db){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Db){return!1}}}function M(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U{}class j extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new j,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(V=V||document.querySelector("base"),V?V.getAttribute("href"):null);return null==e?null:function(t){q=q||document.createElement("a"),q.setAttribute("href",t);const e=q.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){V=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return A(document.cookie,t)}}let q,V=null;const B=new r.OlP("TRANSITION_ID"),G=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,o,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let H=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Z=new r.OlP("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class K{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),W=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(J),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(J))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function J(t){s().remove(t)}const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($),r.LFG(W),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class st extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends K{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends K{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(pt)},token:t,providedIn:"root"}),t})();function dt(t){return new pt(t.get(o))}let pt=(()=>{class t extends ft{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:function(){return dt((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const mt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){j.makeCurrent(),z.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),gt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Z,useClass:ot,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:Z,useClass:ht,multi:!0,deps:[o]},[],{provide:nt,useClass:nt,deps:[$,W,r.AFp]},{provide:r.FYo,useExisting:nt},{provide:Q,useExisting:W},{provide:W,useClass:W,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:$,useClass:$,deps:[Z,r.R0b]},{provide:U,useClass:H,deps:[]},[]];let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:B,useExisting:r.AFp},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:gt,imports:[D,r.hGG]}),t})();"undefined"!=typeof window&&window;var vt=n(9764),bt=n(8318),_t=n(8470),wt=n(9996),St=n(2056);function Et(t,e){return new bt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,vt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),It=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Tt]]}),t})(),Ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[It]}),t})();var xt=n(878),At=n(3982);function kt(t,e){return(0,At.zg)(t,e,1)}var Nt=n(6673);function Rt(t,e){return function(n){return n.lift(new Ot(t,e))}}class Ot{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Dt(t,this.predicate,this.thisArg))}}class Dt extends Nt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Pt{}class Lt{}class Ft{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ft?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ft;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ft?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Mt{encodeKey(t){return Ut(t)}encodeValue(t){return Ut(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ut(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function jt(t){return`${t}`}class qt{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Mt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new qt({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(jt(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(jt(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Vt{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Bt(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Gt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function zt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ht{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Ft),this.context||(this.context=new Vt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new qt,this.urlWithParams=e}serializeBody(){return null===this.body?null:Bt(this.body)||Gt(this.body)||zt(this.body)||"string"==typeof this.body?this.body:this.body instanceof qt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zt(this.body)?null:Gt(this.body)?this.body.type||null:Bt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Ht(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var Zt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class $t{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ft,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Kt extends $t{constructor(t={}){super(t),this.type=Zt.ResponseHeader}clone(t={}){return new Kt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Qt extends $t{constructor(t={}){super(t),this.type=Zt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Qt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Wt extends $t{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Jt(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Yt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Ht)r=t;else{let i,s;i=n.headers instanceof Ft?n.headers:new Ft(n.headers),n.params&&(s=n.params instanceof qt?n.params:new qt({fromObject:n.params})),r=new Ht(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,xt.of)(r).pipe(kt(t=>this.handler.handle(t)));if(t instanceof Ht||"events"===n.observe)return i;const s=i.pipe(Rt(t=>t instanceof Qt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,wt.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe((0,wt.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe((0,wt.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe((0,wt.U)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new qt).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Jt(n,e))}post(t,e,n={}){return this.request("POST",t,Jt(n,e))}put(t,e,n={}){return this.request("PUT",t,Jt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Pt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Xt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const te=new r.OlP("HTTP_INTERCEPTORS");let ee=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ne=/^\)\]\}',?\n/;let re=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bt.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Ft(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Kt({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(ne,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Qt({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new Wt({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new Wt({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:Zt.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Zt.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Zt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(U))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ie=new r.OlP("XSRF_COOKIE_NAME"),se=new r.OlP("XSRF_HEADER_NAME");class oe{}let ae=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=A(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.Lbi),r.LFG(ie))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ue=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(oe),r.LFG(se))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ce=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(te,[]);this.chain=t.reduceRight((t,e)=>new Xt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Lt),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),le=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:ue,useClass:ee}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:ie,useValue:e.cookieName}:[],e.headerName?{provide:se,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[ue,{provide:te,useExisting:ue,multi:!0},{provide:oe,useClass:ae},{provide:ie,useValue:"XSRF-TOKEN"},{provide:se,useValue:"X-XSRF-TOKEN"}]}),t})(),he=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Yt,{provide:Pt,useClass:ce},re,{provide:Lt,useExisting:re}],imports:[[le.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var fe=n(5959),de=n(3895);class pe extends fe.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new de.N;return this._value}next(t){super.next(this._value=t)}}const me=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ge=n(653);function ye(t){return e=>0===t?(0,ge.c)():e.lift(new ve(t))}class ve{constructor(t){if(this.total=t,this.total<0)throw new me}call(t,e){return e.subscribe(new be(t,this.total))}}class be extends Nt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}class _e{constructor(t){this.total=t}call(t,e){return e.subscribe(new we(t,this.total))}}class we extends Nt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function Se(t,e){return n=>n.lift(new Ee(t,e))}class Ee{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Te(t,this.compare,this.keySelector))}}class Te extends Nt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ie=n(6882);class Ce{constructor(t){this.notifier=t}call(t,e){const n=new xe(t),r=(0,Ie.ft)(this.notifier,new Ie.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class xe extends Ie.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Ae(t){return null!=t&&"false"!=`${t}`}function ke(t){return t instanceof r.SBq?t.nativeElement:t}let Ne;try{Ne="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Db){Ne=!1}let Re,Oe,De=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ne)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})(),Pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Le(t){return function(){if(null==Re&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Re=!0}))}finally{Re=Re||!1}return Re}()?t:!!t.capture}var Fe=n(8569);function Me(t){return 0===t.buttons}function Ue(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const je=new r.OlP("cdk-input-modality-detector-options"),qe={ignoreKeys:[18,17,224,91,16]},Ve=Le({passive:!0,capture:!0});let Be=(()=>{class t{constructor(t,e,n,r){this._platform=t,this._mostRecentTarget=null,this._modality=new pe(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ge(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Me(t)?"keyboard":"mouse"),this._mostRecentTarget=Ge(t))},this._onTouchstart=t=>{Ue(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ge(t))},this._options=Object.assign(Object.assign({},qe),r),this.modalityDetected=this._modality.pipe(t=>t.lift(new _e(1))),this.modalityChanged=this.modalityDetected.pipe(Se()),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,Ve),n.addEventListener("mousedown",this._onMousedown,Ve),n.addEventListener("touchstart",this._onTouchstart,Ve)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ve),document.removeEventListener("mousedown",this._onMousedown,Ve),document.removeEventListener("touchstart",this._onTouchstart,Ve))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(De),r.LFG(r.R0b),r.LFG(o),r.LFG(je,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(De),r.LFG(r.R0b),r.LFG(o),r.LFG(je,8))},token:t,providedIn:"root"}),t})();function Ge(t){return t.composedPath?t.composedPath()[0]:t.target}const ze=new r.OlP("cdk-focus-monitor-default-options"),He=Le({passive:!0,capture:!0});let Ze=(()=>{class t{constructor(t,e,n,r,i){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new fe.xQ,this._rootNodeFocusAndBlurListener=t=>{const e=Ge(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){const n=ke(t);if(!this._platform.isBrowser||1!==n.nodeType)return(0,xt.of)(null);const r=function(t){if(function(){if(null==Oe){const t="undefined"!=typeof document?document.head:null;Oe=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Oe}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const s={checkChildren:e,subject:new fe.xQ,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=ke(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=ke(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),r=Ge(t);n&&(n.checkChildren||e===r)&&this._originChanged(e,this._getFocusOrigin(r),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;var r;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,He),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,He)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((r=this._stopInputModalityDetector,t=>t.lift(new Ce(r)))).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,He),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,He),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(De),r.LFG(Be),r.LFG(o,8),r.LFG(ze,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(De),r.LFG(Be),r.LFG(o,8),r.LFG(ze,8))},token:t,providedIn:"root"}),t})();const $e="cdk-high-contrast-black-on-white",Ke="cdk-high-contrast-white-on-black",Qe="cdk-high-contrast-active";let We=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Qe),t.remove($e),t.remove(Ke),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(Qe),t.add($e)):2===e&&(t.add(Qe),t.add(Ke))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(De),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(De),r.LFG(o))},token:t,providedIn:"root"}),t})(),Je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Ye=new r.GfV("12.1.1");class Xe{}const tn="*";function en(t,e=null){return{type:2,steps:t,options:e}}function nn(t){return{type:6,styles:t,offset:null}}function rn(t){Promise.resolve(null).then(t)}class sn{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){rn(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class on{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?rn(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function an(){return"undefined"!=typeof window&&void 0!==window.document}function un(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function cn(t){switch(t.length){case 0:return new sn;case 1:return t[0];default:return new on(t)}}function ln(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case tn:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function hn(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&fn(n,"start",t)));break;case"done":t.onDone(()=>r(n&&fn(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&fn(n,"destroy",t)))}}function fn(t,e,n){const r=n.totalTime,i=dn(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function dn(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function pn(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function mn(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let gn=(t,e)=>!1,yn=(t,e)=>!1,vn=(t,e,n)=>[];const bn=un();(bn||"undefined"!=typeof Element)&&(gn=an()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),yn=(()=>{if(bn||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):yn}})(),vn=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let _n=null,wn=!1;function Sn(t){_n||(_n=("undefined"!=typeof document?document.body:null)||{},wn=!!_n.style&&"WebkitAppearance"in _n.style);let e=!0;return _n.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in _n.style,!e&&wn)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in _n.style),e}const En=yn,Tn=gn,In=vn;function Cn(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let xn=(()=>{class t{validateStyleProperty(t){return Sn(t)}matchesElement(t,e){return En(t,e)}containsElement(t,e){return Tn(t,e)}query(t,e,n){return In(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new sn(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),An=(()=>{class t{}return t.NOOP=new xn,t})();const kn="ng-enter",Nn="ng-leave",Rn="ng-trigger",On=".ng-trigger",Dn="ng-animating",Pn=".ng-animating";function Ln(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Fn(parseFloat(e[1]),e[2])}function Fn(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Mn(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Fn(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Fn(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Un(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function jn(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Un(t,n);return n}function qn(t,e,n){return n?e+":"+n+";":""}function Vn(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=qn(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=qn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Bn(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Wn(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),un()&&Vn(t))}function Gn(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Wn(e);t.style[n]=""}),un()&&Vn(t))}function zn(t){return Array.isArray(t)?1==t.length?t[0]:en(t):t}const Hn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Zn(t){let e=[];if("string"==typeof t){let n;for(;n=Hn.exec(t);)e.push(n[1]);Hn.lastIndex=0}return e}function $n(t,e,n){const r=t.toString(),i=r.replace(Hn,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Kn(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Qn=/-+([a-z0-9])/g;function Wn(t){return t.replace(Qn,(...t)=>t[1].toUpperCase())}function Jn(t,e){return 0===t||0===e}function Yn(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=tr(t,e)})}}return e}function Xn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function tr(t,e){return window.getComputedStyle(t)[e]}const er="*";function nr(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(sr(i,o)),"<"!=s[0]||i==er&&o==er||e.push(sr(o,i))}(t,n,e)):n.push(t),n}const rr=new Set(["true","1"]),ir=new Set(["false","0"]);function sr(t,e){const n=rr.has(t)||ir.has(t),r=rr.has(e)||ir.has(e);return(i,s)=>{let o=t==er||t==i,a=e==er||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?rr.has(t):ir.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?rr.has(e):ir.has(e)),o&&a}}const or=new RegExp("s*:selfs*,?","g");function ar(t,e,n){return new ur(t).build(e,n)}class ur{constructor(t){this._driver=t}build(t,e){const n=new cr(e);return this._resetContextStyleTimingState(n),Xn(this,zn(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(lr(t)){const e=t;Object.keys(e).forEach(t=>{Zn(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Kn(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Xn(this,zn(t.animation),e);return{type:1,matchers:nr(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:hr(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Xn(this,t,e)),options:hr(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Xn(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:hr(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return fr(Mn(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=fr(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Mn(r,e),fr(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:nn({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=nn(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==tn?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(lr(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Zn(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(lr(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(lr(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Xn(this,zn(t.animation),e),options:hr(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:hr(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:hr(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(or,"")),[t=t.replace(/@\*/g,On).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Pn),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,pn(e.collectedStyles,e.currentQuerySelector,{});const o=Xn(this,zn(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:hr(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Mn(t.timings,e.errors,!0);return{type:12,animation:Xn(this,zn(t.animation),e),timings:n,options:null}}}class cr{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function lr(t){return!Array.isArray(t)&&"object"==typeof t}function hr(t){var e;return t?(t=Un(t)).params&&(t.params=(e=t.params)?Un(e):null):t={},t}function fr(t,e,n){return{duration:t,delay:e,easing:n}}function dr(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class pr{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const mr=new RegExp(":enter","g"),gr=new RegExp(":leave","g");function yr(t,e,n,r,i,s={},o={},a,u,c=[]){return(new vr).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class vr{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new pr;const l=new _r(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),Xn(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[dr(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Ln(n.duration):null,s=null!=n.delay?Ln(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Xn(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=br);const t=Ln(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Xn(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Ln(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Xn(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Mn(e.params?$n(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Ln(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=br);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),Xn(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Xn(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const br={};class _r{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=br,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new wr(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ln(n.duration)),null!=n.delay&&(r.delay=Ln(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=$n(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new _r(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=br,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Sr(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(mr,"."+this._enterClassName)).replace(gr,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class wr{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new wr(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||tn,this._currentKeyframe[t]=tn}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=tn})):jn(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=$n(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:tn),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=jn(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==tn&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Kn(t.values()):[],s=e.size?Kn(e.values()):[];if(n){const t=r[0],e=Un(t);t.offset=0,e.offset=1,r=[t,e]}return dr(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Sr extends wr{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=jn(t[0],!1);a.offset=0,i.push(a);const u=jn(t[0],!1);u.offset=Er(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=jn(t[r],!1);o.offset=Er((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return dr(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Er(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Tr{}class Ir extends Tr{normalizePropertyName(t,e){return Wn(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Cr[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Cr=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xr(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const Ar={};class kr{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Ar,f=this.buildStyles(n,o&&o.params||Ar,l),d=a&&a.params||Ar,p=this.buildStyles(r,d,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:yr(t,e,this.ast.animation,i,s,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return xr(e,this._triggerName,n,r,v,f,p,[],[],g,y,w,l);_.forEach(t=>{const n=t.element,r=pn(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=pn(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=Kn(m.values());return xr(e,this._triggerName,n,r,v,f,p,_,S,g,y,w)}}class Nr{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Un(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=$n(s,r,e)),n[t]=s})}}),n}}class Rr{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Nr(t.style,t.options&&t.options.params||{})}),Or(this.states,"true","1"),Or(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new kr(t,e,this.states))}),this.fallbackTransition=new kr(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Or(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Dr=new pr;class Pr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=ar(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=ln(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=yr(this._driver,e,i,kn,Nn,{},{},n,Dr,r),s.forEach(t=>{const e=pn(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,tn)})});const a=cn(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=dn(e,"","","");return hn(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Lr="ng-animate-queued",Fr="ng-animate-disabled",Mr=".ng-animate-disabled",Ur=[],jr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Vr{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Un(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Br="void",Gr=new Vr(Br);class zr{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Jr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=pn(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=pn(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Jr(t,Rn),Jr(t,"ng-trigger-"+e),a[e]=Gr),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Zr(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Jr(t,Rn),Jr(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Vr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Gr),u.value!==Br&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Gn(t,n),Bn(t,r)})}return}const c=pn(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Jr(t,Lr),s.onStart(()=>{Yr(t,Lr)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,On,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Br,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&cn(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Gr,a=new Vr(Br),u=new Zr(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==jr||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Jr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=dn(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,hn(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Hr{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new zr(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if($r(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!$r(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Jr(t,Fr)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yr(t,Fr))}removeNode(t,e,n,r){if($r(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return $r(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,On,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Pn,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return cn(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=jr,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Mr)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Mr,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Jr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?cn(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new pr,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Wr(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=kn+p++;d.set(e,n),t.forEach(t=>Jr(t,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=Wr(h,Array.from(g));b.forEach((t,e)=>{const n=Nn+p++;v.set(e,n),t.forEach(t=>Jr(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>Yr(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Yr(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Gn(i,p.fromStyles)),e.onDestroy(()=>Bn(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Gn(i,p.fromStyles)),e.onDestroy(()=>Bn(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>pn(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{pn(S,e,[]).push(t),t.destroy()})});const T=m.filter(t=>ei(t,a,u)),I=new Map;Qr(I,this.driver,y,u,tn).forEach(t=>{ei(t,a,u)&&T.push(t)});const C=new Map;f.forEach((t,e)=>{Qr(C,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=I.get(t),n=C.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const x=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Bn(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,C,I);if(s.setRealPlayer(n),t===k)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=cn(e)),r.push(s)}}else Gn(e,o.fromStyles),s.onDestroy(()=>Bn(e,o.toStyles)),A.push(s),c.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=cn(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<m.length;N++){const t=m[N],e=t.__ng_removed;if(Yr(t,Nn),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Pn,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Xr(this,t,r):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Br;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=pn(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Gn(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new sn(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return ti(t,e),e}((n.get(h)||Ur).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=ln(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new Zr(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{pn(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Jr(t,Dn));const f=cn(h);return f.onDestroy(()=>{c.forEach(t=>Yr(t,Dn)),Bn(a,e.toStyles)}),l.forEach(t=>{pn(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new sn(t.duration,t.delay)}}class Zr{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new sn,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>hn(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){pn(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $r(t){return t&&1===t.nodeType}function Kr(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Qr(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Kr(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=qr,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Kr(t,s[a++])),o}function Wr(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Jr(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yr(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Xr(t,e,n){cn(n).onDone(()=>t.processLeaveNode(e))}function ti(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof on?ti(r.players,e):e.push(r)}}function ei(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class ni{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Hr(t,e,n),this._timelineEngine=new Pr(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=ar(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new Rr(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=mn(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=mn(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ri(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=si(e[0]),e.length>1&&(r=si(e[e.length-1]))):e&&(n=si(e)),n||r?new ii(t,n,r):null}let ii=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Bn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bn(this._element,this._initialStyles),this._endStyles&&(Bn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Gn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gn(this._element,this._endStyles),this._endStyles=null),Bn(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function si(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];oi(i)&&(e=e||{},e[i]=t[i])}return e}function oi(t){return"display"===t||"position"===t}const ai="animation",ui="animationend";class ci{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=mi(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),pi(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),di(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){li(this._element,this._name,"paused")}resume(){li(this._element,this._name,"running")}setPosition(t){const e=hi(this._element,this._name);this._position=t*this._duration,pi(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),di(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=mi(t,"").split(","),r=fi(n,e);r>=0&&(n.splice(r,1),pi(t,"",n.join(",")))}(this._element,this._name))}}function li(t,e,n){pi(t,"PlayState",n,hi(t,e))}function hi(t,e){const n=mi(t,"");return n.indexOf(",")>0?fi(n.split(","),e):fi([n],e)}function fi(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function di(t,e,n){n?t.removeEventListener(ui,e):t.addEventListener(ui,e)}function pi(t,e,n,r){const i=ai+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function mi(t,e){return t.style[ai+e]||""}class gi{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ci(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:tr(this.element,n))})}this.currentSnapshot=t}}class yi extends sn{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Cn(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class vi{constructor(){this._count=0}validateStyleProperty(t){return Sn(t)}matchesElement(t,e){return En(t,e)}containsElement(t,e){return Tn(t,e)}query(t,e,n){return In(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Cn(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof gi),u={};Jn(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Yn(t,e,u));if(0==n)return new yi(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=ri(t,e),d=new gi(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class bi{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:tr(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class _i{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(wi().toString()),this._cssKeyframesDriver=new vi}validateStyleProperty(t){return Sn(t)}matchesElement(t,e){return En(t,e)}containsElement(t,e){return Tn(t,e)}query(t,e,n){return In(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof bi);Jn(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=ri(t,e=Yn(t,e=e.map(t=>jn(t,!1)),u));return new bi(t,e,a,l)}}function wi(){return an()&&Element.prototype.animate||{}}let Si=(()=>{class t extends Xe{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?en(t):t;return Ii(this._renderer,null,e,"register",[n]),new Ei(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Ei extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Ti(this._id,t,e||{},this._renderer)}}class Ti{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Ii(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Ii(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Ci="@",xi="@.disabled";let Ai=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new ki("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Ni(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(ni),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ki{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ci&&e==xi?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Ni extends ki{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ci?"."==e.charAt(1)&&e==xi?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Ci){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=Ci&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ri=(()=>{class t extends ni{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(An),r.LFG(Tr))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Oi=new r.OlP("AnimationModuleType"),Di=[{provide:Xe,useClass:Si},{provide:Tr,useFactory:function(){return new Ir}},{provide:ni,useClass:Ri},{provide:r.FYo,useFactory:function(t,e,n){return new Ai(t,e,n)},deps:[nt,ni,r.R0b]}],Pi=[{provide:An,useFactory:function(){return"function"==typeof wi()?new _i:new vi}},{provide:Oi,useValue:"BrowserAnimations"},...Di],Li=[{provide:An,useClass:xn},{provide:Oi,useValue:"NoopAnimations"},...Di];let Fi=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Li:Pi}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Pi,imports:[yt]}),t})();const Mi=new r.GfV("12.1.1"),Ui=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ji,qi=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Mi.full!==Ye.full&&console.warn("The Angular Material version ("+Mi.full+") does not match the Angular CDK version ("+Ye.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(We),r.LFG(Ui,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Je],Je]}),t})();function Vi(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ae(t)}}}function Bi(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function Gi(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ae(t)}}}try{ji="undefined"!=typeof Intl}catch(Db){ji=!1}class zi{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Hi={enterDuration:450,exitDuration:400},Zi=Le({passive:!0}),$i=["mousedown","touchstart"],Ki=["mouseup","mouseleave","touchend","touchcancel"];class Qi{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ke(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Hi),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new zi(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Hi),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ke(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents($i))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ki),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Me(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ue(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,Zi)})})}_removeTriggerEvents(){this._triggerElement&&($i.forEach(t=>{this._triggerElement.removeEventListener(t,this,Zi)}),this._pointerUpEventsRegistered&&Ki.forEach(t=>{this._triggerElement.removeEventListener(t,this,Zi)}))}}const Wi=new r.OlP("mat-ripple-global-options");let Ji=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Qi(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(De),r.Y36(Wi,8),r.Y36(Oi,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Yi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[qi,Pe],qi]}),t})();const Xi=["mat-button",""],ts=["*"],es=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ns=Bi(Vi(Gi(class{constructor(t){this._elementRef=t}})));let rs=(()=>{class t extends ns{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of es)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(Ze),r.Y36(Oi,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&r.Gf(Ji,5),2&t){let t;r.iGM(t=r.CRH())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(r.uIk("disabled",e.disabled||null),r.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.qOj],attrs:Xi,ngContentSelectors:ts,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"span",0),r.Hsn(1),r.qZA(),r._UZ(2,"span",1),r._UZ(3,"span",2)),2&t&&(r.xp6(2),r.ekj("mat-button-ripple-round",e.isRoundButton||e.isIconButton),r.Q6J("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Ji],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),is=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Yi,qi],qi]}),t})();var ss=n(1225),os=n(7570),as=n(6599);function us(t){return function(e){const n=new cs(t),r=e.lift(n);return n.caught=r}}class cs{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ls(t,this.selector,this.caught))}}class ls extends Ie.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ie.IY(this);this.add(r);const i=(0,Ie.ft)(n,r);i!==r&&this.add(i)}}}function hs(t){return e=>e.lift(new fs(t))}class fs{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ds(t,this.callback))}}class ds extends Nt.L{constructor(t,e){super(t),this.add(new os.w(e))}}var ps=n(1055);const ms=["*"];function gs(t){return Error(`Unable to find icon with the name "${t}"`)}function ys(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function vs(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class bs{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let _s=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new bs(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const s=this._sanitizer.sanitize(r.q3G.HTML,n);if(!s)throw vs(n);return this._addSvgIconConfig(t,e,new bs("",s,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new bs(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(r.q3G.HTML,e);if(!i)throw vs(e);return this._addSvgIconSetConfig(t,new bs("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t);if(!e)throw ys(t);const n=this._cachedIconsByUrl.get(e);return n?(0,xt.of)(ws(n)):this._loadSvgIconFromConfig(new bs(t,null)).pipe((0,as.b)(t=>this._cachedIconsByUrl.set(e,t)),(0,wt.U)(t=>ws(t)))}getNamedSvgIcon(t,e=""){const n=Ss(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):(0,ss._)(gs(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,xt.of)(ws(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,wt.U)(t=>ws(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?(0,xt.of)(n):function(...t){if(1===t.length){const e=t[0];if((0,_t.k)(e))return Et(e,null);if((0,St.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Et(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Et(t=1===t.length&&(0,_t.k)(t[0])?t[0]:t,null).pipe((0,wt.U)(t=>e(...t)))}return Et(t,null)}(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(us(e=>{const n=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),(0,xt.of)(null)})))).pipe((0,wt.U)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw gs(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,as.b)(e=>t.svgText=e),(0,wt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,xt.of)(null):this._fetchIcon(t).pipe((0,as.b)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(i),this._setSvgAttributes(s,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,s=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,n);if(!o)throw ys(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const u=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(hs(()=>this._inProgressUrlFetches.delete(o)),(0,ps.B)());return this._inProgressUrlFetches.set(o,u),u}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(Ss(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new bs(i.url,null,i.options):new bs(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yt,8),r.LFG(ft),r.LFG(o,8),r.LFG(r.qLn))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Yt,8),r.LFG(ft),r.LFG(o,8),r.LFG(r.qLn))},token:t,providedIn:"root"}),t})();function ws(t){return t.cloneNode(!0)}function Ss(t,e){return t+":"+e}const Es=Bi(class{constructor(t){this._elementRef=t}}),Ts=new r.OlP("mat-icon-location",{providedIn:"root",factory:function(){const t=(0,r.f3M)(o),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Is=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Cs=Is.map(t=>`[${t}]`).join(", "),xs=/^url\(['"]?#(.*?)['"]?\)$/;let As=(()=>{class t extends Es{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=os.w.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Ae(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(Cs),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)Is.forEach(t=>{const i=e[r],s=i.getAttribute(t),o=s?s.match(xs):null;if(o){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:o[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(ye(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(_s),r.$8M("aria-hidden"),r.Y36(Ts),r.Y36(r.qLn))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),r.ekj("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.qOj],ngContentSelectors:ms,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),ks=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[qi],qi]}),t})();var Ns=n(5024);function Rs(t,e,n,r){return(0,Ns.m)(n)&&(r=n,n=void 0),r?Rs(t,e,n).pipe((0,wt.U)(t=>(0,_t.k)(t)?r(...t):r(t))):new bt.y(r=>{Os(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Os(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)Os(t[s],e,n,r,i)}r.add(s)}const Ds=["primaryValueBar"],Ps=Bi(class{constructor(t){this._elementRef=t}},"primary"),Ls=new r.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=(0,r.f3M)(o),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let Fs=0,Ms=(()=>{class t extends Ps{constructor(t,e,n,i){super(t),this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new r.vpe,this._animationEndSubscription=os.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+Fs++;const s=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${s}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=Us(function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=Us(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=Rs(t,"transitionend").pipe(Rt(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(Oi,8),r.Y36(Ls,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&r.Gf(Ds,5),2&t){let t;r.iGM(t=r.CRH())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(r.uIk("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),r.ekj("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[r.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.O4$(),r.TgZ(1,"svg",1),r.TgZ(2,"defs"),r.TgZ(3,"pattern",2),r._UZ(4,"circle",3),r.qZA(),r.qZA(),r._UZ(5,"rect",4),r.qZA(),r.kcU(),r._UZ(6,"div",5),r._UZ(7,"div",6,7),r._UZ(9,"div",8),r.qZA()),2&t&&(r.xp6(3),r.Q6J("id",e.progressbarId),r.xp6(2),r.uIk("fill",e._rectangleFillValue),r.xp6(1),r.Q6J("ngStyle",e._bufferTransform()),r.xp6(1),r.Q6J("ngStyle",e._primaryTransform()))},directives:[O],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function Us(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let js=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[D,qi],qi]}),t})();var qs=n(2346),Vs=n(1906),Bs=n(9971);function Gs(t,e){return"function"==typeof e?n=>n.pipe(Gs((n,r)=>(0,vt.D)(t(n,r)).pipe((0,wt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new zs(t))}class zs{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hs(t,this.project))}}class Hs extends Ie.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ie.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ie.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Zs=n(8489),$s=n(9291);class Ks extends fe.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Qs(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new de.N;if(this.isStopped||this.hasError?s=os.w.EMPTY:(this.observers.push(t),s=new $s.W(this,t)),r&&t.add(t=new Bs.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||Zs.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class Qs{constructor(t,e){this.time=t,this.value=e}}function Ws(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new Ks(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}const Js=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Ys(t=null){return e=>e.lift(new Xs(t))}class Xs{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new to(t,this.defaultValue))}}class to extends Nt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function eo(t=io){return e=>e.lift(new no(t))}class no{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ro(t,this.errorFactory))}}class ro extends Nt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(K_){t=K_}this.destination.error(t)}}}function io(){return new Js}var so=n(3392);function oo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rt((e,n)=>t(e,n,r)):so.y,ye(1),n?Ys(e):eo(()=>new Js))}function ao(t,e){return e?Gs(()=>t,e):Gs(()=>t)}var uo=n(4187);const co=new r.OlP("angularfire2.auth.use-emulator"),lo=new r.OlP("angularfire2.auth.settings"),ho=new r.OlP("angularfire2.auth.tenant-id"),fo=new r.OlP("angularfire2.auth.langugage-code"),po=new r.OlP("angularfire2.auth.use-device-language"),mo=new r.OlP("angularfire.auth.persistence");let go=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new qs.HU(i),f=(0,qs.ss)(h),d=new fe.xQ,p=(0,xt.of)(void 0).pipe((0,Bs.QV)(h.outsideAngular),Gs(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,wt.U)(()=>(0,qs.on)(t,i,e)),(0,wt.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,qs.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Ws({bufferSize:1,refCount:!1}));if(P(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xt.of)(null);else{p.pipe(oo()).subscribe();const t=p.pipe(Gs(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Ws({bufferSize:1,refCount:!1})),e=t=>new bt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Gs(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Gs(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(ao(n),(0,uo.R)(h.outsideAngular),(0,Bs.QV)(h.insideAngular)),this.user=t.pipe(ao(r),(0,uo.R)(h.outsideAngular),(0,Bs.QV)(h.insideAngular)),this.idToken=this.user.pipe(Gs(t=>t?(0,vt.D)(t.getIdToken()):(0,xt.of)(null))),this.idTokenResult=this.user.pipe(Gs(t=>t?(0,vt.D)(t.getIdTokenResult()):(0,xt.of)(null))),this.credential=(0,Vs.T)(t,d,this.authState.pipe(Rt(t=>!t))).pipe((0,wt.U)(t=>(null==t?void 0:t.user)?t:null),(0,uo.R)(h.outsideAngular),(0,Bs.QV)(h.insideAngular))}return(0,qs.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qs.Dh),r.LFG(qs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(co,8),r.LFG(lo,8),r.LFG(ho,8),r.LFG(fo,8),r.LFG(po,8),r.LFG(mo,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qs.Dh),r.LFG(qs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(co,8),r.LFG(lo,8),r.LFG(ho,8),r.LFG(fo,8),r.LFG(po,8),r.LFG(mo,8))},token:t,providedIn:"any"}),t})();(0,qs.GT)(go,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let yo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[go]}),t})();var vo=n(7471);function bo(...t){return(0,vo.J)(1)((0,xt.of)(...t))}var _o=n(6163);function wo(...t){const e=t[t.length-1];return(0,_o.K)(e)?(t.pop(),n=>bo(t,n,e)):e=>bo(t,e)}function So(){return t=>t.lift(new Eo)}class Eo{call(t,e){return e.subscribe(new To(t))}}class To extends Nt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Io(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Co(t,e,n))}}class Co{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new xo(t,this.accumulator,this.seed,this.hasSeed))}}class xo extends Nt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}var Ao=n(1858),ko=n(1062),No=n(250),Ro=n(308),Oo=function(t,e){return(Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Do(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Po,Lo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fo=Fo||{},Mo=Lo||self;function Uo(){}function jo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function qo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Vo="closure_uid_"+(1e9*Math.random()>>>0),Bo=0;function Go(t,e,n){return t.call.apply(t.bind,arguments)}function zo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ho(t,e,n){return(Ho=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Go:zo).apply(null,arguments)}function Zo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function $o(){return Date.now()}function Ko(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Qo(){this.j=this.j,this.i=this.i}Qo.prototype.j=!1,Qo.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Vo)&&t[Vo]||(t[Vo]=++Bo)}(this)},Qo.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Wo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Jo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Yo(t){return Array.prototype.concat.apply([],arguments)}function Xo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ta(t){return/^[\s\xa0]*$/.test(t)}var ea,na=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ra(t,e){return-1!=t.indexOf(e)}function ia(t,e){return t<e?-1:t>e?1:0}t:{var sa=Mo.navigator;if(sa){var oa=sa.userAgent;if(oa){ea=oa;break t}}ea=""}function aa(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ua(t){var e={};for(var n in t)e[n]=t[n];return e}var ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function la(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<ca.length;s++)n=ca[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ha(t){return ha[" "](t),t}ha[" "]=Uo;var fa,da,pa=ra(ea,"Opera"),ma=ra(ea,"Trident")||ra(ea,"MSIE"),ga=ra(ea,"Edge"),ya=ga||ma,va=ra(ea,"Gecko")&&!(ra(ea.toLowerCase(),"webkit")&&!ra(ea,"Edge"))&&!(ra(ea,"Trident")||ra(ea,"MSIE"))&&!ra(ea,"Edge"),ba=ra(ea.toLowerCase(),"webkit")&&!ra(ea,"Edge");function _a(){var t=Mo.document;return t?t.documentMode:void 0}t:{var wa="",Sa=(da=ea,va?/rv:([^\);]+)(\)|;)/.exec(da):ga?/Edge\/([\d\.]+)/.exec(da):ma?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(da):ba?/WebKit\/(\S+)/.exec(da):pa?/(?:Version)[ \/]?(\S+)/.exec(da):void 0);if(Sa&&(wa=Sa?Sa[1]:""),ma){var Ea=_a();if(null!=Ea&&Ea>parseFloat(wa)){fa=String(Ea);break t}}fa=wa}var Ta={};function Ia(t){return function(t,e){var n=Ta;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=na(String(fa)).split("."),r=na(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=ia(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||ia(0==o[2].length,0==a[2].length)||ia(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}var Ca=Mo.document&&ma&&(_a()||parseInt(fa,10))||void 0,xa=!ma||9<=Number(Ca),Aa=ma&&!Ia("9"),ka=function(){if(!Mo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Mo.addEventListener("test",Uo,e),Mo.removeEventListener("test",Uo,e)}catch(n){}return t}();function Na(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ra(t,e){if(Na.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(va){t:{try{ha(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oa[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Na.prototype.b=function(){this.defaultPrevented=!0},Ko(Ra,Na);var Oa={2:"touch",3:"pen",4:"mouse"};Ra.prototype.b=function(){Ra.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Aa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Da="closure_listenable_"+(1e6*Math.random()|0),Pa=0;function La(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Pa,this.Y=this.Z=!1}function Fa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Ma(t){this.src=t,this.a={},this.b=0}function Ua(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=Wo(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Fa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ja(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.da==r)return i}return-1}Ma.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=ja(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new La(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var qa="closure_lm_"+(1e6*Math.random()|0),Va={};function Ba(t,e,n,r,i){if(r&&r.once)return za(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ba(t,e[s],n,r,i);return null}return n=Ya(n),t&&t[Da]?t.wa(e,n,qo(r)?!!r.capture:!!r,i):Ga(t,e,n,!1,r,i)}function Ga(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=qo(i)?!!i.capture:!!i;if(o&&!xa)return null;var a=Wa(t);if(a||(t[qa]=a=new Ma(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Qa,e=xa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ka||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($a(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function za(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)za(t,e[s],n,r,i);return null}return n=Ya(n),t&&t[Da]?t.xa(e,n,qo(r)?!!r.capture:!!r,i):Ga(t,e,n,!0,r,i)}function Ha(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ha(t,e[s],n,r,i);else r=qo(r)?!!r.capture:!!r,n=Ya(n),t&&t[Da]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ja(s=t.a[e],n,r,i))&&(Fa(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.a[e],t.b--))):t&&(t=Wa(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ja(e,n,r,i)),(n=-1<t?e[t]:null)&&Za(n))}function Za(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Da])Ua(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($a(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Wa(e))?(Ua(n,t),0==n.b&&(n.src=null,e[qa]=null)):Fa(t)}}}function $a(t){return t in Va?Va[t]:Va[t]="on"+t}function Ka(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Za(t),n.call(r,e)}function Qa(t,e){if(t.Y)return!0;if(!xa){if(!e)t:{e=["window","event"];for(var n=Mo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ka(t,e=new Ra(e,this))}return Ka(t,new Ra(e,this))}function Wa(t){return(t=t[qa])instanceof Ma?t:null}var Ja="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ya(t){return"function"==typeof t?t:(t[Ja]||(t[Ja]=function(e){return t.handleEvent(e)}),t[Ja])}function Xa(){Qo.call(this),this.c=new Ma(this),this.J=this,this.D=null}function tu(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Na(e,t);else if(e instanceof Na)e.target=e.target||t;else{var i=e;la(e=new Na(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=eu(o,r,!0,e)&&i}if(i=eu(o=e.a=t,r,!0,e)&&i,i=eu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=eu(o=e.a=n[s],r,!1,e)&&i}function eu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.da||o.src;o.Z&&Ua(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ko(Xa,Qo),Xa.prototype[Da]=!0,(Po=Xa.prototype).addEventListener=function(t,e,n,r){Ba(this,t,e,n,r)},Po.removeEventListener=function(t,e,n,r){Ha(this,t,e,n,r)},Po.H=function(){if(Xa.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Fa(n[r]);delete e.a[t],e.b--}}this.D=null},Po.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Po.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var nu=Mo.JSON.stringify;function ru(){this.b=this.a=null}var iu,su=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new au},function(t){t.reset()});function ou(){var t=hu,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function au(){this.next=this.b=this.a=null}function uu(t){Mo.setTimeout(function(){throw t},0)}function cu(t,e){iu||function(){var t=Mo.Promise.resolve(void 0);iu=function(){t.then(fu)}}(),lu||(iu(),lu=!0),hu.add(t,e)}ru.prototype.add=function(t,e){var n=su.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},au.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},au.prototype.reset=function(){this.next=this.b=this.a=null};var lu=!1,hu=new ru;function fu(){for(var t;t=ou();){try{t.a.call(t.b)}catch(n){uu(n)}var e=su;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}lu=!1}function du(t,e){Xa.call(this),this.b=t||1,this.a=e||Mo,this.f=Ho(this.eb,this),this.g=$o()}function pu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function mu(t,e,n){if("function"==typeof t)n&&(t=Ho(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ho(t.handleEvent,t)}return 2147483647<Number(e)?-1:Mo.setTimeout(t,e||0)}function gu(t){t.a=mu(function(){t.a=null,t.c&&(t.c=!1,gu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ko(du,Xa),(Po=du.prototype).aa=!1,Po.M=null,Po.eb=function(){if(this.aa){var t=$o()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),tu(this,"tick"),this.aa&&(pu(this),this.start()))}},Po.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=$o())},Po.H=function(){du.X.H.call(this),pu(this),delete this.a};var yu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Oo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:gu(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(Mo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Qo);function vu(t){Qo.call(this),this.b=t,this.a={}}Ko(vu,Qo);var bu=[];function _u(t,e,n,r){Array.isArray(n)||(n&&(bu[0]=n.toString()),n=bu);for(var i=0;i<n.length;i++){var s=Ba(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function wu(t){aa(t.a,function(t,e){this.a.hasOwnProperty(e)&&Za(t)},t),t.a={}}function Su(){this.a=!0}function Eu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return nu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}vu.prototype.H=function(){vu.X.H.call(this),wu(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Su.prototype.info=function(){};var Tu={},Iu=null;function Cu(){return Iu=Iu||new Xa}function xu(t){Na.call(this,Tu.Ga,t)}function Au(t){var e=Cu();tu(e,new xu(e,t))}function ku(t,e){Na.call(this,Tu.STAT_EVENT,t),this.stat=e}function Nu(t){var e=Cu();tu(e,new ku(e,t))}function Ru(t){Na.call(this,Tu.Ha,t)}function Ou(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Mo.setTimeout(function(){t()},e)}Tu.Ga="serverreachability",Ko(xu,Na),Tu.STAT_EVENT="statevent",Ko(ku,Na),Tu.Ha="timingevent",Ko(Ru,Na);var Du={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},Pu={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function Lu(){}function Fu(){}Lu.prototype.b=null;var Mu,Uu={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function ju(){Na.call(this,"d")}function qu(){Na.call(this,"c")}function Vu(){}function Bu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new vu(this),this.P=Gu,this.R=new du(t=ya?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ko(ju,Na),Ko(qu,Na),Ko(Vu,Lu),Vu.prototype.a=function(){return new XMLHttpRequest},Vu.prototype.c=function(){return{}},Mu=new Vu;var Gu=45e3,zu={},Hu={};function Zu(t,e,n){t.G=1,t.i=pc(uc(e)),t.j=n,t.I=!0,$u(t,null)}function $u(t,e){t.u=$o(),Wu(t),t.l=uc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),xc(n.b,"t",r),t.D=0,t.a=wl(t.g,t.g.C?e:null),0<t.O&&(t.F=new yu(Ho(t.Da,t,t.a),t.O)),_u(t.J,t.a,"readystatechange",t.bb),e=t.B?ua(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Au(1),function(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ku(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Qu(t,n);if(i==Hu){4==e&&(t.h=4,Nu(14),r=!1),Eu(t.c,t.f,null,"[Incomplete Response]");break}if(i==zu){t.h=4,Nu(15),Eu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Eu(t.c,t.f,i,null),ec(t,i)}4==e&&0==n.length&&(t.h=1,Nu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),dl(e),e.F=!0,Nu(11))):(Eu(t.c,t.f,n,"[Invalid Chunked Response]"),tc(t),Xu(t))}function Qu(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Hu:(n=Number(e.substring(n,r)),isNaN(n)?zu:(r+=1)+n>e.length?Hu:(e=e.substr(r,n),t.D=r+n,e))}function Wu(t){t.T=$o()+t.P,Ju(t,t.P)}function Ju(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ou(Ho(t.$a,t),e)}function Yu(t){t.o&&(Mo.clearTimeout(t.o),t.o=null)}function Xu(t){0==t.g.v||t.A||gl(t.g,t)}function tc(t){Yu(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,pu(t.R),wu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function ec(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Pc(n.b,t)))if(n.I=t.N,!t.C&&Pc(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(T_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ml(n),il(n)}fl(n),Nu(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=Ou(Ho(n.Xa,n),6e3));if(1>=Dc(n.b)&&n.fa){try{n.fa()}catch(T_){}n.fa=void 0}}else vl(n,11)}else if((t.C||n.a==t)&&ml(n),!ta(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var s=i[3];null!=s&&(n.ia=s,n.c.info("VER="+n.ia));var o=i[4];null!=o&&(n.qa=o,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ra(l,"spdy")||ra(l,"quic")||ra(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Lc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,dc(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=$o()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=_l(u,u.C?u.ha:null,u.ga),d.C){Fc(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(Yu(p),Wu(p)),u.a=d}else hl(u);0<n.g.length&&al(n)}else"stop"!=i[0]&&"close"!=i[0]||vl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vl(n,7):rl(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);Au(4)}catch(T_){}}function nc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(jo(t)||"string"==typeof t)Jo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(jo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(jo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function rc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof rc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ic(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];sc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)sc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function sc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Po=Bu.prototype).setTimeout=function(t){this.P=t},Po.bb=function(t){t=t.target;var e=this.F;e&&3==Xc(t)?e.f():this.Da(t)},Po.Da=function(t){try{if(t==this.a)t:{var e=Xc(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!ya&&!this.a.$())){this.A||4!=e||7==n||Au(8==n||0>=r?3:2),Yu(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ta(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,Nu(12),tc(this),Xu(this);break t}Eu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ec(this,u)}this.I?(Ku(this,e,s),ya&&this.b&&3==e&&(_u(this.J,this.R,"tick",this.ab),this.R.start())):(Eu(this.c,this.f,s,null),ec(this,s)),4==e&&tc(this),this.b&&!this.A&&(4==e?gl(this.g,this):(this.b=!1,Wu(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,Nu(12)):(this.h=0,Nu(13)),tc(this),Xu(this)}}}catch(c){}},Po.ab=function(){if(this.a){var t=Xc(this.a),e=this.a.$();this.D<e.length&&(Yu(this),Ku(this,t,e),this.b&&4!=t&&Wu(this))}},Po.cancel=function(){this.A=!0,tc(this)},Po.$a=function(){this.o=null;var t=$o();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(Au(3),Nu(17)),tc(this),this.h=2,Xu(this)):Ju(this,this.T-t)},(Po=rc.prototype).K=function(){ic(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Po.L=function(){return ic(this),this.a.concat()},Po.get=function(t,e){return sc(this.b,t)?this.b[t]:e},Po.set=function(t,e){sc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Po.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var oc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ac(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ac){this.a=void 0!==e?e:t.a,cc(this,t.f),this.j=t.j,lc(this,t.c),hc(this,t.h),this.g=t.g,e=t.b;var n=new Ec;n.c=e.c,e.a&&(n.a=new rc(e.a),n.b=e.b),fc(this,n),this.i=t.i}else t&&(n=String(t).match(oc))?(this.a=!!e,cc(this,n[1]||"",!0),this.j=mc(n[2]||""),lc(this,n[3]||"",!0),hc(this,n[4]),this.g=mc(n[5]||"",!0),fc(this,n[6]||"",!0),this.i=mc(n[7]||"")):(this.a=!!e,this.b=new Ec(null,this.a))}function uc(t){return new ac(t)}function cc(t,e,n){t.f=n?mc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function lc(t,e,n){t.c=n?mc(e,!0):e}function hc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function fc(t,e,n){e instanceof Ec?(t.b=e,function(t,e){e&&!t.f&&(Tc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ic(this,e),xc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=gc(e,wc)),t.b=new Ec(e,t.a))}function dc(t,e,n){t.b.set(e,n)}function pc(t){return dc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^$o()).toString(36)),t}function mc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,yc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function yc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ac.prototype.toString=function(){var t=[],e=this.f;e&&t.push(gc(e,vc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(gc(e,vc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(gc(n,"/"==n.charAt(0)?_c:bc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",gc(n,Sc)),t.join("")};var vc=/[#\/\?@]/g,bc=/[#\?:]/g,_c=/[#\?]/g,wc=/[#\?@]/g,Sc=/#/g;function Ec(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Tc(t){t.a||(t.a=new rc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ic(t,e){Tc(t),e=Ac(t,e),sc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,sc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ic(t)))}function Cc(t,e){return Tc(t),e=Ac(t,e),sc(t.a.b,e)}function xc(t,e,n){Ic(t,e),0<n.length&&(t.c=null,t.a.set(Ac(t,e),Xo(n)),t.b+=n.length)}function Ac(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Po=Ec.prototype).add=function(t,e){Tc(this),this.c=null,t=Ac(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Po.forEach=function(t,e){Tc(this),this.a.forEach(function(n,r){Jo(n,function(n){t.call(e,n,r,this)},this)},this)},Po.L=function(){Tc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Po.K=function(t){Tc(this);var e=[];if("string"==typeof t)Cc(this,t)&&(e=Yo(e,this.a.get(Ac(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Yo(e,t[n])}return e},Po.set=function(t,e){return Tc(this),this.c=null,Cc(this,t=Ac(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Po.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Po.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var kc=function(){return function(t,e){this.b=t,this.a=e}}();function Nc(t){this.g=t||Rc,t=Mo.PerformanceNavigationTiming?0<(t=Mo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Mo.ja&&Mo.ja.za&&Mo.ja.za()&&Mo.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Rc=10;function Oc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Dc(t){return t.b?1:t.a?t.a.size:0}function Pc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Lc(t,e){t.a?t.a.add(e):t.b=e}function Fc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Mc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Do(t.a.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.s)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Xo(t.c)}function Uc(){}function jc(){this.a=new Uc}function qc(t,e,n){var r=n||"";try{nc(t,function(t,n){var i=t;qo(t)&&(i=nu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(K_){throw e.push(r+"type="+encodeURIComponent("_badmap")),K_}}function Vc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}Nc.prototype.cancel=function(){var t,e;if(this.c=Mc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Do(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Uc.prototype.stringify=function(t){return Mo.JSON.stringify(t,void 0)},Uc.prototype.parse=function(t){return Mo.JSON.parse(t,void 0)};var Bc=Mo.JSON.parse;function Gc(t){Xa.call(this),this.headers=new rc,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=zc,this.F=this.G=!1}Ko(Gc,Xa);var zc="",Hc=/^https?$/i,Zc=["POST","PUT"];function $c(t){return"content-type"==t.toLowerCase()}function Kc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Qc(t),Jc(t)}function Qc(t){t.A||(t.A=!0,tu(t,"complete"),tu(t,"error"))}function Wc(t){if(t.b&&void 0!==Fo&&(!t.u[1]||4!=Xc(t)||2!=t.W()))if(t.m&&4==Xc(t))mu(t.Aa,0,t);else if(tu(t,"readystatechange"),4==Xc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.C).match(oc)[1]||null;if(!s&&Mo.self&&Mo.self.location){var o=Mo.self.location.protocol;s=o.substr(0,o.length-1)}i=!Hc.test(s?s.toLowerCase():"")}e=i}if(e)tu(t,"complete"),tu(t,"success");else{t.h=6;try{var a=2<Xc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Qc(t)}}finally{Jc(t)}}}function Jc(t,e){if(t.a){Yc(t);var n=t.a,r=t.u[0]?Uo:null;t.a=null,t.u=null,e||tu(t,"ready");try{n.onreadystatechange=r}catch(K_){}}}function Yc(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(Mo.clearTimeout(t.o),t.o=null)}function Xc(t){return t.a?t.a.readyState:0}function tl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return aa(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):dc(t,e,n))}function el(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nl(t){this.qa=0,this.g=[],this.c=new Su,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=el("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=el("baseRetryDelayMs",5e3,t),this.Sa=el("retryDelaySeedMs",1e4,t),this.Na=el("forwardChannelMaxRetries",2,t),this.na=el("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Nc(t&&t.concurrentRequestLimit),this.la=new jc,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function rl(t){if(sl(t),3==t.v){var e=t.R++,n=uc(t.B);dc(n,"SID",t.J),dc(n,"RID",e),dc(n,"TYPE","terminate"),cl(t,n),(e=new Bu(t,t.c,e,void 0)).G=2,e.i=pc(uc(n)),n=!1,Mo.navigator&&Mo.navigator.sendBeacon&&(n=Mo.navigator.sendBeacon(e.i.toString(),"")),!n&&Mo.Image&&((new Image).src=e.i,n=!0),n||(e.a=wl(e.g,null),e.a.ba(e.i)),e.u=$o(),Wu(e)}bl(t)}function il(t){t.a&&(dl(t),t.a.cancel(),t.a=null)}function sl(t){il(t),t.j&&(Mo.clearTimeout(t.j),t.j=null),ml(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Mo.clearTimeout(t.h),t.h=null)}function ol(t,e){t.g.push(new kc(t.Pa++,e)),3==t.v&&al(t)}function al(t){Oc(t.b)||t.h||(t.h=!0,cu(t.Ca,t),t.u=0)}function ul(t,e){var n;n=e?e.f:t.R++;var r=uc(t.B);dc(r,"SID",t.J),dc(r,"RID",n),dc(r,"AID",t.P),cl(t,r),t.i&&t.l&&tl(r,t.i,t.l),n=new Bu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ll(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),Lc(t.b,n),Zu(n,r,e)}function cl(t,e){t.f&&nc({},function(t,n){dc(e,n,t)})}function ll(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ho(t.f.Ka,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{qc(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function hl(t){t.a||t.j||(t.T=1,cu(t.Ba,t),t.o=0)}function fl(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ou(Ho(t.Ba,t),yl(t,t.o)),t.o++,0))}function dl(t){null!=t.s&&(Mo.clearTimeout(t.s),t.s=null)}function pl(t){t.a=new Bu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=uc(t.ma);dc(e,"RID","rpc"),dc(e,"SID",t.J),dc(e,"CI",t.G?"0":"1"),dc(e,"AID",t.P),cl(t,e),dc(e,"TYPE","xmlhttp"),t.i&&t.l&&tl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=pc(uc(e)),n.j=null,n.I=!0,$u(n,t)}function ml(t){null!=t.m&&(Mo.clearTimeout(t.m),t.m=null)}function gl(t,e){var n=null;if(t.a==e){ml(t),dl(t),t.a=null;var r=2}else{if(!Pc(t.b,e))return;n=e.s,Fc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=$o()-e.u;var i=t.u;tu(r=Cu(),new Ru(r,n,e,i)),al(t)}else hl(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Dc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=Ou(Ho(t.Ca,t,e),yl(t,t.u)),t.u++,0)))}(t,e)||2==r&&fl(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:vl(t,5);break;case 4:vl(t,10);break;case 3:vl(t,6);break;default:vl(t,2)}}function yl(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function vl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ho(t.cb,t);n||(n=new ac("//www.google.com/images/cleardot.gif"),Mo.location&&"http"==Mo.location.protocol||cc(n,"https"),pc(n)),function(t,e){var n=new Su;if(Mo.Image){var r=new Image;r.onload=Zo(Vc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zo(Vc,n,r,"TestLoadImage: error",!1,e),r.onabort=Zo(Vc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zo(Vc,n,r,"TestLoadImage: timeout",!1,e),Mo.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Nu(2);t.v=0,t.f&&t.f.sa(e),bl(t),sl(t)}function bl(t){t.v=0,t.I=-1,t.f&&(0==Mc(t.b).length&&0==t.g.length||(t.b.c.length=0,Xo(t.g),t.g.length=0),t.f.ra())}function _l(t,e,n){var r=function(t){return t instanceof ac?uc(t):new ac(t,void 0)}(n);if(""!=r.c)e&&lc(r,e+"."+r.c),hc(r,r.h);else{var i=Mo.location;r=function(t,e,n,r){var i=new ac(null,void 0);return t&&cc(i,t),e&&lc(i,e),n&&hc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&aa(t.V,function(t,e){dc(r,e,t)}),n=t.oa,(e=t.A)&&n&&dc(r,e,n),dc(r,"VER",t.ia),cl(t,r),r}function wl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gc(t.Oa)).G=t.C,e}function Sl(){}function El(){if(ma&&!(10<=Number(Ca)))throw Error("Environmental error: no available transport.")}function Tl(t,e){Xa.call(this),this.a=new nl(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ta(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ta(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new xl(this)}function Il(t){ju.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Cl(){qu.call(this),this.status=1}function xl(t){this.a=t}function Al(t){this.f=t}function kl(t){Xa.call(this),this.u=t,this.h=void 0,this.readyState=Nl,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(Po=Gc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Mu.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Mu),this.a.onreadystatechange=Ho(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(s){return void Kc(this,s)}t=n||"";var i=new rc(this.headers);r&&nc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=$c,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Mo.FormData&&t instanceof Mo.FormData,!(0<=Wo(Zc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Yc(this),0<this.s&&((this.F=function(t){return ma&&Ia(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Ho(this.ya,this)):this.o=mu(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(s){Kc(this,s)}},Po.ya=function(){void 0!==Fo&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,tu(this,"timeout"),this.abort(8))},Po.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,tu(this,"complete"),tu(this,"abort"),Jc(this))},Po.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Jc(this,!0)),Gc.X.H.call(this)},Po.Aa=function(){this.j||(this.B||this.m||this.g?Wc(this):this.Za())},Po.Za=function(){Wc(this)},Po.W=function(){try{return 2<Xc(this)?this.a.status:-1}catch(da){return-1}},Po.$=function(){try{return this.a?this.a.responseText:""}catch(da){return""}},Po.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Bc(e)}},Po.va=function(){return this.h},Po.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(Po=nl.prototype).ia=8,Po.v=1,Po.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Bu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?la(r=ua(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ll(this,n,e),dc(i=uc(this.B),"RID",t),dc(i,"CVER",22),this.A&&dc(i,"X-HTTP-Session-Id",this.A),cl(this,i),this.i&&r&&tl(i,this.i,r),Lc(this.b,n),this.Ja&&dc(i,"TYPE","init"),this.ea?(dc(i,"$req",e),dc(i,"SID","null"),n.U=!0,Zu(n,i,null)):Zu(n,i,e),this.v=2}}else 3==this.v&&(t?ul(this,t):0==this.g.length||Oc(this.b)||ul(this))},Po.Ba=function(){if(this.j=null,pl(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ou(Ho(this.Ya,this),t)}},Po.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,Nu(10),il(this),pl(this))},Po.Xa=function(){null!=this.m&&(this.m=null,il(this),fl(this),Nu(19))},Po.cb=function(t){t?(this.c.info("Successfully pinged google.com"),Nu(2)):(this.c.info("Failed to ping google.com"),Nu(1))},(Po=Sl.prototype).ua=function(){},Po.ta=function(){},Po.sa=function(){},Po.ra=function(){},Po.Ka=function(){},El.prototype.a=function(t,e){return new Tl(t,e)},Ko(Tl,Xa),Tl.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;Nu(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=_l(t,null,t.ga),al(t)},Tl.prototype.close=function(){rl(this.a)},Tl.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,ol(this.a,e)}else this.m?((e={}).__data__=nu(t),ol(this.a,e)):ol(this.a,t)},Tl.prototype.H=function(){this.a.f=null,delete this.f,rl(this.a),delete this.a,Tl.X.H.call(this)},Ko(Il,ju),Ko(Cl,qu),Ko(xl,Sl),xl.prototype.ua=function(){tu(this.a,"a")},xl.prototype.ta=function(t){tu(this.a,new Il(t))},xl.prototype.sa=function(t){tu(this.a,new Cl(t))},xl.prototype.ra=function(){tu(this.a,"b")},Ko(Al,Lu),Al.prototype.a=function(){return new kl(this.f)},Al.prototype.c=function(t){return function(){return t}}({}),Ko(kl,Xa);var Nl=0;function Rl(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function Ol(t){t.readyState=4,t.g=null,t.f=null,t.m=null,Dl(t)}function Dl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Po=kl.prototype).open=function(t,e){if(this.readyState!=Nl)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,Dl(this)},Po.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},Po.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ol(this)),this.readyState=Nl},Po.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Dl(this)),this.a&&(this.readyState=3,Dl(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==Mo.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,Rl(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},Po.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?Ol(this):Dl(this),3==this.readyState&&Rl(this)}},Po.Va=function(t){this.a&&(this.responseText=t,Ol(this))},Po.Ua=function(){this.a&&Ol(this)},Po.ca=function(){this.a&&Ol(this)},Po.setRequestHeader=function(t,e){this.l.append(t,e)},Po.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},Po.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),El.prototype.createWebChannel=El.prototype.a,Tl.prototype.send=Tl.prototype.l,Tl.prototype.open=Tl.prototype.h,Tl.prototype.close=Tl.prototype.close,Du.NO_ERROR=0,Du.TIMEOUT=8,Du.HTTP_ERROR=6,Pu.COMPLETE="complete",Fu.EventType=Uu,Uu.OPEN="a",Uu.CLOSE="b",Uu.ERROR="c",Uu.MESSAGE="d",Xa.prototype.listen=Xa.prototype.wa,Gc.prototype.listenOnce=Gc.prototype.xa,Gc.prototype.getLastError=Gc.prototype.Ra,Gc.prototype.getLastErrorCode=Gc.prototype.va,Gc.prototype.getStatus=Gc.prototype.W,Gc.prototype.getResponseJson=Gc.prototype.Qa,Gc.prototype.getResponseText=Gc.prototype.$,Gc.prototype.send=Gc.prototype.ba;var Pl=Du,Ll=Pu,Fl=Tu,Ml=Al,Ul=Fu,jl=Gc,ql=n(4762),Vl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Vl.o=-1;var Bl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,ql.ZT)(e,t),e}(Error),zl=new Ro.Yd("@firebase/firestore");function Hl(){return zl.logLevel}function Zl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zl.logLevel<=Ro.in.DEBUG){var r=e.map(Ql);zl.debug.apply(zl,(0,ql.ev)(["Firestore (8.6.8): "+t],r))}}function $l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zl.logLevel<=Ro.in.ERROR){var r=e.map(Ql);zl.error.apply(zl,(0,ql.ev)(["Firestore (8.6.8): "+t],r))}}function Kl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zl.logLevel<=Ro.in.WARN){var r=e.map(Ql);zl.warn.apply(zl,(0,ql.ev)(["Firestore (8.6.8): "+t],r))}}function Ql(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(K_){return t}}function Wl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw $l(e),new Error(e)}function Jl(t,e){t||Wl()}function Yl(t,e){return t}function Xl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var th=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Xl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function eh(t,e){return t<e?-1:t>e?1:0}function nh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function rh(t){return t+"\0"}var ih=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gl(Bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gl(Bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gl(Bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gl(Bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?eh(this.nanoseconds,t.nanoseconds):eh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),sh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ih(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function oh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ah(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ch=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Wl(),void 0===n?n=t.length-e:n>t.length-e&&Wl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ch),hh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return hh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Gl(Bl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gl(Bl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Gl(Bl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ch),dh=function(){function t(t){this.fields=t,t.sort(fh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return nh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ph=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return eh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ph.EMPTY_BYTE_STRING=new ph("");var mh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gh(t){if(Jl(!!t),"string"==typeof t){var e=0,n=mh.exec(t);if(Jl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yh(t.seconds),nanos:yh(t.nanos)}}function yh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function vh(t){return"string"==typeof t?ph.fromBase64String(t):ph.fromUint8Array(t)}function bh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _h(t){var e=t.mapValue.fields.__previous_value__;return bh(e)?_h(e):e}function wh(t){var e=gh(t.mapValue.fields.__local_write_time__.timestampValue);return new ih(e.seconds,e.nanos)}function Sh(t){return null==t}function Eh(t){return 0===t&&1/t==-1/0}function Th(t){return"number"==typeof t&&Number.isInteger(t)&&!Eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ih=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(lh.fromString(e))},t.fromName=function(e){return new t(lh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return lh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new lh(e.slice()))},t}();function Ch(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bh(t)?4:10:Wl()}function xh(t,e){var n=Ch(t);if(n!==Ch(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wh(t).isEqual(wh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=gh(t.timestampValue),r=gh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return vh(t.bytesValue).isEqual(vh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yh(t.geoPointValue.latitude)===yh(e.geoPointValue.latitude)&&yh(t.geoPointValue.longitude)===yh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yh(t.integerValue)===yh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=yh(t.doubleValue),r=yh(e.doubleValue);return n===r?Eh(n)===Eh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return nh(t.arrayValue.values||[],e.arrayValue.values||[],xh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(oh(n)!==oh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xh(n[i],r[i])))return!1;return!0}(t,e);default:return Wl()}}function Ah(t,e){return void 0!==(t.values||[]).find(function(t){return xh(t,e)})}function kh(t,e){var n=Ch(t),r=Ch(e);if(n!==r)return eh(n,r);switch(n){case 0:return 0;case 1:return eh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=yh(t.integerValue||t.doubleValue),r=yh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Nh(t.timestampValue,e.timestampValue);case 4:return Nh(wh(t),wh(e));case 5:return eh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=vh(t),r=vh(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=eh(n[i],r[i]);if(0!==s)return s}return eh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=eh(yh(t.latitude),yh(e.latitude));return 0!==n?n:eh(yh(t.longitude),yh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=kh(n[i],r[i]);if(s)return s}return eh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=eh(r[o],s[o]);if(0!==a)return a;var u=kh(n[r[o]],i[s[o]]);if(0!==u)return u}return eh(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Wl()}}function Nh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return eh(t,e);var n=gh(t),r=gh(e),i=eh(n.seconds,r.seconds);return 0!==i?i:eh(n.nanos,r.nanos)}function Rh(t){return Oh(t)}function Oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=gh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?vh(t.bytesValue).toBase64():"referenceValue"in t?Ih.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Oh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+Oh(t.fields[s])}return e+"}"}(t.mapValue):Wl();var e}function Dh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ph(t){return!!t&&"integerValue"in t}function Lh(t){return!!t&&"arrayValue"in t}function Fh(t){return!!t&&"nullValue"in t}function Mh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uh(t){return!!t&&"mapValue"in t}function jh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},gh(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return ah(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=jh(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=jh(t.arrayValue.values[r]);return n}return Object.assign({},t)}var qh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Uh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=jh(e)},t.prototype.setAll=function(t){var e=this,n=fh.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=jh(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Uh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return xh(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Uh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ah(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(jh(this.value))},t}();function Vh(t){var e=[];return ah(t.fields,function(t,n){var r=new fh([t]);if(Uh(n)){var i=Vh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new dh(e)}var Bh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,sh.min(),qh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,qh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,qh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=qh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=qh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Gh=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function zh(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Gh(t,e,n,r,i,s,o)}function Hh(t){var e=Yl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Rh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=sf(e.startAt)),e.endAt&&(n+="|ub:",n+=sf(e.endAt)),e.h=n}return e.h}function Zh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!af(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!xh(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cf(t.startAt,e.startAt)&&cf(t.endAt,e.endAt)}function $h(t){return Ih.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Kh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,ql.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Qh(t,n,r):"array-contains"===n?new Xh(t,r):"in"===n?new tf(t,r):"not-in"===n?new ef(t,r):"array-contains-any"===n?new nf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Wh(t,n):new Jh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(kh(e,this.value)):null!==e&&Ch(this.value)===Ch(e)&&this.m(kh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ih.fromName(r.referenceValue),i}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){var e=Ih.comparator(t.key,this.key);return this.m(e)},e}(Kh),Wh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Yh(0,n),r}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Kh),Jh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Yh(0,n),r}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Kh);function Yh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ih.fromName(t.referenceValue)})}var Xh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Lh(e)&&Ah(e.arrayValue,this.value)},e}(Kh),tf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ah(this.value.arrayValue,e)},e}(Kh),ef=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ah(this.value.arrayValue,e)},e}(Kh),nf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,ql.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ah(e.value.arrayValue,t)})},e}(Kh),rf=function(t,e){this.position=t,this.before=e};function sf(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Rh(t)}).join(",")}var of=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function af(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function uf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Ih.comparator(Ih.fromName(o.referenceValue),n.key):kh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function cf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!xh(t.position[n],e.position[n]))return!1;return!0}var lf=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function hf(t,e,n,r,i,s,o,a){return new lf(t,e,n,r,i,s,o,a)}function ff(t){return new lf(t)}function df(t){return!Sh(t.limit)&&"F"===t.limitType}function pf(t){return!Sh(t.limit)&&"L"===t.limitType}function mf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function yf(t){return null!==t.collectionGroup}function vf(t){var e=Yl(t);if(null===e.p){e.p=[];var n=gf(e),r=mf(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new of(n)),e.p.push(new of(fh.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new of(fh.keyField(),u))}}}return e.p}function bf(t){var e=Yl(t);if(!e.T)if("F"===e.limitType)e.T=zh(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vf(e);r<i.length;r++){var s=i[r];n.push(new of(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new rf(e.endAt.position,!e.endAt.before):null,a=e.startAt?new rf(e.startAt.position,!e.startAt.before):null;e.T=zh(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function _f(t,e,n){return new lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wf(t,e){return Zh(bf(t),bf(e))&&t.limitType===e.limitType}function Sf(t){return Hh(bf(t))+"|lt:"+t.limitType}function Ef(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Rh(e.value);var e}).join(", ")+"]"),Sh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+sf(t.startAt)),t.endAt&&(e+=", endAt: "+sf(t.endAt)),"Target("+e+")"}(bf(t))+"; limitType="+t.limitType+")"}function Tf(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ih.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!uf(t.startAt,vf(t),e)||t.endAt&&uf(t.endAt,vf(t),e))}(t,e)}function If(t){return function(e,n){for(var r=!1,i=0,s=vf(t);i<s.length;i++){var o=s[i],a=Cf(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Cf(t,e,n){var r=t.field.isKeyField()?Ih.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?kh(r,i):Wl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wl()}}function xf(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function Af(t){return{integerValue:""+t}}function kf(t,e){return Th(e)?Af(e):xf(t,e)}var Nf=function(){this._=void 0};function Rf(t,e,n){return t instanceof Pf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Lf?Ff(t,e):t instanceof Mf?Uf(t,e):function(t,e){var n=Df(t,e),r=qf(n)+qf(t.A);return Ph(n)&&Ph(t.A)?Af(r):xf(t.R,r)}(t,e)}function Of(t,e,n){return t instanceof Lf?Ff(t,e):t instanceof Mf?Uf(t,e):n}function Df(t,e){return t instanceof jf?Ph(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e}(Nf),Lf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ql.ZT)(e,t),e}(Nf);function Ff(t,e){for(var n=Vf(e),r=function(t){n.some(function(e){return xh(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Mf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ql.ZT)(e,t),e}(Nf);function Uf(t,e){for(var n=Vf(e),r=function(t){n=n.filter(function(e){return!xh(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,ql.ZT)(e,t),e}(Nf);function qf(t){return yh(t.integerValue||t.doubleValue)}function Vf(t){return Lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Bf=function(t,e){this.field=t,this.transform=e},Gf=function(t,e){this.version=t,this.transformResults=e},zf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Hf(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Zf=function(){};function $f(t,e,n){t instanceof Yf?function(t,e,n){var r=t.value.clone(),i=ed(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Xf?function(t,e,n){if(Hf(t.precondition,e)){var r=ed(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(td(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Kf(t,e,n){t instanceof Yf?function(t,e,n){if(Hf(t.precondition,e)){var r=t.value.clone(),i=nd(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Jf(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Xf?function(t,e,n){if(Hf(t.precondition,e)){var r=nd(t.fieldTransforms,n,e),i=e.data;i.setAll(td(t)),i.setAll(r),e.convertToFoundDocument(Jf(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Hf(t.precondition,e)&&e.convertToNoDocument(sh.min())}(t,e)}function Qf(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=Df(s.transform,o||null);null!=a&&(null==n&&(n=qh.empty()),n.set(s.field,a))}return n||null}function Wf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&nh(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Lf&&e instanceof Lf||t instanceof Mf&&e instanceof Mf?nh(t.elements,e.elements,xh):t instanceof jf&&e instanceof jf?xh(t.A,e.A):t instanceof Pf&&e instanceof Pf}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Jf(t){return t.isFoundDocument()?t.version:sh.min()}var Yf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,ql.ZT)(e,t),e}(Zf),Xf=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,ql.ZT)(e,t),e}(Zf);function td(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ed(t,e,n){var r=new Map;Jl(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Of(o,a,n[i]))}return r}function nd(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,Rf(a,u,e))}return r}var rd,id,sd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,ql.ZT)(e,t),e}(Zf),od=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,ql.ZT)(e,t),e}(Zf),ad=function(t){this.count=t};function ud(t){switch(t){case Bl.OK:return Wl();case Bl.CANCELLED:case Bl.UNKNOWN:case Bl.DEADLINE_EXCEEDED:case Bl.RESOURCE_EXHAUSTED:case Bl.INTERNAL:case Bl.UNAVAILABLE:case Bl.UNAUTHENTICATED:return!1;case Bl.INVALID_ARGUMENT:case Bl.NOT_FOUND:case Bl.ALREADY_EXISTS:case Bl.PERMISSION_DENIED:case Bl.FAILED_PRECONDITION:case Bl.ABORTED:case Bl.OUT_OF_RANGE:case Bl.UNIMPLEMENTED:case Bl.DATA_LOSS:return!0;default:return Wl()}}function cd(t){if(void 0===t)return $l("GRPC error has no .code"),Bl.UNKNOWN;switch(t){case rd.OK:return Bl.OK;case rd.CANCELLED:return Bl.CANCELLED;case rd.UNKNOWN:return Bl.UNKNOWN;case rd.DEADLINE_EXCEEDED:return Bl.DEADLINE_EXCEEDED;case rd.RESOURCE_EXHAUSTED:return Bl.RESOURCE_EXHAUSTED;case rd.INTERNAL:return Bl.INTERNAL;case rd.UNAVAILABLE:return Bl.UNAVAILABLE;case rd.UNAUTHENTICATED:return Bl.UNAUTHENTICATED;case rd.INVALID_ARGUMENT:return Bl.INVALID_ARGUMENT;case rd.NOT_FOUND:return Bl.NOT_FOUND;case rd.ALREADY_EXISTS:return Bl.ALREADY_EXISTS;case rd.PERMISSION_DENIED:return Bl.PERMISSION_DENIED;case rd.FAILED_PRECONDITION:return Bl.FAILED_PRECONDITION;case rd.ABORTED:return Bl.ABORTED;case rd.OUT_OF_RANGE:return Bl.OUT_OF_RANGE;case rd.UNIMPLEMENTED:return Bl.UNIMPLEMENTED;case rd.DATA_LOSS:return Bl.DATA_LOSS;default:return Wl()}}(id=rd||(rd={}))[id.OK=0]="OK",id[id.CANCELLED=1]="CANCELLED",id[id.UNKNOWN=2]="UNKNOWN",id[id.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",id[id.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",id[id.NOT_FOUND=5]="NOT_FOUND",id[id.ALREADY_EXISTS=6]="ALREADY_EXISTS",id[id.PERMISSION_DENIED=7]="PERMISSION_DENIED",id[id.UNAUTHENTICATED=16]="UNAUTHENTICATED",id[id.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",id[id.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",id[id.ABORTED=10]="ABORTED",id[id.OUT_OF_RANGE=11]="OUT_OF_RANGE",id[id.UNIMPLEMENTED=12]="UNIMPLEMENTED",id[id.INTERNAL=13]="INTERNAL",id[id.UNAVAILABLE=14]="UNAVAILABLE",id[id.DATA_LOSS=15]="DATA_LOSS";var ld=function(){function t(t,e){this.comparator=t,this.root=e||fd.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fd.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fd.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new hd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new hd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new hd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new hd(this.root,t,this.comparator,!0)},t}(),hd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),fd=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Wl();if(this.right.isRed())throw Wl();var t=this.left.check();if(t!==this.right.check())throw Wl();return t+(this.isRed()?0:1)},t}();fd.EMPTY=null,fd.RED=!0,fd.BLACK=!1,fd.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Wl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Wl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Wl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Wl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Wl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new fd(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var dd=function(){function t(t){this.comparator=t,this.data=new ld(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new pd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new pd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),pd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),md=new ld(Ih.comparator);function gd(){return md}var yd=new ld(Ih.comparator);function vd(){return yd}var bd=new ld(Ih.comparator);function _d(){return bd}var wd=new dd(Ih.comparator);function Sd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wd,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Ed=new dd(eh);function Td(){return Ed}var Id=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(sh.min(),r,Td(),gd(),Sd())},t}(),Cd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ph.EMPTY_BYTE_STRING,n,Sd(),Sd(),Sd())},t}(),xd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ad=function(t,e){this.targetId=t,this.V=e},kd=function(t,e,n,r){void 0===n&&(n=ph.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Nd=function(){function t(){this.S=0,this.D=Dd(),this.C=ph.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Sd(),e=Sd(),n=Sd();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wl()}}),new Cd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Dd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Rd=function(){function t(t){this.W=t,this.G=new Map,this.H=gd(),this.J=Od(),this.Y=new dd(eh)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Wl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if($h(i))if(0===n){var s=new Ih(i.path);this.tt(e,s,Bh.newNoDocument(s,sh.min()))}else Jl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&$h(s.target)){var o=new Ih(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Bh.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Sd();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Id(t,n,this.Y,this.H,r);return this.H=gd(),this.J=Od(),this.Y=new dd(eh),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Nd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new dd(eh),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Zl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Nd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Od(){return new ld(Ih.comparator)}function Dd(){return new ld(Ih.comparator)}var Pd={asc:"ASCENDING",desc:"DESCENDING"},Ld={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fd=function(t,e){this.databaseId=t,this.I=e};function Md(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ud(t,e){return t.I?e.toBase64():e.toUint8Array()}function jd(t,e){return Md(t,e.toTimestamp())}function qd(t){return Jl(!!t),sh.fromTimestamp(function(t){var e=gh(t);return new ih(e.seconds,e.nanos)}(t))}function Vd(t,e){return function(t){return new lh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Bd(t){var e=lh.fromString(t);return Jl(fp(e)),e}function Gd(t,e){return Vd(t.databaseId,e.path)}function zd(t,e){var n=Bd(e);if(n.get(1)!==t.databaseId.projectId)throw new Gl(Bl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Gl(Bl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ih(Kd(n))}function Hd(t,e){return Vd(t.databaseId,e)}function Zd(t){var e=Bd(t);return 4===e.length?lh.emptyPath():Kd(e)}function $d(t){return new lh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kd(t){return Jl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qd(t,e,n){return{name:Gd(t,e),fields:n.value.mapValue.fields}}function Wd(t,e,n){var r=zd(t,e.name),i=qd(e.updateTime),s=new qh({mapValue:{fields:e.fields}}),o=Bh.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jd(t,e){var n;if(e instanceof Yf)n={update:Qd(t,e.key,e.value)};else if(e instanceof sd)n={delete:Gd(t,e.key)};else if(e instanceof Xf)n={update:Qd(t,e.key,e.data),updateMask:hp(e.fieldMask)};else{if(!(e instanceof od))return Wl();n={verify:Gd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Pf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jf)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Wl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:jd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wl()}(t,e.precondition)),n}function Yd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?zf.updateTime(qd(t.updateTime)):void 0!==t.exists?zf.exists(t.exists):zf.none()}(e.currentDocument):zf.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Jl("REQUEST_TIME"===e.setToServerValue),n=new Pf):"appendMissingElements"in e?n=new Lf(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Mf(e.removeAllFromArray.values||[]):"increment"in e?n=new jf(t,e.increment):Wl();var r=fh.fromServerFormat(e.fieldPath);return new Bf(r,n)}(t,e)}):[];if(e.update){var i=zd(t,e.update.name),s=new qh({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new dh((t.fieldPaths||[]).map(function(t){return fh.fromServerFormat(t)}))}(e.updateMask);return new Xf(i,s,o,n,r)}return new Yf(i,s,n,r)}if(e.delete){var a=zd(t,e.delete);return new sd(a,n)}if(e.verify){var u=zd(t,e.verify);return new od(u,n)}return Wl()}function Xd(t,e){return{documents:[Hd(t,e.path)]}}function tp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Hd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Mh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NAN"}};if(Fh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Mh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NAN"}};if(Fh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(t.field),op:op(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:ap(t.field),direction:sp(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Sh(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=rp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=rp(e.endAt)),n}function ep(t){var e=Zd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Jl(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=np(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new of(up(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Sh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ip(n.startAt));var l=null;return n.endAt&&(l=ip(n.endAt)),hf(e,i,a,o,u,"F",c,l)}function np(t){return t?void 0!==t.unaryFilter?[lp(t)]:void 0!==t.fieldFilter?[cp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return np(t)}).reduce(function(t,e){return t.concat(e)}):Wl():[]}function rp(t){return{before:t.before,values:t.position}}function ip(t){return new rf(t.values||[],!!t.before)}function sp(t){return Pd[t]}function op(t){return Ld[t]}function ap(t){return{fieldPath:t.canonicalString()}}function up(t){return fh.fromServerFormat(t.fieldPath)}function cp(t){return Kh.create(up(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Wl()}}(t.fieldFilter.op),t.fieldFilter.value)}function lp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=up(t.unaryFilter.field);return Kh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=up(t.unaryFilter.field);return Kh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=up(t.unaryFilter.field);return Kh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=up(t.unaryFilter.field);return Kh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Wl()}}function hp(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function fp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function dp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mp(e)),e=pp(t.get(n),e);return mp(e)}function pp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function mp(t){return t+"\x01\x01"}function gp(t){var e=t.length;if(Jl(e>=2),2===e)return Jl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),lh.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Wl(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Wl()}s=o+2}return new lh(r)}var yp=function(t,e){this.seconds=t,this.nanoseconds=e},vp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};vp.store="owner",vp.key="owner";var bp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bp.store="mutationQueues",bp.keyPath="userId";var _p=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};_p.store="mutations",_p.keyPath="batchId",_p.userMutationsIndex="userMutationsIndex",_p.userMutationsKeyPath=["userId","batchId"];var wp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,dp(e)]},t.key=function(t,e,n){return[t,dp(e),n]},t}();wp.store="documentMutations",wp.PLACEHOLDER=new wp;var Sp=function(t,e){this.path=t,this.readTime=e},Ep=function(t,e){this.path=t,this.version=e},Tp=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Tp.store="remoteDocuments",Tp.readTimeIndex="readTimeIndex",Tp.readTimeIndexPath="readTime",Tp.collectionReadTimeIndex="collectionReadTimeIndex",Tp.collectionReadTimeIndexPath=["parentPath","readTime"];var Ip=function(t){this.byteSize=t};Ip.store="remoteDocumentGlobal",Ip.key="remoteDocumentGlobalKey";var Cp=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Cp.store="targets",Cp.keyPath="targetId",Cp.queryTargetsIndexName="queryTargetsIndex",Cp.queryTargetsKeyPath=["canonicalId","targetId"];var xp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};xp.store="targetDocuments",xp.keyPath=["targetId","path"],xp.documentTargetsIndex="documentTargetsIndex",xp.documentTargetsKeyPath=["path","targetId"];var Ap=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ap.key="targetGlobalKey",Ap.store="targetGlobal";var kp=function(t,e){this.collectionId=t,this.parent=e};kp.store="collectionParents",kp.keyPath=["collectionId","parent"];var Np=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Np.store="clientMetadata",Np.keyPath="clientId";var Rp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Rp.store="bundles",Rp.keyPath="bundleId";var Op=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Op.store="namedQueries",Op.keyPath="name";var Dp=(0,ql.ev)((0,ql.ev)([],(0,ql.ev)((0,ql.ev)([],(0,ql.ev)((0,ql.ev)([],(0,ql.ev)((0,ql.ev)([],[bp.store,_p.store,wp.store,Tp.store,Cp.store,vp.store,Ap.store,xp.store]),[Np.store])),[Ip.store])),[kp.store])),[Rp.store,Op.store]),Pp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Fp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Mp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Wl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Up=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Fp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Vp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Zp(e.target.error);n.ft.reject(new Vp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Vp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Zl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Gp(e)},t}(),jp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,No.z$)())&&$l("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Zl("SimpleDb","Removing database:",t),zp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,No.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Zl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Vp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Gl(Bl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Vp(t,n))},i.onupgradeneeded=function(t){Zl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Zl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,ql.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,ql.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Up.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Mp.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return Zl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),qp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return zp(this.Pt.delete())},t}(),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,Bl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,ql.ZT)(e,t),e}(Gl);function Bp(t){return"IndexedDbTransactionError"===t.name}var Gp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Zl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Zl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zp(n)},t.prototype.add=function(t){return Zl("SimpleDb","ADD",this.store.name,t,t),zp(this.store.add(t))},t.prototype.get=function(t){var e=this;return zp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Zl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Zl("SimpleDb","DELETE",this.store.name,t),zp(this.store.delete(t))},t.prototype.count=function(){return Zl("SimpleDb","COUNT",this.store.name),zp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Zl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Mp(function(n,r){e.onerror=function(t){var e=Zp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Mp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new qp(i),o=e(i.primaryKey,i.value,s);if(o instanceof Mp){var a=o.catch(function(t){return s.done(),Mp.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Mp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function zp(t){return new Mp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Zp(t.target.error);n(e)}})}var Hp=!1;function Zp(t){var e=jp._t((0,No.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Gl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Hp||(Hp=!0,setTimeout(function(){throw r},0)),r}}return t}var $p=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,ql.ZT)(e,t),e}(Lp);function Kp(t,e){var n=Yl(t);return jp.It(n.Mt,e)}var Qp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&$f(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&Kf(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&Kf(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(sh.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Sd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&nh(this.mutations,t.mutations,function(t,e){return Wf(t,e)})&&nh(this.baseMutations,t.baseMutations,function(t,e){return Wf(t,e)})},t}(),Wp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Jl(e.mutations.length===r.length);for(var i=_d(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Jp=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=sh.min()),void 0===s&&(s=sh.min()),void 0===o&&(o=ph.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Yp=function(t){this.Lt=t};function Xp(t,e){if(e.document)return Wd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ih.fromSegments(e.noDocument.path),r=im(e.noDocument.readTime),i=Bh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Ih.fromSegments(e.unknownDocument.path);return r=im(e.unknownDocument.version),Bh.newUnknownDocument(s,r)}return Wl()}function tm(t,e,n){var r=em(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:Gd(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Md(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Tp(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=rm(e.version);return o=e.hasCommittedMutations,new Tp(null,new Sp(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=rm(e.version);return new Tp(new Ep(c,l),null,null,!0,r,i)}return Wl()}function em(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nm(t){var e=new ih(t[0],t[1]);return sh.fromTimestamp(e)}function rm(t){var e=t.toTimestamp();return new yp(e.seconds,e.nanoseconds)}function im(t){var e=new ih(t.seconds,t.nanoseconds);return sh.fromTimestamp(e)}function sm(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Yd(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Yd(t.Lt,e)}),s=ih.fromMillis(e.localWriteTimeMs);return new Qp(e.batchId,s,n,i)}function om(t){var e,n,r=im(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?im(t.lastLimboFreeSnapshotVersion):sh.min();return void 0!==t.query.documents?(Jl(1===(n=t.query).documents.length),e=bf(ff(Zd(n.documents[0])))):e=function(t){return bf(ep(t))}(t.query),new Jp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ph.fromBase64String(t.resumeToken))}function am(t,e){var n,r=rm(e.snapshotVersion),i=rm(e.lastLimboFreeSnapshotVersion);n=$h(e.target)?Xd(t.Lt,e.target):tp(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Cp(e.targetId,Hh(e.target),r,s,e.sequenceNumber,i,n)}function um(t){var e=ep({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_f(e,e.limit,"L"):e}var cm=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return lm(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:im(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return lm(t).put({bundleId:(n=e).id,createTime:rm(qd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return hm(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:um(e.bundledQuery),readTime:im(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return hm(t).put(function(t){return{name:t.name,readTime:rm(qd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function lm(t){return Kp(t,Rp.store)}function hm(t){return Kp(t,Op.store)}var fm=function(){function t(){this.Bt=new dm}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Mp.resolve()},t.prototype.getCollectionParents=function(t,e){return Mp.resolve(this.Bt.getEntries(e))},t}(),dm=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new dd(lh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new dd(lh.comparator)).toArray()},t}(),pm=function(){function t(){this.qt=new dm}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:dp(i)};return mm(t).put(s)}return Mp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[rh(e),""],!1,!0);return mm(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(gp(s.parent))}return n})},t}();function mm(t){return Kp(t,kp.store)}var gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ym=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function vm(t,e,n){var r=t.store(_p.store),i=t.store(wp.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){Jl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=wp.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return Mp.waitFor(s).next(function(){return c})}function bm(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wl();e=t.noDocument}return JSON.stringify(e).length}ym.DEFAULT_COLLECTION_PERCENTILE=10,ym.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ym.DEFAULT=new ym(41943040,ym.DEFAULT_COLLECTION_PERCENTILE,ym.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ym.DISABLED=new ym(-1,0,0);var _m=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Jl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sm(t).$t({index:_p.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Em(t),o=Sm(t);return o.add({}).next(function(a){Jl("number"==typeof a);for(var u=new Qp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Jd(t.Lt,e)}),i=n.mutations.map(function(e){return Jd(t.Lt,e)});return new _p(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new dd(function(t,e){return eh(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],m=wp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(m,wp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Mp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Sm(t).get(e).next(function(t){return t?(Jl(t.userId===n.userId),sm(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Mp.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Sm(t).$t({index:_p.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Jl(e.batchId>=r),s=sm(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sm(t).$t({index:_p.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sm(t).Nt(_p.userMutationsIndex,n).next(function(t){return t.map(function(t){return sm(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Em(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=gp(r[1]);if(a===n.userId&&e.path.isEqual(c))return Sm(t).get(u).next(function(t){if(!t)throw Wl();Jl(t.userId===n.userId),s.push(sm(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new dd(eh),i=[];return e.forEach(function(e){var s=wp.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Em(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=gp(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Mp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=wp.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new dd(eh);return Em(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=gp(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Sm(t).get(e).next(function(t){if(null===t)throw Wl();Jl(t.userId===n.userId),r.push(sm(n.R,t))}))}),Mp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return vm(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Mp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Mp.resolve();var r=IDBKeyRange.lowerBound(wp.prefixForUser(e.userId)),i=[];return Em(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=gp(t[1]);i.push(s)}else r.done()}).next(function(){Jl(0===i.length)})})},t.prototype.containsKey=function(t,e){return wm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Tm(t).get(this.userId).next(function(t){return t||new bp(e.userId,-1,"")})},t}();function wm(t,e,n){var r=wp.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Em(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function Sm(t){return Kp(t,_p.store)}function Em(t){return Kp(t,wp.store)}function Tm(t){return Kp(t,bp.store)}var Im=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Cm=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Im(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return sh.fromTimestamp(new ih(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return xm(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Jl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return xm(t).$t(function(o,a){var u=om(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Mp.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return xm(t).$t(function(t,n){var r=om(n);e(r)})},t.prototype.Xt=function(t){return Am(t).get(Ap.key).next(function(t){return Jl(null!==t),t})},t.prototype.Zt=function(t,e){return Am(t).put(Ap.key,e)},t.prototype.te=function(t,e){return xm(t).put(am(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Hh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return xm(t).$t({range:r,index:Cp.queryTargetsIndexName},function(t,n,r){var s=om(n);Zh(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=km(t);return e.forEach(function(e){var o=dp(e.path);i.push(s.put(new xp(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Mp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=km(t);return Mp.forEach(e,function(e){var s=dp(e.path);return Mp.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=km(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=km(t),i=Sd();return r.$t({range:n,kt:!0},function(t,e,n){var r=gp(t[1]),s=new Ih(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=dp(e.path),r=IDBKeyRange.bound([n],[rh(n)],!1,!0),i=0;return km(t).$t({index:xp.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return xm(t).get(e).next(function(t){return t?om(t):null})},t}();function xm(t){return Kp(t,Cp.store)}function Am(t){return Kp(t,Ap.store)}function km(t){return Kp(t,xp.store)}function Nm(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){if(t.code!==Bl.FAILED_PRECONDITION||t.message!==Pp)throw t;return Zl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Rm(t,e){var n=t[1],r=e[1],i=eh(t[0],e[0]);return 0===i?eh(n,r):i}var Om=function(){function t(t){this.ne=t,this.buffer=new dd(Rm),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Rm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Dm=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Zl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,ql.mG)(e,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Bp(e=n.sent())?(Zl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Nm(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Pm=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Mp.resolve(Vl.o);var r=new Om(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Zl("LruGarbageCollector","Garbage collection skipped; disabled"),Mp.resolve(gm)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Zl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),gm):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Zl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Hl()<=Ro.in.DEBUG&&Zl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Mp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Lm=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Pm(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Fm(t,n)},t.prototype.removeReference=function(t,e,n){return Fm(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Fm(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Tm(t).Ot(function(r){return wm(t,r,e).next(function(t){return t&&(n=!0),Mp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),km(t).delete([0,dp(o.path)])})});i.push(u)}}).next(function(){return Mp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Fm(t,e)},t.prototype.we=function(t,e){var n,r=km(t),i=Vl.o;return r.$t({index:xp.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Vl.o&&e(new Ih(gp(n)),i),i=o,n=s):i=Vl.o}).next(function(){i!==Vl.o&&e(new Ih(gp(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Fm(t,e){return km(t).put(function(t,e){return new xp(0,dp(t.path),e)}(e,t.currentSequenceNumber))}var Mm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ah(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return uh(this.inner)},t}(),Um=function(){function t(){this.changes=new Mm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:sh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Bh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Mp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),jm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Bm(t).put(Gm(e),n)},t.prototype.removeEntry=function(t,e){var n=Bm(t),r=Gm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Bm(t).get(Gm(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Bm(t).get(Gm(e)).next(function(t){return{document:n.ye(e,t),size:bm(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=gd();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=gd(),i=new ld(Ih.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,bm(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Mp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return Bm(t).$t({range:r},function(t,e,r){for(var o=Ih.fromSegments(t);s&&Ih.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=gd(),s=e.path.length+1,o={};if(n.isEqual(sh.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=em(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Tp.collectionReadTimeIndex}return Bm(t).$t(o,function(t,n,o){if(t.length===s){var a=Xp(r.R,n);e.path.isPrefixOf(a.key.path)?Tf(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new qm(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Vm(t).get(Ip.key).next(function(t){return Jl(!!t),t})},t.prototype.me=function(t,e){return Vm(t).put(Ip.key,e)},t.prototype.ye=function(t,e){if(e){var n=Xp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(sh.min()))return n}return Bh.newInvalidDocument(t)},t}(),qm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Mm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,ql.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new dd(function(t,e){return eh(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=tm(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=bm(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=tm(e.Ie.R,Bh.newNoDocument(s,sh.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Mp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Um);function Vm(t){return Kp(t,Ip.store)}function Bm(t){return Kp(t,Tp.store)}function Gm(t){return t.path.toArray()}var zm=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Jl(n<r&&n>=0&&r<=11);var s=new Up("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(vp.store)}(t),function(t){t.createObjectStore(bp.store,{keyPath:bp.keyPath}),t.createObjectStore(_p.store,{keyPath:_p.keyPath,autoIncrement:!0}).createIndex(_p.userMutationsIndex,_p.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wp.store)}(t),Hm(t),function(t){t.createObjectStore(Tp.store)}(t));var o=Mp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(xp.store),t.deleteObjectStore(Cp.store),t.deleteObjectStore(Ap.store)}(t),Hm(t)),o=o.next(function(){return function(t){var e=t.store(Ap.store),n=new Ap(0,0,sh.min().toTimestamp(),0);return e.put(Ap.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(_p.store).Nt().next(function(n){t.deleteObjectStore(_p.store),t.createObjectStore(_p.store,{keyPath:_p.keyPath,autoIncrement:!0}).createIndex(_p.userMutationsIndex,_p.userMutationsKeyPath,{unique:!0});var r=e.store(_p.store),i=n.map(function(t){return r.put(t)});return Mp.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(Np.store,{keyPath:Np.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Ip.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tp.store);e.createIndex(Tp.readTimeIndex,Tp.readTimeIndexPath,{unique:!1}),e.createIndex(Tp.collectionReadTimeIndex,Tp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Rp.store,{keyPath:Rp.keyPath})}(t),function(t){t.createObjectStore(Op.store,{keyPath:Op.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Tp.store).$t(function(t,n){e+=bm(n)}).next(function(){var n=new Ip(e);return t.store(Ip.store).put(Ip.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(bp.store),r=t.store(_p.store);return n.Nt().next(function(n){return Mp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(_p.userMutationsIndex,i).next(function(r){return Mp.forEach(r,function(r){Jl(r.userId===n.userId);var i=sm(e.R,r);return vm(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(xp.store),n=t.store(Tp.store);return t.store(Ap.store).get(Ap.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new lh(n),o=function(t){return[0,dp(t)]}(s);r.push(e.get(o).next(function(n){return n?Mp.resolve():function(n){return e.put(new xp(0,dp(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Mp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(kp.store,{keyPath:kp.keyPath});var n=e.store(kp.store),r=new dm,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:dp(i)})}};return e.store(Tp.store).$t({kt:!0},function(t,e){var n=new lh(t);return i(n.popLast())}).next(function(){return e.store(wp.store).$t({kt:!0},function(t,e){var n=gp(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Cp.store);return n.$t(function(t,r){var i=om(r),s=am(e.R,i);return n.put(s)})},t}();function Hm(t){t.createObjectStore(xp.store,{keyPath:xp.keyPath}).createIndex(xp.documentTargetsIndex,xp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Cp.store,{keyPath:Cp.keyPath}).createIndex(Cp.queryTargetsIndexName,Cp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ap.store)}var Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$m=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Gl(Bl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lm(this,i),this.Le=n+"main",this.R=new Yp(u),this.Be=new jp(this.Le,11,new zm(this.R)),this.qe=new Cm(this.referenceDelegate,this.R),this.Ut=new pm,this.Ue=function(t,e){return new jm(t,e)}(this.R,this.Ut),this.Qe=new cm,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&$l("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Gl(Bl.FAILED_PRECONDITION,Zm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Vl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,ql.mG)(e,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,ql.mG)(e,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,ql.mG)(e,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Qm(e).put(new Np(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Bp(e))return Zl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Zl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Km(t).get(vp.key).next(function(t){return Mp.resolve(e.tn(t))})},t.prototype.en=function(t){return Qm(t).delete(this.clientId)},t.prototype.nn=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Kp(t,Np.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Mp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Mp.resolve(!0):Km(t).get(vp.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Gl(Bl.FAILED_PRECONDITION,Zm);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qm(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Zl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t=this;return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[vp.store,Np.store],function(e){var n=new $p(e,Vl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Qm(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return _m.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Zl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Dp,function(s){return r=new $p(s,i.Ne?i.Ne.next():Vl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw $l("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Gl(Bl.FAILED_PRECONDITION,Pp);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Km(t).get(vp.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Gl(Bl.FAILED_PRECONDITION,Zm)})},t.prototype.Ze=function(t){var e=new vp(this.clientId,this.allowTabSynchronization,Date.now());return Km(t).put(vp.key,e)},t.yt=function(){return jp.yt()},t.prototype.Xe=function(t){var e=this,n=Km(t);return n.get(vp.key).next(function(t){return e.tn(t)?(Zl("IndexedDbPersistence","Releasing primary lease."),n.delete(vp.key)):Mp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&($l("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Zl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return $l("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){$l("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Km(t){return Kp(t,vp.store)}function Qm(t){return Kp(t,Np.store)}function Wm(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jm=function(t,e){this.progress=t,this.wn=e},Ym=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ih.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):yf(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ih(e)).next(function(t){var e=vd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=vd();return this.Ut.getCollectionParents(t,i).next(function(o){return Mp.forEach(o,function(o){var a=function(t,e){return new lf(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=Bh.newInvalidDocument(c),r=r.insert(c,l)),Kf(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Tf(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Sd(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof Xf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Xm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Sd(),i=Sd(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),tg=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(sh.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(df(e)||pf(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(Hl()<=Ro.in.DEBUG&&Zl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ef(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new dd(If(t));return e.forEach(function(e,r){Tf(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Hl()<=Ro.in.DEBUG&&Zl("QueryEngine","Using full collection scan to execute query:",Ef(e)),this.Sn.getDocumentsMatchingQuery(t,e,sh.min())},t}(),eg=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ld(eh),this.kn=new Mm(function(t){return Hh(t)},Zh),this.$n=sh.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ym(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ng(t,e,n,r){return new eg(t,e,n,r)}function rg(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,ql.Jh)(this,function(o){switch(o.label){case 0:return n=Yl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Ym(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=Sd(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function ig(t,e){var n=Yl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Mp.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);Jl(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function sg(t){var e=Yl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function og(t,e){var n=Yl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Jl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=gd();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(ag(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(sh.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Mp.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function ag(t,e,n,r,i){var s=Sd();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=gd();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(sh.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Zl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function ug(t,e){var n=Yl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function cg(t,e){var n=Yl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Mp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Jp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function lg(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:r=Yl(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Bp(o=a.sent()))throw o;return Zl("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function hg(t,e,n){var r=Yl(t),i=sh.min(),s=Sd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Yl(t),i=r.kn.get(n);return void 0!==i?Mp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,bf(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:sh.min(),n?s:Sd())}).next(function(t){return{documents:t,Bn:s}})})}function fg(t,e){var n=Yl(t),r=Yl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function dg(t){var e=Yl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Yl(t),i=gd(),s=em(n),o=Bm(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:Tp.readTimeIndex,range:a},function(t,e){var n=Xp(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:nm(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function pg(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){return[2,(e=Yl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Bm(t),n=sh.min();return e.$t({index:Tp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=nm(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function mg(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,ql.Jh)(this,function(p){switch(p.label){case 0:for(i=Yl(t),s=Sd(),o=gd(),a=_d(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,cg(i,function(t){return bf(ff(lh.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return ag(t,f,o,sh.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function gg(t,e,n){return void 0===n&&(n=Sd()),(0,ql.mG)(this,void 0,void 0,function(){var r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return[4,cg(t,bf(um(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Yl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=qd(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Qe.saveNamedQuery(t,e);var o=r.withResumeToken(ph.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var yg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Mp.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:qd(n.createTime)}),Mp.resolve()},t.prototype.getNamedQuery=function(t,e){return Mp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:um(t.bundledQuery),readTime:qd(t.readTime)}}(e)),Mp.resolve()},t}(),vg=function(){function t(){this.Wn=new dd(bg.Gn),this.zn=new dd(bg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new bg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new bg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ih(new lh([])),r=new bg(n,t),i=new bg(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ih(new lh([])),n=new bg(e,t),r=new bg(e,t+1),i=Sd();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new bg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),bg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ih.comparator(t.key,e.key)||eh(t.ns,e.ns)},t.Hn=function(t,e){return eh(t.ns,e.ns)||Ih.comparator(t.key,e.key)},t}(),_g=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new dd(bg.Gn)}return t.prototype.checkEmpty=function(t){return Mp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Qp(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new bg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Mp.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Mp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Mp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Mp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Mp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new bg(e,0),i=new bg(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Mp.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new dd(eh);return e.forEach(function(t){var e=new bg(t,0),i=new bg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Mp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ih.isDocumentKey(i)||(i=i.child(""));var s=new bg(new Ih(i),0),o=new dd(eh);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Mp.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Jl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Mp.forEach(e.mutations,function(i){var s=new bg(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new bg(e,0),r=this.rs.firstAfterOrEqual(n);return Mp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Mp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),wg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ld(Ih.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Mp.resolve(n?n.document.clone():Bh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=gd();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Bh.newInvalidDocument(t))}),Mp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=gd(),i=new Ih(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Tf(e,u)&&(r=r.insert(u.key,u.clone()))}return Mp.resolve(r)},t.prototype.fs=function(t,e){return Mp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Sg(this)},t.prototype.getSize=function(t){return Mp.resolve(this.size)},t}(),Sg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,ql.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Mp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Um),Eg=function(){function t(t){this.persistence=t,this.ds=new Mm(function(t){return Hh(t)},Zh),this.lastRemoteSnapshotVersion=sh.min(),this.highestTargetId=0,this.ws=0,this._s=new vg,this.targetCount=0,this.ys=Im.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Mp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Mp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Mp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Mp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Mp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Im(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Mp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Mp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Mp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Mp.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Mp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Mp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Mp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Mp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Mp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Mp.resolve(n)},t.prototype.containsKey=function(t,e){return Mp.resolve(this._s.containsKey(e))},t}(),Tg=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Vl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Eg(this),this.Ut=new fm,this.Ue=function(t,e){return new wg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Yp(e),this.Qe=new yg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new _g(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Zl("MemoryPersistence","Starting transaction:",t);var i=new Ig(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Mp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ig=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,ql.ZT)(e,t),e}(Lp),Cg=function(){function t(t){this.persistence=t,this.As=new vg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Wl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Mp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Mp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Mp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mp.forEach(this.vs,function(r){var i=Ih.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Mp.or([function(){return Mp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),xg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ag(t,e){return"firestore_clients_"+t+"_"+e}function kg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ng(t,e){return"firestore_targets_"+t+"_"+e}xg.UNAUTHENTICATED=new xg(null),xg.GOOGLE_CREDENTIALS=new xg("google-credentials-uid"),xg.FIRST_PARTY=new xg("first-party-uid");var Rg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new Gl(s.error.code,s.error.message)),o?new t(e,n,s.state,i):($l("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Og=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gl(i.error.code,i.error.message)),s?new t(e,i.state,r):($l("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Td(),o=0;i&&o<r.activeTargetIds.length;++o)i=Th(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):($l("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):($l("SharedClientState","Failed to parse online state: "+e),null)},t}(),Lg=function(){function t(){this.activeTargetIds=Td()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ld(eh),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ag(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Lg),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,ql.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ag(this.persistenceKey,r)))&&(s=Dg.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ng(this.persistenceKey,t));if(n){var r=Og.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ng(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Zl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Zl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Zl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Zl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void $l("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,ql.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,ql.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Vl.o;if(null!=t)try{var n=JSON.parse(t);Jl("number"==typeof n),e=n}catch(t){$l("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vl.o&&this.sequenceNumberHandler(o);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Rg(this.currentUser,t,e,n),i=kg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=kg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ng(this.persistenceKey,t),i=new Og(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Dg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Rg.Vs(new xg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Og.Vs(r,e)},t.prototype.js=function(t){return Pg.Vs(t)},t.prototype.ii=function(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Zl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Td();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Mg=function(){function t(){this.li=new Lg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Lg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ug=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),jg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Zl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Zl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Vg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Bg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,ql.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new jl;o.listenOnce(Ll.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Pl.NO_ERROR:var e=o.getResponseJson();Zl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Pl.TIMEOUT:Zl("Connection",'RPC "'+t+'" timed out'),s(new Gl(Bl.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:var n=o.getStatus();if(Zl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Bl).indexOf(e)>=0?e:Bl.UNKNOWN}(r.status);s(new Gl(a,r.message))}else s(new Gl(Bl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Gl(Bl.UNAVAILABLE,"Connection failed."));break;default:Wl()}}finally{Zl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new El,i=Cu(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Ml({})),this.Fi(s.initMessageHeaders,e),(0,No.uI)()||(0,No.b$)()||(0,No.d)()||(0,No.w1)()||(0,No.Mn)()||(0,No.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Zl("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Vg({Ei:function(t){c?Zl("Connection","Not sending because WebChannel is closed:",t):(u||(Zl("Connection","Opening WebChannel transport."),a.open(),u=!0),Zl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ul.EventType.OPEN,function(){c||Zl("Connection","WebChannel transport opened.")}),h(a,Ul.EventType.CLOSE,function(){c||(c=!0,Zl("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ul.EventType.ERROR,function(t){c||(c=!0,Kl("Connection","WebChannel transport errored:",t),l.Vi(new Gl(Bl.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ul.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Jl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Zl("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=rd[t];if(void 0!==e)return cd(e)}(i),o=r.message;void 0===s&&(s=Bl.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Gl(s,o)),a.close()}else Zl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Fl.STAT_EVENT,function(t){10===t.stat?Zl("Connection","Detected buffering proxy"):11===t.stat&&Zl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Zl("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return Zl("RestConnection","Received: ",t),t},function(e){throw Kl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+qg[t]},t}());function Gg(){return"undefined"!=typeof window?window:null}function zg(){return"undefined"!=typeof document?document:null}function Hg(t){return new Fd(t,!0)}var Zg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Zl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),$g=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Zg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Bl.RESOURCE_EXHAUSTED?($l(e.toString()),$l("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Bl.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Gl(Bl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,ql.mG)(t,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Zl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Zl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Kg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,ql.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Jl(void 0===e||"string"==typeof e),ph.fromBase64String(e||"")):(Jl(void 0===e||e instanceof Uint8Array),ph.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Bl.UNKNOWN:cd(t.code);return new Gl(e,t.message||"")}(a);n=new kd(r,i,s,o||null)}else if("documentChange"in e){i=zd(t,(r=e.documentChange).document.name),s=qd(r.document.updateTime);var a=new qh({mapValue:{fields:r.document.fields}}),u=(o=Bh.newFoundDocument(i,s,a),r.targetIds||[]);n=new xd(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=zd(t,(r=e.documentDelete).document),s=r.readTime?qd(r.readTime):sh.min(),a=Bh.newNoDocument(i,s),n=new xd([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=zd(t,(r=e.documentRemove).document),n=new xd([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Wl();var c=e.filter;i=new ad(r=c.count||0),n=new Ad(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return sh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?sh.min():e.readTime?qd(e.readTime):sh.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=$d(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=$h(r)?{documents:Xd(t,r)}:{query:tp(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ud(t,e.resumeToken):e.snapshotVersion.compareTo(sh.min())>0&&(n.readTime=Md(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=$d(this.R),e.removeTarget=t,this.cr(e)},e}($g),Qg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,ql.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Jl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Jl(void 0!==e),t.map(function(t){return function(t,e){var n=qd(t.updateTime?t.updateTime:e);return n.isEqual(sh.min())&&(n=qd(e)),new Gf(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=qd(t.commitTime);return this.listener.Tr(n,e)}return Jl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=$d(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Jd(e.R,t)})};this.cr(n)},e}($g),Wg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,ql.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Gl(Bl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Bl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gl(Bl.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Bl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gl(Bl.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Jg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?($l(e),this.Vr=!1):Zl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Yg=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,ql.mG)(s,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return ay(this)?(Zl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return(e=Yl(t)).Or.add(4),[4,ty(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Xg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Jg(n,r)};function Xg(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:if(!ay(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ty(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ey(t,e){var n=Yl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),oy(n)?sy(n):Sy(n).er()&&ry(n,e))}function ny(t,e){var n=Yl(t),r=Sy(n);n.$r.delete(e),r.er()&&iy(n,e),0===n.$r.size&&(r.er()?r.ir():ay(n)&&n.Br.set("Unknown"))}function ry(t,e){t.qr.U(e.targetId),Sy(t).mr(e)}function iy(t,e){t.qr.U(e),Sy(t).yr(e)}function sy(t){t.qr=new Rd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Sy(t).start(),t.Br.Sr()}function oy(t){return ay(t)&&!Sy(t).tr()&&t.$r.size>0}function ay(t){return 0===Yl(t).Or.size}function uy(t){t.qr=void 0}function cy(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){return t.$r.forEach(function(e,n){ry(t,e)}),[2]})})}function ly(t,e){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(n){return uy(t),oy(t)?(t.Br.Nr(e),sy(t)):t.Br.set("Unknown"),[2]})})}function hy(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s;return(0,ql.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof kd&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,ql.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Zl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fy(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof xd?t.qr.X(e):e instanceof Ad?t.qr.rt(e):t.qr.et(e),n.isEqual(sh.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,sg(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ph.EMPTY_BYTE_STRING,n.snapshotVersion)),iy(t,e);var r=new Jp(n.target,e,1,n.sequenceNumber);ry(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Zl("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,fy(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function fy(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r=this;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:if(!Bp(e))throw e;return t.Or.add(1),[4,ty(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return sg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,ql.mG)(r,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return Zl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Xg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function dy(t,e){return e().catch(function(n){return fy(t,n,e)})}function py(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,ql.Jh)(this,function(o){switch(o.label){case 0:e=Yl(t),n=Ey(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return ay(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,ug(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Ey(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,fy(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return my(e)&&gy(e),[2]}})})}function my(t){return ay(t)&&!Ey(t).tr()&&t.kr.length>0}function gy(t){Ey(t).start()}function yy(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){return Ey(t).Ar(),[2]})})}function vy(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n,r;return(0,ql.Jh)(this,function(i){for(e=Ey(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function by(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Wp.from(r,e,n),[4,dy(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,py(t)];case 2:return s.sent(),[2]}})})}function _y(t,e){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e&&Ey(t).pr?[4,function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return ud(r=e.code)&&r!==Bl.ABORTED?(n=t.kr.shift(),Ey(t).sr(),[4,dy(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,py(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return my(t)&&gy(t),[2]}})})}function wy(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return n=Yl(t),e?(n.Or.delete(2),[4,Xg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,ty(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Sy(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Yl(t);return r.br(),new Kg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:cy.bind(null,t),Ri:ly.bind(null,t),_r:hy.bind(null,t)}),t.Mr.push(function(n){return(0,ql.mG)(e,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),oy(t)?sy(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),uy(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Ey(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Yl(t);return r.br(),new Qg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:yy.bind(null,t),Ri:_y.bind(null,t),Ir:vy.bind(null,t),Tr:by.bind(null,t)}),t.Mr.push(function(n){return(0,ql.mG)(e,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,py(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Zl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Ty=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gl(Bl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Iy(t,e){if($l("AsyncQueue",e+": "+t),Bp(t))return new Gl(Bl.UNAVAILABLE,e+": "+t);throw t}var Cy=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ih.comparator(e.key,n.key)}:function(t,e){return Ih.comparator(t.key,e.key)},this.keyedMap=vd(),this.sortedSet=new ld(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),xy=function(){function t(){this.Kr=new ld(Ih.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Wl():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ay=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Cy.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ky=function(){this.Wr=void 0,this.listeners=[]},Ny=function(){this.queries=new Mm(function(t){return Sf(t)},wf),this.onlineState="Unknown",this.Gr=new Set};function Ry(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,ql.Jh)(this,function(c){switch(c.label){case 0:if(n=Yl(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new ky),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Iy(a,"Initialization of query '"+Ef(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Ly(n),[2]}})})}function Oy(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ql.Jh)(this,function(a){return n=Yl(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Dy(t,e){for(var n=Yl(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Ly(n)}function Py(t,e,n){var r=Yl(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Ly(t){t.Gr.forEach(function(t){t.next()})}var Fy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ay(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ay.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),My=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Uy=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return zd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Wd(this.R,t.document,!1):Bh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return qd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Uy(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Sd()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return[4,mg(this.localStore,new Uy(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,gg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Jm(Object.assign({},this.progress),t))]}})})}}();var jy=function(t){this.key=t},qy=function(t){this.key=t},Vy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Sd(),this.mutatedKeys=Sd(),this.lo=If(t),this.fo=new Cy(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new xy,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=df(this.query)&&i.size===this.query.limit?i.last():null,c=pf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Tf(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),df(this.query)||pf(this.query))for(;o.size>this.query.limit;){var l=df(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Ay(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new xy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Sd(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new qy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new jy(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Sd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ay.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),By=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gy=function(t){this.key=t,this.bo=!1},zy=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Mm(function(t){return Sf(t)},wf),this.Vo=new Map,this.So=new Set,this.Do=new ld(Ih.comparator),this.Co=new Map,this.No=new vg,this.xo={},this.Fo=new Map,this.ko=Im.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Hy(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:return n=_v(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,cg(n.localStore,bf(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,Zy(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&ey(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function Zy(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,ql.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,hg(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(sv(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,hg(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Vy(e,i.Bn),o=s._o(i.documents),a=Cd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),sv(t,n,u.To),c=new By(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function $y(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return n=Yl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!wf(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,lg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ny(n.remoteStore,r.targetId),rv(n,r.targetId)}).catch(Nm)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return rv(n,r.targetId),[4,lg(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Ky(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:r=wv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yl(t),i=ih.now(),s=e.reduce(function(t,e){return t.add(e.key)},Sd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Qf(c,n.get(c.key));null!=l&&o.push(new Xf(c.key,l,Vh(l.value.mapValue),zf.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ld(eh)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,uv(r,i.changes)];case 3:return a.sent(),[4,py(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Iy(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Qy(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:n=Yl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,og(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Jl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Jl(r.bo):t.removedDocuments.size>0&&(Jl(r.bo),r.bo=!1))}),[4,uv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Nm(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Wy(t,e,n){var r=Yl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Yl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Ly(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jy(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,ql.Jh)(this,function(c){switch(c.label){case 0:return(r=Yl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new ld(Ih.comparator)).insert(s,Bh.newNoDocument(s,sh.min())),a=Sd().add(s),u=new Id(sh.min(),new Map,new dd(eh),o,a),[4,Qy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),av(r),[3,4];case 2:return[4,lg(r.localStore,e,!1).then(function(){return rv(r,e,n)}).catch(Nm)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Yy(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:n=Yl(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,ig(n.localStore,e)];case 2:return i=s.sent(),nv(n,r,null),ev(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,uv(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Nm(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Xy(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:r=Yl(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=Yl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Jl(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),nv(r,e,n),ev(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,uv(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Nm(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function tv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:ay((n=Yl(t)).remoteStore)||Zl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Yl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Iy(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function ev(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function nv(t,e,n){var r=Yl(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function rv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||iv(t,e)})}function iv(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ny(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),av(t))}function sv(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof jy?(t.No.addReference(s.key,e),ov(t,s)):s instanceof qy?(Zl("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||iv(t,s.key)):Wl()}}function ov(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Zl("SyncEngine","New document in limbo: "+n),t.So.add(r),av(t))}function av(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ih(lh.fromString(e)),r=t.ko.next();t.Co.set(r,new Gy(n)),t.Do=t.Do.insert(n,r),ey(t.remoteStore,new Jp(bf(ff(n.path)),r,2,Vl.o))}}function uv(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:return r=Yl(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Xm.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,ql.Jh)(this,function(l){switch(l.label){case 0:n=Yl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Mp.forEach(e,function(e){return Mp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Mp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Bp(r=l.sent()))throw r;return Zl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function cv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return(n=Yl(t)).currentUser.isEqual(e)?[3,3]:(Zl("SyncEngine","User change. New user:",e.toKey()),[4,rg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Gl(Bl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,uv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function lv(t,e){var n=Yl(t),r=n.Co.get(e);if(r&&r.bo)return Sd().add(r.key);var i=Sd(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function hv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return[4,hg((n=Yl(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&sv(n,e.targetId,i.To),i)]}})})}function fv(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){return[2,dg((e=Yl(t)).localStore).then(function(t){return uv(e,t)})]})})}function dv(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s;return(0,ql.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=Yl(t),r=Yl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Mp.resolve(null)})})}((i=Yl(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,py(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(nv(i,e,r||null),ev(i,e),function(t,e){Yl(Yl(t)._n).Gt(e)}(i.localStore,e)):Wl(),o.label=4;case 4:return[4,uv(i,s)];case 5:return o.sent(),[3,7];case 6:Zl("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function pv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,ql.Jh)(this,function(c){switch(c.label){case 0:return _v(n=Yl(t)),wv(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,mv(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,wy(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)ey(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return rv(n,e),lg(n.localStore,e,!0)}),ny(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,mv(n,a)];case 5:return c.sent(),function(t){var e=Yl(t);e.Co.forEach(function(t,n){ny(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ld(Ih.comparator)}(n),n.$o=!1,[4,wy(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function mv(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,ql.Jh)(this,function(m){switch(m.label){case 0:n=Yl(t),r=[],i=[],s=0,o=e,m.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,cg(n.localStore,bf(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,hv(n,f)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,fg(n.localStore,a)];case 8:return p=m.sent(),[4,cg(n.localStore,p)];case 9:return u=m.sent(),[4,Zy(n,gv(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function gv(t){return hf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yv(t){var e=Yl(t);return Yl(Yl(e.localStore).persistence).fn()}function vv(t,e,n,r){return(0,ql.mG)(this,void 0,void 0,function(){var i,s,o;return(0,ql.Jh)(this,function(a){switch(a.label){case 0:return(i=Yl(t)).$o?(Zl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,dg(i.localStore)];case 3:return s=a.sent(),o=Id.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,uv(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,lg(i.localStore,e,!0)];case 6:return a.sent(),rv(i,e,r),[3,8];case 7:Wl(),a.label=8;case 8:return[2]}})})}function bv(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,ql.Jh)(this,function(f){switch(f.label){case 0:if(!(r=_v(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(Zl("SyncEngine","Adding an already active target "+o),[3,5]):[4,fg(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,cg(r.localStore,a)];case 3:return u=f.sent(),[4,Zy(r,gv(a),u.targetId,!1)];case 4:f.sent(),ey(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,lg(r.localStore,t,!1).then(function(){ny(r.remoteStore,t),rv(r,t)}).catch(Nm)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function _v(t){var e=Yl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jy.bind(null,e),e.vo._r=Dy.bind(null,e.eventManager),e.vo.Mo=Py.bind(null,e.eventManager),e}function wv(t){var e=Yl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xy.bind(null,e),e}var Sv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return this.R=Hg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ng(this.persistence,new tg,t.initialUser,this.R)},t.prototype.qo=function(t){return new Tg(Cg.bs,this.R)},t.prototype.Bo=function(t){return new Mg},t.prototype.terminate=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,ql.ZT)(e,t),e.prototype.initialize=function(e){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,pg(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,wv(this.Ko.syncEngine)];case 4:return n.sent(),[4,py(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ng(this.persistence,new tg,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Dm(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Wm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ym.withCacheSize(this.cacheSizeBytes):ym.DEFAULT;return new $m(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Gg(),zg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Mg},e}(Sv),Tv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,ql.ZT)(e,t),e.prototype.initialize=function(e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r=this;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Fg?(this.sharedClientState.syncEngine={ui:dv.bind(null,n),ai:vv.bind(null,n),hi:bv.bind(null,n),fn:yv.bind(null,n),ci:fv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,ql.mG)(r,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return[4,pv(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Gg();if(!Fg.yt(e))throw new Gl(Bl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Wm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ev),Iv=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n=this;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Wy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cv.bind(null,this.syncEngine),[4,wy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Ny},t.prototype.createDatastore=function(t){var e=Hg(t.databaseInfo.databaseId),n=new Bg(t.databaseInfo);return function(t,e,n){return new Wg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Wy(o.syncEngine,t,0)},s=jg.yt()?new jg:new Ug,new Yg(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new zy(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e=Yl(t),Zl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,ty(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Cv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),xv=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Fp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new My(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Gl(Bl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,ql.Jh)(this,function(u){switch(u.label){case 0:return n=Yl(t),r=$d(n.R)+"/documents",i={documents:e.map(function(t){return Gd(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Jl(!!e.found);var n=zd(t,e.found.name),r=qd(e.found.updateTime),i=new qh({mapValue:{fields:e.found.fields}});return Bh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Jl(!!e.missing),Jl(!!e.readTime);var n=zd(t,e.missing),r=qd(e.readTime);return Bh.newNoDocument(n,r)}(t,e):Wl()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());Jl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new sd(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ih.fromPath(n);e.mutations.push(new od(r,e.precondition(r)))}),[4,function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return n=Yl(t),r=$d(n.R)+"/documents",i={writes:e.map(function(t){return Jd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Wl();e=sh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gl(Bl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?zf.updateTime(e):zf.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(sh.min()))throw new Gl(Bl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zf.updateTime(e)}return zf.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Av=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Zg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,ql.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,ql.Jh)(this,function(r){return t=new xv(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Sh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ud(e)}return!1},t}(),kv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=xg.UNAUTHENTICATED,this.clientId=th.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,ql.mG)(r,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return Zl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Gl(Bl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Fp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ql.mG)(t,void 0,void 0,function(){var t,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Iy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Nv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Zl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,ql.mG)(i,void 0,void 0,function(){return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,rg(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Rv(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ov(t)];case 1:return n=i.sent(),Zl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,ql.mG)(this,void 0,void 0,function(){var n,r;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return(n=Yl(t)).asyncQueue.verifyOperationInProgress(),Zl("RemoteStore","RemoteStore received new credentials"),r=ay(n),n.Or.add(3),[4,ty(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Xg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Ov(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Zl("FirestoreClient","Using default OfflineComponentProvider"),[4,Nv(t,new Sv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Dv(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Zl("FirestoreClient","Using default OnlineComponentProvider"),[4,Rv(t,new Iv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Pv(t){return Ov(t).then(function(t){return t.persistence})}function Lv(t){return Ov(t).then(function(t){return t.localStore})}function Fv(t){return Dv(t).then(function(t){return t.remoteStore})}function Mv(t){return Dv(t).then(function(t){return t.syncEngine})}function Uv(t){return(0,ql.mG)(this,void 0,void 0,function(){var e,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return[4,Dv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Hy.bind(null,e.syncEngine),n.onUnlisten=$y.bind(null,e.syncEngine),n)]}})})}function jv(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(r,void 0,void 0,function(){var r;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Cv({next:function(s){e.enqueueAndForget(function(){return Oy(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new Gl(Bl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Gl(Bl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Fy(ff(n.path),s,{includeMetadataChanges:!0,so:!0});return Ry(t,o)},[4,Uv(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function qv(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(r,void 0,void 0,function(){var r;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Cv({next:function(n){e.enqueueAndForget(function(){return Oy(t,o)}),n.fromCache&&"server"===r.source?i.reject(new Gl(Bl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Fy(n,s,{includeMetadataChanges:!0,so:!0});return Ry(t,o)},[4,Uv(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Vv=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},Bv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Gv=new Map,zv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Hv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(xg.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Zv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$v=function(){function t(t){var e=this;this.currentUser=xg.UNAUTHENTICATED,this.oc=new Fp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Zl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Zl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Zl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Jl("string"==typeof n.accessToken),new zv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,ql.mG)(n,void 0,void 0,function(){return(0,ql.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Jl(null===t||"string"==typeof t),new xg(t)},t}(),Kv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=xg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Qv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Kv(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(xg.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wv(t,e,n){if(!n)throw new Gl(Bl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Jv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Yv(t,e,n,r){if(!0===e&&!0===r)throw new Gl(Bl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xv(t){if(!Ih.isDocumentKey(t))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tb(t){if(Ih.isDocumentKey(t))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function eb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Wl()}function nb(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Gl(Bl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=eb(t);throw new Gl(Bl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function rb(t,e){if(e<=0)throw new Gl(Bl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ib=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Gl(Bl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gl(Bl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Yv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),sb=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ib({}),this._settingsFrozen=!1,t instanceof Bv?(this._databaseId=t,this._credentials=new Hv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Gl(Bl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bv(t.options.projectId)}(t),this._credentials=new $v(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Gl(Bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Gl(Bl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ib(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Hv;switch(t.type){case"gapi":var e=t.client;return Jl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Gl(Bl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Gv.get(this))&&(Zl("ComponentProvider","Removing Datastore"),Gv.delete(this),t.terminate()),Promise.resolve();var t},t}(),ob=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ub(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ab=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ub=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ff(r))||this)._path=r,i.type="collection",i}return(0,ql.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ob(this.firestore,null,new Ih(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ab);function cb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,No.m9)(t),Wv("collection","path",e),t instanceof sb)return tb(n=lh.fromString.apply(lh,(0,ql.ev)([e],r))),new ub(t,null,n);if(!(t instanceof ob||t instanceof ub))throw new Gl(Bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tb(n=lh.fromString.apply(lh,(0,ql.ev)([t.path],r)).child(lh.fromString(e))),new ub(t.firestore,null,n)}function lb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,No.m9)(t),1===arguments.length&&(e=th.u()),Wv("doc","path",e),t instanceof sb)return Xv(n=lh.fromString.apply(lh,(0,ql.ev)([e],r))),new ob(t,null,new Ih(n));if(!(t instanceof ob||t instanceof ub))throw new Gl(Bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xv(n=t._path.child(lh.fromString.apply(lh,(0,ql.ev)([e],r)))),new ob(t.firestore,t instanceof ub?t.converter:null,new Ih(n))}function hb(t,e){return t=(0,No.m9)(t),e=(0,No.m9)(e),(t instanceof ob||t instanceof ub)&&(e instanceof ob||e instanceof ub)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fb(t,e){return t=(0,No.m9)(t),e=(0,No.m9)(e),t instanceof ab&&e instanceof ab&&t.firestore===e.firestore&&wf(t._query,e._query)&&t.converter===e.converter}var db=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Zg(this,"async_queue_retry"),this.Tc=function(){var e=zg();e&&Zl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=zg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=zg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Bp(t=n.sent()))throw t;return Zl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,$l("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Ty.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Wl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,ql.mG)(this,void 0,void 0,function(){var t;return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function pb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Fp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new db,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,ql.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||yb(this),this._firestoreClient.terminate()},e}(sb);function gb(t){return t._firestoreClient||yb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Vv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new kv(t._credentials,t._queue,r)}function vb(t,e,n){var r=this,i=new Fp;return t.asyncQueue.enqueue(function(){return(0,ql.mG)(r,void 0,void 0,function(){var r;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Nv(t,n)];case 1:return s.sent(),[4,Rv(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Bl.FAILED_PRECONDITION||t.code===Bl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function bb(t){if(t._initialized||t._terminated)throw new Gl(Bl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _b=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),wb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ph.fromBase64String(e))}catch(e){throw new Gl(Bl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ph.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Sb=function(t){this._methodName=t},Eb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gl(Bl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gl(Bl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return eh(this._lat,t._lat)||eh(this._long,t._long)},t}(),Tb=/^__.*__$/,Ib=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Xf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Yf(t,this.data,e,this.fieldTransforms)},t}(),Cb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Xf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function xb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wl()}}var Ab=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Kb(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(xb(this.Cc)&&Tb.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),kb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Hg(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Ab({Cc:t,methodName:e,Bc:n,path:fh.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Nb(t){var e=t._freezeSettings(),n=Hg(t._databaseId);return new kb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rb(t,e,n,r,i,s){void 0===s&&(s={});var o=t.qc(s.merge||s.mergeFields?2:0,e,n,i);zb("Data must be an object, but it was:",o,r);var a,u,c=Bb(r,o);if(s.merge)a=new dh(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=Hb(e,f[h],n);if(!o.contains(d))throw new Gl(Bl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Qb(l,d)||l.push(d)}a=new dh(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Ib(new qh(c),a,u)}var Ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Sb);function Db(t,e,n){return new Ab({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Bf(t.path,new Pf)},e.prototype.isEqual=function(t){return t instanceof e},e}(Sb),Lb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ql.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Db(this,t,!0),n=this.Uc.map(function(t){return Vb(t,e)}),r=new Lf(n);return new Bf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sb),Fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ql.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Db(this,t,!0),n=this.Uc.map(function(t){return Vb(t,e)}),r=new Mf(n);return new Bf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sb),Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,ql.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new jf(t.R,kf(t.R,this.Qc));return new Bf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Sb);function Ub(t,e,n,r){var i=t.qc(1,e,n);zb("Data must be an object, but it was:",i,r);var s=[],o=qh.empty();ah(r,function(t,r){var a=$b(e,t,n);r=(0,No.m9)(r);var u=i.$c(a);if(r instanceof Ob)s.push(a);else{var c=Vb(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new dh(s);return new Cb(o,a,i.fieldTransforms)}function jb(t,e,n,r,i,s){var o=t.qc(1,e,n),a=[Hb(e,r,n)],u=[i];if(s.length%2!=0)throw new Gl(Bl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(Hb(e,s[c])),u.push(s[c+1]);for(var l=[],h=qh.empty(),f=a.length-1;f>=0;--f)if(!Qb(l,a[f])){var d=a[f],p=u[f];p=(0,No.m9)(p);var m=o.$c(d);if(p instanceof Ob)l.push(d);else{var g=Vb(p,m);null!=g&&(l.push(d),h.set(d,g))}}var y=new dh(l);return new Cb(h,y,o.fieldTransforms)}function qb(t,e,n,r){return void 0===r&&(r=!1),Vb(n,t.qc(r?4:3,e))}function Vb(t,e){if(Gb(t=(0,No.m9)(t)))return zb("Unsupported field value:",e,t),Bb(t,e);if(t instanceof Sb)return function(t,e){if(!xb(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Vb(s[i],e.Oc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,No.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kf(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ih.fromDate(t);return{timestampValue:Md(e.R,n)}}if(t instanceof ih)return n=new ih(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Md(e.R,n)};if(t instanceof Eb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wb)return{bytesValue:Ud(e.R,t._byteString)};if(t instanceof ob){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Vd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+eb(t))}(t,e)}function Bb(t,e){var n={};return uh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ah(t,function(t,r){var i=Vb(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Gb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ih||t instanceof Eb||t instanceof wb||t instanceof ob||t instanceof Sb)}function zb(t,e,n){if(!Gb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=eb(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Hb(t,e,n){if((e=(0,No.m9)(e))instanceof _b)return e._internalPath;if("string"==typeof e)return $b(t,e);throw Kb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Zb=new RegExp("[~\\*/\\[\\]]");function $b(t,e,n){if(e.search(Zb)>=0)throw Kb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(_b.bind.apply(_b,(0,ql.ev)([void 0],e.split(".")))))._internalPath}catch(Ko){throw Kb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Kb(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Gl(Bl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qb(t,e){return t.some(function(t){return t.isEqual(e)})}var Wb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ob(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Jb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Yb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Jb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Wb);function Yb(t,e){return"string"==typeof e?$b(t,e):e instanceof _b?e._internalPath:e._delegate._internalPath}var Xb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),t_=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,ql.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new e_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Yb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Wb),e_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(t_),n_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Xb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new e_(n._firestore,n._userDataWriter,r.key,r,new Xb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gl(Bl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new e_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Xb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new e_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Xb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:r_(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function r_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wl()}}function i_(t,e){return t instanceof t_&&e instanceof t_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof n_&&e instanceof n_&&t._firestore===e._firestore&&fb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function s_(t){if(pf(t)&&0===t.explicitOrderBy.length)throw new Gl(Bl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var o_=function(){};function a_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var u_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,ql.ZT)(e,t),e.prototype._apply=function(t){var e=Nb(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){m_(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(p_(r,t,l[c]));a={arrayValue:{values:u}}}else a=p_(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||m_(o,s),a=qb(n,"where",o,"in"===s||"not-in"===s);var h=Kh.create(i,s,a);return function(t,e){if(e.g()){var n=gf(t);if(null!==n&&!n.isEqual(e.field))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mf(t);null!==r&&g_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Gl(Bl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new ab(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(o_),c_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return(0,ql.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new of(e,n);return function(t,e){if(null===mf(t)){var n=gf(t);null!==n&&g_(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new ab(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new lf(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(o_),l_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,ql.ZT)(e,t),e.prototype._apply=function(t){return new ab(t.firestore,t.converter,_f(t._query,this.zc,this.Hc))},e}(o_),h_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ql.ZT)(e,t),e.prototype._apply=function(t){var e=d_(t,this.type,this.Jc,this.Yc);return new ab(t.firestore,t.converter,function(t,e){return new lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(o_),f_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ql.ZT)(e,t),e.prototype._apply=function(t){var e=d_(t,this.type,this.Jc,this.Yc);return new ab(t.firestore,t.converter,function(t,e){return new lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(o_);function d_(t,e,n,r){if(n[0]=(0,No.m9)(n[0]),n[0]instanceof Wb)return function(t,e,n,r,i){if(!r)throw new Gl(Bl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=vf(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Dh(e,r.key));else{var c=r.data.field(u.field);if(bh(c))throw new Gl(Bl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new rf(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Nb(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new Gl(Bl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!yf(t)&&-1!==c.indexOf("/"))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(lh.fromString(c));if(!Ih.isDocumentKey(l))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ih(l);a.push(Dh(e,h))}else{var f=qb(n,r,c);a.push(f)}}return new rf(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function p_(t,e,n){if("string"==typeof(n=(0,No.m9)(n))){if(""===n)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!yf(e)&&-1!==n.indexOf("/"))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(lh.fromString(n));if(!Ih.isDocumentKey(r))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Dh(t,new Ih(r))}if(n instanceof ob)return Dh(t,n._key);throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+eb(n)+".")}function m_(t,e){if(!Array.isArray(t)||0===t.length)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function g_(t,e,n){if(!n.isEqual(e))throw new Gl(Bl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var y_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ch(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yh(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(vh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Wl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ah(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Eb(yh(t.latitude),yh(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=_h(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(wh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=gh(t);return new ih(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=lh.fromString(t);Jl(fp(n));var r=new Bv(n.get(1),n.get(3)),i=new Ih(n.popFirst(5));return r.isEqual(e)||$l("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function v_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var b_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ql.ZT)(e,t),e.prototype.convertBytes=function(t){return new wb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ob(this.firestore,null,e)},e}(y_),__=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=w_(t,this._firestore),i=v_(r.converter,e,n),s=Rb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,zf.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=w_(t,this._firestore);return s="string"==typeof(e=(0,No.m9)(e))||e instanceof _b?jb(this._dataReader,"WriteBatch.update",o._key,e,n,r):Ub(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,zf.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=w_(t,this._firestore);return this._mutations=this._mutations.concat(new sd(e._key,zf.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Gl(Bl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function w_(t,e){if((t=(0,No.m9)(t)).firestore!==e)throw new Gl(Bl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var S_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ql.ZT)(e,t),e.prototype.convertBytes=function(t){return new wb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ob(this.firestore,null,e)},e}(y_);function E_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nb(t,ob);var s=nb(t.firestore,mb),o=Nb(s);return I_(s,[("string"==typeof(e=(0,No.m9)(e))||e instanceof _b?jb(o,"updateDoc",t._key,e,n,r):Ub(o,"updateDoc",t._key,e)).toMutation(t._key,zf.exists(!0))])}function T_(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,No.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||pb(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(pb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof ob)c=nb(t.firestore,mb),l=ff(t._key.path),u={next:function(e){i[a]&&i[a](C_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=nb(t,ab);c=nb(d.firestore,mb),l=d._query;var p=new S_(c);u={next:function(t){i[a]&&i[a](new n_(c,p,d,t))},error:i[a+1],complete:i[a+2]},s_(t._query)}return function(t,e,n,r){var i=this,s=new Cv(r),o=new Fy(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(i,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e=Ry,[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(i,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e=Oy,[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(gb(c),l,h,u)}function I_(t,e){return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var n;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return n=Ky,[4,Mv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(gb(t),e)}function C_(t,e,n){var r=n.docs.get(e._key),i=new S_(t);return new t_(t,i,e._key,r,new Xb(n.hasPendingWrites,n.fromCache),e.converter)}var x_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,ql.ZT)(e,t),e.prototype.get=function(e){var n=this,r=w_(e,this._firestore),i=new S_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new t_(n._firestore,i,r._key,t._document,new Xb(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nb(t)}return t.prototype.get=function(t){var e=this,n=w_(t,this._firestore),r=new b_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Wl();var i=t[0];if(i.isFoundDocument())return new Wb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Wb(e._firestore,r,n._key,null,n.converter);throw Wl()})},t.prototype.set=function(t,e,n){var r=w_(t,this._firestore),i=v_(r.converter,e,n),s=Rb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=w_(t,this._firestore);return s="string"==typeof(e=(0,No.m9)(e))||e instanceof _b?jb(this._dataReader,"Transaction.update",o._key,e,n,r):Ub(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=w_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function A_(){if("undefined"==typeof Uint8Array)throw new Gl(Bl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function k_(){if("undefined"==typeof atob)throw new Gl(Bl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var N_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return k_(),new t(wb.fromBase64String(e))},t.fromUint8Array=function(e){return A_(),new t(wb.fromUint8Array(e))},t.prototype.toBase64=function(){return k_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return A_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),R_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){bb(t=nb(t,mb));var n=gb(t),r=t._freezeSettings(),i=new Iv;return vb(n,i,new Ev(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){bb(t=nb(t,mb));var e=gb(t),n=t._freezeSettings(),r=new Iv;return vb(e,r,new Tv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Gl(Bl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Fp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ql.mG)(e,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,ql.mG)(this,void 0,void 0,function(){return(0,ql.Jh)(this,function(e){switch(e.label){case 0:return jp.yt()?[4,jp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Wm(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),O_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Bv||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Kl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=nb(t,sb))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Kl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,No.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Gl(Bl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Zv(new zv(s,new xg(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ql.mG)(e,void 0,void 0,function(){var e,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return[4,Pv(t)];case 1:return e=r.sent(),[4,Fv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Yl(t);return e.Or.delete(0),Xg(e)}(n))]}})})})}(gb(nb(this._delegate,mb)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ql.mG)(e,void 0,void 0,function(){var e,n;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return[4,Pv(t)];case 1:return e=r.sent(),[4,Fv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,ql.mG)(this,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return(e=Yl(t)).Or.add(0),[4,ty(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(gb(nb(this._delegate,mb)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Yv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(e,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(r){switch(r.label){case 0:return e=tv,[4,Mv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(gb(nb(this._delegate,mb)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Cv(e);return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yl(t).Gr.add(e),e.next()},[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var e;return(0,ql.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yl(t).Gr.delete(e)},[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(gb(t=nb(t,mb)),pb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Gl(Bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Z_(this,cb(this._delegate,t))}catch(t){throw U_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new M_(this,lb(this._delegate,t))}catch(t){throw U_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new G_(this,function(t,e){if(t=nb(t,sb),Wv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ab(t,null,function(t){return new lf(lh.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw U_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var n;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Dv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Av(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(gb(t),function(n){return e(new x_(t,n))})}(this._delegate,function(n){return t(new P_(e,n))})},t.prototype.batch=function(){var t=this;return gb(this._delegate),new L_(new __(this._delegate,function(e){return I_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Gl(Bl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Gl(Bl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),D_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ql.ZT)(e,t),e.prototype.convertBytes=function(t){return new N_(new wb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return M_.tu(e,this.firestore,null)},e}(y_),P_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.prototype.get=function(t){var e=this,n=$_(t);return this._delegate.get(n).then(function(t){return new V_(e._firestore,new t_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=$_(t);return n?(Jv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=$_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,ql.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t}(),L_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=$_(t);return n?(Jv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=$_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,ql.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),F_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new e_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new B_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new D_(e),n),i.set(n,s)),s},t}();F_.nu=new WeakMap;var M_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Gl(Bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ob(n._delegate,r,new Ih(e)))},t.tu=function(e,n,r){return new t(n,new ob(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Z_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Z_(this.firestore,cb(this._delegate,t))}catch(t){throw U_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,No.m9)(t))instanceof ob&&hb(this._delegate,t)},t.prototype.set=function(t,e){e=Jv("DocumentReference.set",e);try{return function(t,e,n){t=nb(t,ob);var r=nb(t.firestore,mb),i=v_(t.converter,e,n);return I_(r,[Rb(Nb(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,zf.none())])}(this._delegate,t,e)}catch(t){throw U_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?E_(this._delegate,t):E_.apply(void 0,(0,ql.ev)([this._delegate,t,e],n))}catch(t){throw U_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return I_(nb((t=this._delegate).firestore,mb),[new sd(t._key,zf.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=j_(e),i=q_(e,function(e){return new V_(t.firestore,new t_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return T_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nb(t,ob);var e=nb(t.firestore,mb),n=gb(e),r=new S_(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var n;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i;return(0,ql.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Yl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Gl(Bl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Iy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Lv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new t_(e,r,t._key,n,new Xb(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nb(t,ob);var e=nb(t.firestore,mb);return jv(gb(e),t._key,{source:"server"}).then(function(n){return C_(e,t,n)})}(this._delegate):function(t){t=nb(t,ob);var e=nb(t.firestore,mb);return jv(gb(e),t._key).then(function(n){return C_(e,t,n)})}(this._delegate)).then(function(t){return new V_(e.firestore,new t_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.eu(this.firestore,e):null))},t}();function U_(t,e,n){return t.message=t.message.replace(e,n),t}function j_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!pb(r))return r}return{}}function q_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=pb(t[0])?t[0]:pb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var V_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new M_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return i_(this._delegate,t._delegate)},t}(),B_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ql.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(V_),G_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,a_(this._delegate,function(t,e,n){var r=e,i=Yb("where",t);return new u_(i,r,n)}(e,n,r)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,a_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Yb("orderBy",t);return new c_(r,n)}(e,n)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,a_(this._delegate,function(t){return rb("limit",t),new l_("limit",t,"F")}(e)))}catch(e){throw U_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,a_(this._delegate,function(t){return rb("limitToLast",t),new l_("limitToLast",t,"L")}(e)))}catch(e){throw U_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,a_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new h_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,a_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new h_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,a_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,a_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return fb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nb(t,ab);var e=nb(t.firestore,mb),n=gb(e),r=new S_(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return(0,ql.mG)(n,void 0,void 0,function(){var n;return(0,ql.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ql.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,ql.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,hg(t,e,!0)];case 1:return a=u.sent(),r=new Vy(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Iy(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Lv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new n_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nb(t,ab);var e=nb(t.firestore,mb),n=gb(e),r=new S_(e);return qv(n,t._query,{source:"server"}).then(function(n){return new n_(e,r,t,n)})}(this._delegate):function(t){t=nb(t,ab);var e=nb(t.firestore,mb),n=gb(e),r=new S_(e);return s_(t._query),qv(n,t._query).then(function(n){return new n_(e,r,t,n)})}(this._delegate)).then(function(t){return new H_(e.firestore,new n_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=j_(e),i=q_(e,function(e){return new H_(t.firestore,new n_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return T_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.eu(this.firestore,e):null))},t}(),z_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new B_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),H_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new G_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new B_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new z_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new B_(n._firestore,r))})},t.prototype.isEqual=function(t){return i_(this._delegate,t._delegate)},t}(),Z_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,ql.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new M_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new M_(this.firestore,void 0===t?lb(this._delegate):lb(this._delegate,t))}catch(t){throw U_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=nb(t.firestore,mb),r=lb(t),i=v_(t.converter,e);return I_(n,[Rb(Nb(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,zf.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new M_(e.firestore,t)})},e.prototype.isEqual=function(t){return hb(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?F_.eu(this.firestore,t):null))},e}(G_);function $_(t){return nb(t,ob)}var K_,Q_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(_b.bind.apply(_b,(0,ql.ev)([void 0],t)))}return t.documentId=function(){return new t(fh.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,No.m9)(t))instanceof _b&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),W_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Pb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ob("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lb("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fb("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Mb("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),J_=n(5119),Y_={Firestore:O_,GeoPoint:Eb,Timestamp:ih,Blob:N_,Transaction:P_,WriteBatch:L_,DocumentReference:M_,DocumentSnapshot:V_,Query:G_,QueryDocumentSnapshot:B_,QuerySnapshot:H_,CollectionReference:Z_,FieldPath:Q_,FieldValue:W_,setLogLevel:function(t){zl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function X_(t,e){return function(t,e=Fe.z){return new bt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function tw(t,e){return X_(t,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function ew(t,e){return tw(t,e).pipe(wo(void 0),So(),(0,wt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function nw(t,e,n){return ew(t,n).pipe(Io((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return rw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return rw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Se(),(0,wt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function rw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function iw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new J_.wA("firestore",function(t){return function(t,e){return new O_(t,new mb(t,e),new R_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Y_)))})(K_=ko.Z),K_.registerVersion("@firebase/firestore","2.3.7");class sw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=ew(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,wt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(wo(void 0),So(),Rt(([t,e])=>e.length>0||!t),(0,wt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Io((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=iw(t);return nw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return tw(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,vt.D)(this.query.get(t)).pipe((0,Bs.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new ow(this.ref.doc(t),this.afs)}}class ow{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=fw(n,e);return new sw(r,i,this.afs)}snapshotChanges(){return X_(this.ref,this.afs.schedulers.outsideAngular).pipe(wo(void 0),So(),(0,wt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,vt.D)(this.ref.get(t)).pipe((0,Bs.QV)(this.afs.schedulers.insideAngular))}}class aw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ew(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Rt(t=>t.length>0),this.afs.keepUnstableUntilFirst):ew(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Io((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=iw(t);return nw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return tw(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,vt.D)(this.query.get(t)).pipe((0,Bs.QV)(this.afs.schedulers.insideAngular))}}const uw=new r.OlP("angularfire2.enableFirestorePersistence"),cw=new r.OlP("angularfire2.firestore.persistenceSettings"),lw=new r.OlP("angularfire2.firestore.settings"),hw=new r.OlP("angularfire2.firestore.use-emulator");function fw(t,e=(t=>t)){return{query:e(t),ref:t}}let dw=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new qs.HU(s),this.keepUnstableUntilFirst=(0,qs.ss)(this.schedulers);const c=(0,qs.on)(t,s,e);!Ao.Z.auth&&u&&(0,qs.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,qs.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!P(i)){const e=()=>{try{return(0,vt.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(K_){return"undefined"!=typeof console&&console.warn(K_),(0,xt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,xt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=fw(n,e),s=this.schedulers.ngZone.run(()=>r);return new sw(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new aw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new ow(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qs.Dh),r.LFG(qs.xv,8),r.LFG(uw,8),r.LFG(lw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(cw,8),r.LFG(hw,8),r.LFG(co,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qs.Dh),r.LFG(qs.xv,8),r.LFG(uw,8),r.LFG(lw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(cw,8),r.LFG(hw,8),r.LFG(co,8))},token:t,providedIn:"any"}),t})(),pw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:uw,useValue:!0},{provide:cw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[dw]}),t})();const mw={apiKey:"AIzaSyD3Lonh3uRfEOUKsXKYvuibAqUfsAnJkLo",authDomain:"readkit-ad377.firebaseapp.com",projectId:"readkit-ad377",storageBucket:"readkit-ad377.appspot.com",messagingSenderId:"873046724431",appId:"1:873046724431:web:abda939ad90b16d10abf3a"};class gw extends Nt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class yw extends Nt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var vw=n(6015);function bw(t,e,n,r,i=new yw(t,n,r)){if(!i.closed)return e instanceof bt.y?e.subscribe(i):(0,vw.s)(e)(i)}var _w=n(9342);const ww={};class Sw{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ew(t,this.resultSelector))}}class Ew extends gw{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ww),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(bw(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===ww?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Tw(t){return new bt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,vt.D)(n):(0,ge.c)()).subscribe(e)})}var Iw=n(2875);function Cw(t){return function(e){return 0===t?(0,ge.c)():e.lift(new xw(t))}}class xw{constructor(t){if(this.total=t,this.total<0)throw new me}call(t,e){return e.subscribe(new Aw(t,this.total))}}class Aw extends Nt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var kw=n(1564);class Nw{constructor(t,e){this.id=t,this.url=e}}class Rw extends Nw{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ow extends Nw{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dw extends Nw{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pw extends Nw{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lw extends Nw{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fw extends Nw{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mw extends Nw{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uw extends Nw{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jw extends Nw{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qw{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vw{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bw{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gw{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zw{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hw{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zw{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $w="primary";class Kw{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qw(t){return new Kw(t)}function Ww(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Jw(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Yw(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Xw(t[i],e[i]))return!1;return!0}function Xw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function tS(t){return Array.prototype.concat.apply([],t)}function eS(t){return t.length>0?t[t.length-1]:null}function nS(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function rS(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,vt.D)(Promise.resolve(t)):(0,xt.of)(t)}const iS={exact:function t(e,n,r){if(!dS(e.segments,n.segments))return!1;if(!cS(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:aS},sS={exact:function(t,e){return Yw(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xw(t[n],e[n]))},ignored:()=>!0};function oS(t,e,n){return iS[n.paths](t.root,e.root,n.matrixParams)&&sS[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function aS(t,e,n){return uS(t,e,e.segments,n)}function uS(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!dS(i,n)&&!e.hasChildren()&&!!cS(i,n,r)}if(t.segments.length===n.length){if(!dS(t.segments,n))return!1;if(!cS(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!aS(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!dS(t.segments,i)&&!!cS(t.segments,i,r)&&!!t.children.primary&&uS(t.children.primary,e,s,r)}}function cS(t,e,n){return e.every((e,r)=>sS[n](t[r].parameters,e.parameters))}class lS{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qw(this.queryParams)),this._queryParamMap}toString(){return gS.serialize(this)}}class hS{constructor(t,e){this.segments=t,this.children=e,this.parent=null,nS(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yS(this)}}class fS{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Qw(this.parameters)),this._parameterMap}toString(){return TS(this)}}function dS(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class pS{}class mS{parse(t){const e=new kS(t);return new lS(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${vS(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${_S(e)}=${_S(t)}`).join("&"):`${_S(e)}=${_S(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const gS=new mS;function yS(t){return t.segments.map(t=>TS(t)).join("/")}function vS(t,e){if(!t.hasChildren())return yS(t);if(e){const e=t.children.primary?vS(t.children.primary,!1):"",n=[];return nS(t.children,(t,e)=>{e!==$w&&n.push(`${e}:${vS(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return nS(t.children,(t,r)=>{r===$w&&(n=n.concat(e(t,r)))}),nS(t.children,(t,r)=>{r!==$w&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===$w?[vS(t.children.primary,!1)]:[`${n}:${vS(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${yS(t)}/${e[0]}`:`${yS(t)}/(${e.join("//")})`}}function bS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _S(t){return bS(t).replace(/%3B/gi,";")}function wS(t){return bS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function SS(t){return decodeURIComponent(t)}function ES(t){return SS(t.replace(/\+/g,"%20"))}function TS(t){return`${wS(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wS(t)}=${wS(e[t])}`).join("")}`;var e}const IS=/^[^\/()?;=#]+/;function CS(t){const e=t.match(IS);return e?e[0]:""}const xS=/^[^=?&#]+/,AS=/^[^?&#]+/;class kS{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hS([],{}):new hS([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new hS(t,e)),n}parseSegment(){const t=CS(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new fS(SS(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=CS(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=CS(this.remaining);t&&(n=t,this.capture(n))}t[SS(e)]=SS(n)}parseQueryParam(t){const e=function(t){const e=t.match(xS);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(AS);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ES(e),i=ES(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=CS(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=$w);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new hS([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class NS{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=RS(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=RS(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=OS(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return OS(t,this._root).map(t=>t.value)}}function RS(t,e){if(t===e.value)return e;for(const n of e.children){const e=RS(t,n);if(e)return e}return null}function OS(t,e){if(t===e.value)return[e];for(const n of e.children){const r=OS(t,n);if(r.length)return r.unshift(e),r}return[]}class DS{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function PS(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class LS extends NS{constructor(t,e){super(t),this.snapshot=e,VS(this,t)}toString(){return this.snapshot.toString()}}function FS(t,e){const n=function(t,e){const n=new jS([],{},{},"",{},$w,e,null,t.root,-1,{});return new qS("",new DS(n,[]))}(t,e),r=new pe([new fS("",{})]),i=new pe({}),s=new pe({}),o=new pe({}),a=new pe(""),u=new MS(r,i,o,a,s,$w,e,n.root);return u.snapshot=n.root,new LS(new DS(u,[]),n)}class MS{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(t=>Qw(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(t=>Qw(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function US(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class jS{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qw(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qw(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qS extends NS{constructor(t,e){super(e),this.url=t,VS(this,e)}toString(){return BS(this._root)}}function VS(t,e){e.value._routerState=t,e.children.forEach(e=>VS(t,e))}function BS(t){const e=t.children.length>0?` { ${t.children.map(BS).join(", ")} } `:"";return`${t.value}${e}`}function GS(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yw(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Yw(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yw(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Yw(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function zS(t,e){return Yw(t.params,e.params)&&function(t,e){return dS(t,e)&&t.every((t,n)=>Yw(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||zS(t.parent,e.parent))}function HS(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return HS(t,e,r);return HS(t,e)})}(t,e,n);return new DS(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return ZS(e,t),t}}const n=new MS(new pe((r=e.value).url),new pe(r.params),new pe(r.queryParams),new pe(r.fragment),new pe(r.data),r.outlet,r.component,r),i=e.children.map(e=>HS(t,e));return new DS(n,i)}var r}function ZS(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ZS(t.children[n],e.children[n])}function $S(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function KS(t){return"object"==typeof t&&null!=t&&t.outlets}function QS(t,e,n,r,i){let s={};return r&&nS(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new lS(n.root===t?e:WS(n.root,t,e),s,i)}function WS(t,e,n){const r={};return nS(t.children,(t,i)=>{r[i]=t===e?n:WS(t,e,n)}),new hS(t.segments,r)}class JS{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&$S(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(KS);if(r&&r!==eS(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class YS{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function XS(t,e,n){if(t||(t=new hS([],{})),0===t.segments.length&&t.hasChildren())return tE(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(KS(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!iE(a,u,e))return s;r+=2}else{if(!iE(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new hS(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new hS(t.segments.slice(r.pathIndex),t.children),tE(e,0,i)}return r.match&&0===i.length?new hS(t.segments,{}):r.match&&!t.hasChildren()?eE(t,e,n):r.match?tE(t,0,i):eE(t,e,n)}function tE(t,e,n){if(0===n.length)return new hS(t.segments,{});{const r=function(t){return KS(t[0])?t[0].outlets:{[$w]:t}}(n),i={};return nS(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=XS(t.children[r],e,n))}),nS(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new hS(t.segments,i)}}function eE(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(KS(s)){const t=nE(s.outlets);return new hS(r,t)}if(0===i&&$S(n[0])){r.push(new fS(t.segments[e].path,rE(n[0]))),i++;continue}const o=KS(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&$S(a)?(r.push(new fS(o,rE(a))),i+=2):(r.push(new fS(o,{})),i++)}return new hS(r,{})}function nE(t){const e={};return nS(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=eE(new hS([],{}),0,t))}),e}function rE(t){const e={};return nS(t,(t,n)=>e[n]=`${t}`),e}function iE(t,e,n){return t==n.path&&Yw(e,n.parameters)}class sE{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),GS(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=PS(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),nS(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=PS(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=PS(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Hw(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Gw(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(GS(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),oE(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function oE(t){GS(t.value),t.children.forEach(oE)}class aE{constructor(t,e){this.routes=t,this.module=e}}function uE(t){return"function"==typeof t}function cE(t){return t instanceof lS}const lE=Symbol("INITIAL_VALUE");function hE(){return Gs(t=>function(...t){let e,n;return(0,_o.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,_t.k)(t[0])&&(t=t[0]),(0,_w.n)(t,n).lift(new Sw(e))}(t.map(t=>t.pipe(ye(1),wo(lE)))).pipe(Io((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==lE)return t;if(r===lE&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||cE(r))return r}return t},t)},lE),Rt(t=>t!==lE),(0,wt.U)(t=>cE(t)?t:!0===t),ye(1)))}let fE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[uT]},encapsulation:2}),t})();function dE(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];pE(r,mE(e,r))}}function pE(t,e){t.children&&dE(t.children,e)}function mE(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function gE(t){const e=t.children&&t.children.map(gE),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$w&&(n.component=fE),n}function yE(t){return t.outlet||$w}function vE(t,e){const n=t.filter(t=>yE(t)===e);return n.push(...t.filter(t=>yE(t)!==e)),n}const bE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _E(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},bE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Jw)(n,t,e);if(!i)return Object.assign({},bE);const s={};nS(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function wE(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>SE(t,e,n)&&yE(n)!==$w)}(t,n,r)){const i=new hS(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&yE(s)!==$w){const n=new hS([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[yE(s)]=n}return i}(t,e,r,new hS(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>SE(t,e,n))}(t,n,r)){const s=new hS(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(SE(t,n,a)&&!i[yE(a)]){const n=new hS([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[yE(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new hS(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function SE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function EE(t,e,n,r){return!!(yE(t)===r||r!==$w&&SE(e,n,t))&&("**"===t.path||_E(e,t,n).matched)}function TE(t,e,n){return 0===e.length&&!t.children[n]}class IE{constructor(t){this.segmentGroup=t||null}}class CE{constructor(t){this.urlTree=t}}function xE(t){return new bt.y(e=>e.error(new IE(t)))}function AE(t){return new bt.y(e=>e.error(new CE(t)))}function kE(t){return new bt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class NE{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=wE(this.urlTree.root,[],[],this.config).segmentGroup,e=new hS(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,$w).pipe((0,wt.U)(t=>this.createUrlTree(RE(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(us(t=>{if(t instanceof CE)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof IE)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,$w).pipe((0,wt.U)(e=>this.createUrlTree(RE(e),t.queryParams,t.fragment))).pipe(us(t=>{if(t instanceof IE)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new hS([],{[$w]:t}):t;return new lS(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,wt.U)(t=>new hS([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,vt.D)(r).pipe(kt(r=>{const i=n.children[r],s=vE(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,wt.U)(t=>({segment:t,outlet:r})))}),Io((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rt((e,n)=>t(e,n,r)):so.y,Cw(1),n?Ys(e):eo(()=>new Js))}())}expandSegment(t,e,n,r,i,s){return(0,vt.D)(n).pipe(kt(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(us(t=>{if(t instanceof IE)return(0,xt.of)(null);throw t}))),oo(t=>!!t),us((t,n)=>{if(t instanceof Js||"EmptyError"===t.name){if(TE(e,r,i))return(0,xt.of)(new hS([],{}));throw new IE(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return EE(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):xE(e):xE(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?AE(i):this.lineralizeSegments(n,i).pipe((0,At.zg)(n=>{const i=new hS(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=_E(e,r,i);if(!o)return xE(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?AE(l):this.lineralizeSegments(r,l).pipe((0,At.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,xt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,wt.U)(t=>(n._loadedConfig=t,new hS(r,{})))):(0,xt.of)(new hS(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=_E(e,n,r);if(!s)return xE(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,At.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=wE(e,o,u,s),l=new hS(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,wt.U)(t=>new hS(o,t)));if(0===s.length&&0===c.length)return(0,xt.of)(new hS(o,{}));const h=yE(n)===i;return this.expandSegment(r,l,s,c,h?$w:i,!0).pipe((0,wt.U)(t=>new hS(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,xt.of)(new aE(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,xt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,At.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,wt.U)(t=>(e._loadedConfig=t,t))):function(t){return new bt.y(e=>e.error(Ww(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,xt.of)(new aE([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,xt.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&uE(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!uE(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return rS(s)});return(0,xt.of)(i).pipe(hE(),(0,as.b)(t=>{if(!cE(t))return;const e=Ww(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,wt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,xt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return kE(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new lS(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return nS(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return nS(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new hS(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function RE(t){const e={};for(const n of Object.keys(t.children)){const r=RE(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new hS(t.segments.concat(e.segments),e.children)}return t}(new hS(t.segments,e))}class OE{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class DE{constructor(t,e){this.component=t,this.route=e}}function PE(t,e,n){const r=t._root;return FE(r,e?e._root:null,n,[r.value])}function LE(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function FE(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=PS(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!dS(t.url,e.url);case"pathParamsOrQueryParamsChange":return!dS(t.url,e.url)||!Yw(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zS(t,e)||!Yw(t.queryParams,e.queryParams);case"paramsChange":default:return!zS(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new OE(r)):(s.data=o.data,s._resolvedData=o._resolvedData),FE(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new DE(a.outlet.component,o))}else o&&ME(e,a,i),i.canActivateChecks.push(new OE(r)),FE(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),nS(s,(t,e)=>ME(t,n.getContext(e),i)),i}function ME(t,e,n){const r=PS(t),i=t.value;nS(r,(t,r)=>{ME(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new DE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class UE{}function jE(t){return new bt.y(e=>e.error(t))}class qE{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=wE(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,$w);if(null===e)return null;const n=new jS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$w,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new DS(n,e),i=new qS(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=US(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=vE(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=BE(n);return r.sort((t,e)=>t.value.outlet===$w?-1:e.value.outlet===$w?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return TE(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!EE(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?eS(n).parameters:{};i=new jS(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HE(t),yE(t),t.component,t,GE(e),zE(e)+n.length,ZE(t))}else{const r=_E(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new jS(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,HE(t),yE(t),t.component,t,GE(e),zE(e)+s.length,ZE(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=wE(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new DS(i,t)]}if(0===a.length&&0===c.length)return[new DS(i,[])];const l=yE(t)===r,h=this.processSegment(a,u,c,l?$w:r);return null===h?null:[new DS(i,h)]}}function VE(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function BE(t){const e=[],n=new Set;for(const r of t){if(!VE(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=BE(r.children);e.push(new DS(r.value,t))}return e.filter(t=>!n.has(t))}function GE(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zE(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function HE(t){return t.data||{}}function ZE(t){return t.resolve||{}}function $E(t){return Gs(e=>{const n=t(e);return n?(0,vt.D)(n).pipe((0,wt.U)(()=>e)):(0,xt.of)(e)})}class KE extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const QE=new r.OlP("ROUTES");class WE{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,wt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new aE(tS(i.injector.get(QE,void 0,r.XFs.Self|r.XFs.Optional)).map(gE),i)}),us(t=>{throw e._loader$=void 0,t}));return e._loader$=new Iw.c(n,()=>new fe.xQ).pipe((0,kw.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,vt.D)(this.loader.load(t)):rS(t()).pipe((0,At.zg)(t=>t instanceof r.YKP?(0,xt.of)(t):(0,vt.D)(this.compiler.compileModuleAsync(t))))}}class JE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new YE,this.attachRef=null}}class YE{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new JE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class XE{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function tT(t){throw t}function eT(t,e,n){return e.parse("/")}function nT(t,e){return(0,xt.of)(null)}const rT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sT=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new fe.xQ,this.errorHandler=tT,this.malformedUriErrorHandler=eT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nT,afterPreactivation:nT},this.urlHandlingStrategy=new XE,this.routeReuseStrategy=new KE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new lS(new hS([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new WE(o,a,t=>this.triggerEvent(new qw(t)),t=>this.triggerEvent(new Vw(t))),this.routerState=FS(this.currentUrlTree,this.rootComponentType),this.transitions=new pe({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Rt(t=>0!==t.id),(0,wt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Gs(t=>{let n=!1,r=!1;return(0,xt.of)(t).pipe((0,as.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gs(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,xt.of)(t).pipe(Gs(t=>{const n=this.transitions.getValue();return e.next(new Rw(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ge.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,Gs(t=>function(t,e,n,r,i){return new NE(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,wt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,as.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,At.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new qE(t,e,n,r,i,s).recognize();return null===o?jE(new UE):(0,xt.of)(o)}catch(K_){return jE(K_)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,wt.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,as.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Lw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Rw(n,this.serializeUrl(r),i,s);e.next(a);const u=FS(r,this.rootComponentType).snapshot;return(0,xt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ge.E}),$E(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,as.b)(t=>{const e=new Fw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,wt.U)(t=>Object.assign(Object.assign({},t),{guards:PE(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,At.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,xt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,vt.D)(t).pipe((0,At.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,xt.of)(!0);const o=s.map(s=>{const o=LE(s,e,i);let a;if(function(t){return t&&uE(t.canDeactivate)}(o))a=rS(o.canDeactivate(t,e,n,r));else{if(!uE(o))throw new Error("Invalid CanDeactivate guard");a=rS(o(t,e,n,r))}return a.pipe(oo())});return(0,xt.of)(o).pipe(hE())}(t.component,t.route,n,e,r)),oo(t=>!0!==t,!0))}(o,r,i,t).pipe((0,At.zg)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return(0,vt.D)(e).pipe(kt(e=>bo(function(t,e){return null!==t&&e&&e(new Bw(t)),(0,xt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new zw(t)),(0,xt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Tw(()=>{const i=e.guards.map(i=>{const s=LE(i,e.node,n);let o;if(function(t){return t&&uE(t.canActivateChild)}(s))o=rS(s.canActivateChild(r,t));else{if(!uE(s))throw new Error("Invalid CanActivateChild guard");o=rS(s(r,t))}return o.pipe(oo())});return(0,xt.of)(i).pipe(hE())}));return(0,xt.of)(i).pipe(hE())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xt.of)(!0);const i=r.map(r=>Tw(()=>{const i=LE(r,e,n);let s;if(function(t){return t&&uE(t.canActivate)}(i))s=rS(i.canActivate(e,t));else{if(!uE(i))throw new Error("Invalid CanActivate guard");s=rS(i(e,t))}return s.pipe(oo())}));return(0,xt.of)(i).pipe(hE())}(t,e.route,n))),oo(t=>!0!==t,!0))}(r,s,t,e):(0,xt.of)(n)),(0,wt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,as.b)(t=>{if(cE(t.guardsResult)){const e=Ww(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Mw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Rt(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),$E(t=>{if(t.guards.canActivateChecks.length)return(0,xt.of)(t).pipe((0,as.b)(t=>{const e=new Uw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Gs(t=>{let e=!1;return(0,xt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,At.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,xt.of)(t);let s=0;return(0,vt.D)(i).pipe(kt(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,xt.of)({});const s={};return(0,vt.D)(i).pipe((0,At.zg)(i=>function(t,e,n,r){const i=LE(t,e,r);return rS(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,as.b)(t=>{s[i]=t}))),Cw(1),(0,At.zg)(()=>Object.keys(s).length===i.length?(0,xt.of)(s):ge.E))}(t._resolve,t,e,r).pipe((0,wt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),US(t,n).resolve),null)))}(t.route,e,n,r)),(0,as.b)(()=>s++),Cw(1),(0,At.zg)(e=>s===i.length?(0,xt.of)(t):ge.E))})),(0,as.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,as.b)(t=>{const e=new jw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),$E(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,wt.U)(t=>{const e=function(t,e,n){const r=HS(t,e._root,n?n._root:void 0);return new LS(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,as.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),(0,wt.U)(t=>(new sE(s,t.targetRouterState,t.currentRouterState,o).activate(i),t))),(0,as.b)({next(){n=!0},complete(){n=!0}}),hs(()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),us(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=cE(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Dw(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Pw(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(bf){t.reject(bf)}}var i;return ge.E}));var i,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){dE(t),this.config=t.map(gE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return QS(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new JS(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return nS(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new JS(n,e,r)}(n);if(s.toRoot())return QS(e.root,new hS([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new YS(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new YS(t,t===e.root,0)}const r=$S(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new YS(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?tE(o.segmentGroup,o.index,s.commands):XS(o.segmentGroup,o.index,s.commands);return QS(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=cE(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(K_){e=this.malformedUriErrorHandler(K_,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},rT):!1===e?Object.assign({},iT):e,cE(t))return oS(this.currentUrlTree,t,n);const r=this.parseUrl(t);return oS(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ow(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Dw(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(pS),r.LFG(YE),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),oT=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new fe.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:aT(this.skipLocationChange),replaceUrl:aT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:aT(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(sT),r.Y36(MS),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function aT(t){return""===t||!!t}let uT=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||$w,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new cT(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(YE),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class cT{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===MS?this.route:t===YE?this.childContexts:this.parent.get(t,e)}}class lT{}class hT{preload(t,e){return(0,xt.of)(null)}}let fT=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new WE(e,n,e=>t.triggerEvent(new qw(e)),e=>t.triggerEvent(new Vw(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rt(t=>t instanceof Ow),kt(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,vt.D)(n).pipe((0,vo.J)(),(0,wt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,xt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,At.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(sT),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(lT))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),dT=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ow&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Zw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(sT),r.LFG(L),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const pT=new r.OlP("ROUTER_CONFIGURATION"),mT=new r.OlP("ROUTER_FORROOT_GUARD"),gT=[w,{provide:pS,useClass:mS},{provide:sT,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new sT(null,t,e,n,r,i,s,tS(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[pS,YE,w,r.zs3,r.v3s,r.Sil,QE,pT,[class{},new r.FiY],[class{},new r.FiY]]},YE,{provide:MS,useFactory:function(t){return t.routerState.root},deps:[sT]},{provide:r.v3s,useClass:r.EAV},fT,hT,class{preload(t,e){return e().pipe(us(()=>(0,xt.of)(null)))}},{provide:pT,useValue:{enableTracing:!1}}];function yT(){return new r.PXZ("Router",sT)}let vT=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[gT,ST(e),{provide:mT,useFactory:wT,deps:[[sT,new r.FiY,new r.tp0]]},{provide:pT,useValue:n||{}},{provide:g,useFactory:_T,deps:[a,[new r.tBr(v),new r.FiY],pT]},{provide:dT,useFactory:bT,deps:[sT,L,pT]},{provide:lT,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:hT},{provide:r.PXZ,multi:!0,useFactory:yT},[ET,{provide:r.ip1,multi:!0,useFactory:TT,deps:[ET]},{provide:CT,useFactory:IT,deps:[ET]},{provide:r.tb,multi:!0,useExisting:CT}]]}}static forChild(e){return{ngModule:t,providers:[ST(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(mT,8),r.LFG(sT,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function bT(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new dT(t,e,n)}function _T(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function wT(t){return"guarded"}function ST(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:QE,multi:!0,useValue:t}]}let ET=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new fe.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(sT),r=this.injector.get(pT);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,xt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(pT),n=this.injector.get(fT),i=this.injector.get(dT),s=this.injector.get(sT),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function TT(t){return t.appInitializer.bind(t)}function IT(t){return t.bootstrapListener.bind(t)}const CT=new r.OlP("Router Initializer");let xT=(()=>{class t{constructor(){this.title="readkit-web"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:[uT],styles:[".file-upload[_ngcontent-%COMP%]{margin:auto;width:60%;padding:10px;text-align:center}"]}),t})();function AT(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}let kT=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SignUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.SendVerificationMail(),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SendVerificationMail(){var t=this;return function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){AT(s,r,i,o,a,"next",t)}function a(t){AT(s,r,i,o,a,"throw",t)}o(void 0)})}}(function*(){(yield t.afAuth.currentUser).sendEmailVerification().then(()=>{t.router.navigate(["verify-email"])})})()}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(dw),r.LFG(go),r.LFG(sT),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),NT=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-sign-in"]],decls:18,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"forgotPassword"],["routerLink","/forgot-password"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1"),r._uU(4,"Readk.it book uploader"),r.qZA(),r.TgZ(5,"h3"),r._uU(6,"Sign In"),r.qZA(),r.TgZ(7,"div",3),r._UZ(8,"input",4,5),r.qZA(),r.TgZ(10,"div",3),r._UZ(11,"input",6,7),r.qZA(),r.TgZ(13,"div",3),r.TgZ(14,"input",8),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(9),i=r.MAs(12);return e.authService.SignIn(n.value,i.value)}),r.qZA(),r.qZA(),r.TgZ(15,"div",9),r.TgZ(16,"span",10),r._uU(17,"Forgot Password?"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}},directives:[oT],styles:[""]}),t})(),RT=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3"),r._uU(4,"Sign Up"),r.qZA(),r.TgZ(5,"div",3),r._UZ(6,"input",4,5),r.qZA(),r.TgZ(8,"div",3),r._UZ(9,"input",6,7),r.qZA(),r.TgZ(11,"div",3),r.TgZ(12,"input",8),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(7),i=r.MAs(10);return e.authService.SignUp(n.value,i.value)}),r.qZA(),r.qZA(),r.TgZ(13,"div",3),r.TgZ(14,"span",9),r.TgZ(15,"span",10),r._uU(16,"Or"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",11),r.TgZ(18,"span"),r._uU(19,"Already have an account? "),r.TgZ(20,"span",12),r._uU(21,"Log In"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}},directives:[oT],styles:[""]}),t})();function OT(t,e){if(1&t&&r._UZ(0,"mat-progress-bar",7),2&t){const t=r.oxw();r.Q6J("value",t.uploadProgress)}}function DT(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"mat-icon",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().cancelUpload()}),r._uU(1,"delete_forever"),r.qZA()}}let PT=(()=>{class t{constructor(t){this.http=t,this.requiredFileType="",this.fileName="",this.uploadProgress=0}onFileSelected(t){const e=t.target.files[0];if(e){this.fileName=e.name;const t=new FormData;t.append("thumbnail",e);const n=this.http.post("/api/upload",t,{reportProgress:!0,observe:"events"}).pipe(hs(()=>this.reset()));this.uploadSub=n.subscribe(t=>{t.type==Zt.UploadProgress&&(this.uploadProgress=Math.round(t.loaded/t.total*100))})}}cancelUpload(){this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=null,this.uploadSub=null}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yt))},t.\u0275cmp=r.Xpm({type:t,selectors:[["file-upload"]],inputs:{requiredFileType:"requiredFileType"},decls:10,vars:4,consts:[["type","file","multiple","",1,"file-input",3,"accept","change"],["fileUpload",""],[1,"file-upload"],["mat-mini-fab","","color","primary",1,"upload-btn",3,"click"],[1,"progress"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],["class","cancel-upload",3,"click",4,"ngIf"],["mode","determinate",1,"progress-bar",3,"value"],[1,"cancel-upload",3,"click"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"input",0,1),r.NdJ("change",function(t){return e.onFileSelected(t)}),r.qZA(),r.TgZ(2,"div",2),r._uU(3),r.TgZ(4,"button",3),r.NdJ("click",function(){return r.CHM(t),r.MAs(1).click()}),r.TgZ(5,"mat-icon"),r._uU(6,"attach_file"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",4),r.YNc(8,OT,1,1,"mat-progress-bar",5),r.YNc(9,DT,2,0,"mat-icon",6),r.qZA()}2&t&&(r.Q6J("accept",e.requiredFileType),r.xp6(3),r.hij(" ",e.fileName||"No file uploaded yet."," "),r.xp6(5),r.Q6J("ngIf",e.uploadProgress),r.xp6(1),r.Q6J("ngIf",e.uploadProgress))},directives:[rs,As,k,Ms],styles:[""]}),t})();function LT(t,e){if(1&t&&(r.TgZ(0,"div",3),r.TgZ(1,"div",17),r.TgZ(2,"div",18),r._UZ(3,"img",19),r.TgZ(4,"div",20),r._UZ(5,"file-upload"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(3),r.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",r.LSH),r.s9C("alt",t.displayName)}}function FT(t,e){if(1&t&&(r.TgZ(0,"div",4),r.TgZ(1,"p",9),r._uU(2,"We have sent a confirmation email to "),r.TgZ(3,"strong"),r._uU(4),r.qZA(),r._uU(5,"."),r.qZA(),r.TgZ(6,"p",9),r._uU(7,"Please check your email and click on the link to verfiy your email address."),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(4),r.Oqu(t.email)}}const MT=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:NT},{path:"register-user",component:RT},{path:"dashboard",component:(()=>{class t{constructor(t,e,n){this.authService=t,this.router=e,this.ngZone=n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kT),r.Y36(sT),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-dashboard"]],decls:21,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"container-fluid"],[1,"row"],[1,"col-2"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r._UZ(1,"a",1),r.qZA(),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"nav",4),r.TgZ(5,"div",5),r.TgZ(6,"ul",6),r.TgZ(7,"li",7),r.TgZ(8,"a",8),r._UZ(9,"i",9),r._uU(10,"File upload "),r.qZA(),r.qZA(),r.TgZ(11,"li",7),r.TgZ(12,"a",10),r.NdJ("click",function(){return e.authService.SignOut()}),r._UZ(13,"i",11),r._uU(14,"Log out "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"main",12),r.TgZ(16,"div",13),r.TgZ(17,"div",14),r.TgZ(18,"h1",15),r._uU(19,"File uploader"),r.qZA(),r.qZA(),r.YNc(20,LT,6,2,"div",16),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(20),r.Q6J("ngIf",e.authService.userData))},directives:[k,PT],styles:[".media-body[_ngcontent-%COMP%]{text-align:center}"]}),t})()},{path:"forgot-password",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3"),r._uU(4,"Reset Password"),r.qZA(),r.TgZ(5,"p",3),r._uU(6,"Please enter your email address to request a password reset."),r.qZA(),r.TgZ(7,"div",4),r._UZ(8,"input",5,6),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"input",7),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(9);return e.authService.ForgotPassword(n.value)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",8),r.TgZ(13,"span"),r._uU(14,"Go back to ? "),r.TgZ(15,"span",9),r._uU(16,"Log In"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}},directives:[oT],styles:[""]}),t})()},{path:"verify-email-address",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3"),r._uU(4,"Thank You for Registering"),r.qZA(),r.YNc(5,FT,8,1,"div",3),r.TgZ(6,"div",4),r.TgZ(7,"button",5),r.NdJ("click",function(){return e.authService.SendVerificationMail()}),r._UZ(8,"i",6),r._uU(9," Resend Verification Email "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r.TgZ(11,"span"),r._uU(12,"Go back to?"),r.TgZ(13,"span",8),r._uU(14," Sign in"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("ngIf",e.authService.userData))},directives:[k,oT],styles:[""]}),t})()}];let UT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[vT.forRoot(MT)],vT]}),t})(),jT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[xT]}),t.\u0275inj=r.cJS({providers:[kT],imports:[[yt,Fi,Ct,he,is,ks,js,UT,qs.hO.initializeApp(mw),yo,pw]]}),t})();mt().bootstrapModule(jT).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=4816)}]);